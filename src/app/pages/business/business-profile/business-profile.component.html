<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px',fullScreenBackdrop:true }"></ngx-loading>

<div class="content content_full">

  <div class="content__container">
    <ng-template [ngIf]="merchantData && merchantData.userId">

      <div class="card">
        <div class="card__title">Basic information</div>

        <div class="card__row">
          <div class="card__col-xs-12 card__col-sm-4">
            <app-input [label]="'User Name'" [type]="'text'" [name]="merchantName" [placeholder]="'User Name'"
              [value]="merchantData.name" [disabled]="true"></app-input>
          </div>
          <div class="card__col-xs-12 card__col-sm-4">
            <app-input [label]="'GST Portal User Name'" [type]="'text'" [name]="'letn'" [placeholder]="'User Name'"
              [value]="merchantData.gstDetails.gstPortalUserName"
              (sendValue)="merchantData.gstDetails.gstPortalUserName = $event"></app-input>
          </div>
          <div class="card__col-xs-12 card__col-sm-4">
            <app-input [label]="'GST Portal Password'" [type]="'text'" [name]="'lap'" [placeholder]="'Password'"
              [value]="merchantData.gstDetails.gstPortalPassword"
              (sendValue)="merchantData.gstDetails.gstPortalPassword = $event"></app-input>
          </div>
        </div>
        <div class="card__row">
          <div class="card__col-xs-12 card__col-sm-4">
            <app-input [label]="'GSTIN Number'" [type]="'text'" [is_capital]="true"
              [name]="merchantData.gstDetails.gstn_number" [placeholder]="'GSTIN Number'"
              [value]="merchantData.gstDetails.gstinNumber" (sendValue)="onEnterGSTIN($event)" [max_length]="15">
            </app-input>
            <!-- (inputFocusOut)="onFoucusOutOfGSTINNumber()" -->
          </div>

          <div class="card__col-xs-12 card__col-sm-4">
            <app-input [label]="'Trade Name'" [type]="'text'" [name]="merchantData.gstDetails.tradeName"
              [placeholder]="'Trade Name'" [value]="merchantData.gstDetails.tradeName"
              (sendValue)="merchantData.gstDetails.tradeName = $event"></app-input>
          </div>

          <div class="card__col-xs-12 card__col-sm-4">
            <app-input [label]="'Legal Name'" [type]="'text'" [name]="merchantData.gstDetails.legalName"
              [placeholder]="'Legal Name'" [value]="merchantData.gstDetails.legalName"
              (sendValue)="merchantData.gstDetails.legalName = $event"></app-input>
          </div>
        </div>

        <div class="card__row">
          <div class="card__col-xs-12 card__col-sm-4">
            <app-input [label]="'Contact Number'" [type]="'text'" [name]="merchantData.mobileNumber"
              [placeholder]="'Contact Number'" [value]="merchantData.mobileNumber"
              (sendValue)="merchantData.mobileNumber = $event" [disabled]="true"></app-input>
          </div>

          <div class="card__col-xs-12 card__col-sm-4">
            <app-input [label]="'GSTIN Registered Mobile Number'" [type]="'text'"
              [name]="merchantData.gstDetails.gstinRegisteredMobileNumber"
              [placeholder]="'GSTN Registered Mobile Number'"
              [value]="merchantData.gstDetails.gstinRegisteredMobileNumber"
              (sendValue)="merchantData.gstDetails.gstinRegisteredMobileNumber = $event" [max_length]="15"></app-input>
          </div>

          <div class="card__col-xs-12 card__col-sm-4">
            <app-input [label]="'Email ID'" [type]="'text'" [name]="merchantData.emailAddress"
              [placeholder]="'Email ID'" [value]="merchantData.emailAddress"
              (sendValue)="merchantData.emailAddress = $event" [disabled]="true"></app-input>
          </div>
        </div>


        <div class="card__row">
          <div class="card__col-xs-12 card__col-sm-4">
            <app-input [label]="'Sales Invoice Prefix'" [type]="'text'"
              [name]="merchantData.gstDetails.salesInvoicePrefix" [placeholder]="'E.g. SSBA /2018-2019/'"
              [value]="merchantData.gstDetails.salesInvoicePrefix"
              (sendValue)="merchantData.gstDetails.salesInvoicePrefix = $event"></app-input>
          </div>

          <div class="card__col-xs-12 card__col-sm-4">
            <app-input-select [label]="'GSTR1'" [value]="merchantData.gstDetails.gstr1Type" [type]="'text'"
              [name]="'GSTR1'" [filter_items]="['MONTHLY','QUARTERLY']"
              (sendValue)="merchantData.gstDetails.gstr1Type = $event">
            </app-input-select>
          </div>

          <div class="card__col-xs-12 card__col-sm-4">
            <app-input-select [label]="'GST Type'" [value]="merchantData.gstDetails.gstType" [type]="'text'"
              [name]="'GSTR1'" [filter_items]="['REGULAR', 'COMPOSITE']"
              (sendValue)="merchantData.gstDetails.gstType = $event">
            </app-input-select>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card__title">Bank information</div>
        <div class="card__row">
          <div class="card__col-xs-12 card__col-sm-4">
            <app-input [label]="'IFSC Code'" [type]="'text'" [name]="merchantData.gstDetails.bankInformation.ifscCode"
              [placeholder]="'IFSC Code'" [value]="merchantData.gstDetails.bankInformation.ifscCode" [is_capital]="true"
              (sendValue)="onEnterIFSCCode($event);" (inputFocusOut)="onFoucusOutOfIFSCCode($event)"></app-input>
          </div>

          <div class="card__col-xs-12 card__col-sm-4">
            <app-input [label]="'Bank Name'" [type]="'text'" [name]="merchantData.gstDetails.bankInformation.bankName"
              [placeholder]="'Bank Name'" [value]="merchantData.gstDetails.bankInformation.bankName"
              (sendValue)="merchantData.gstDetails.bankInformation.bankName = $event"></app-input>
          </div>

          <div class="card__col-xs-12 card__col-sm-4">
            <app-input [label]="'Bank Branch'" [type]="'text'"
              [name]="merchantData.gstDetails.bankInformation.accountBranch" [placeholder]="'Bank Branch'"
              [value]="merchantData.gstDetails.bankInformation.accountBranch"
              (sendValue)="merchantData.gstDetails.bankInformation.accountBranch = $event"></app-input>
          </div>
        </div>
        <div class="card__row">
          <div class="card__col-xs-12 card__col-sm-4">
            <app-input [label]="'Account Number'" [type]="'text'"
              [name]="merchantData.gstDetails.bankInformation.accountNumber" [placeholder]="'Account Number'"
              [value]="merchantData.gstDetails.bankInformation.accountNumber"
              (sendValue)="merchantData.gstDetails.bankInformation.accountNumber = $event"></app-input>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card__title">Address information</div>
        <div class="card__row">
          <div class="card__col-xs-12 card__col-sm-4">
            <app-input [label]="'Business Address'" [type]="'text'"
              [name]="merchantData.gstDetails.businessAddress.address" [placeholder]="'Business Address'"
              [value]="merchantData.gstDetails.businessAddress.address"
              (sendValue)="merchantData.gstDetails.businessAddress.address = $event"></app-input>
          </div>

          <div class="card__col-xs-12 card__col-sm-4">
            <app-input-select-object [label]="'Select State'" [type]="'text'" [value]="selected_gst_state"
              [name]="'state s'" [filter_items]="state_list" (sendValue)="onSelectGSTState($event)">
            </app-input-select-object>
          </div>

          <div class="card__col-xs-12 card__col-sm-4">
            <app-input [label]="'Pincode'" [type]="'text'" [name]="merchantData.gstDetails.businessAddress.pincode"
              [placeholder]="'Pincode'" [value]="merchantData.gstDetails.businessAddress.pincode"
              (sendValue)="merchantData.gstDetails.businessAddress.pincode = $event"></app-input>
          </div>
        </div>
      </div>

      <!-- Business Logo Container -->
      <div class="ogp_images card card_main">
        <ngx-loading [show]="bLogoLoader"></ngx-loading>
        <div class="card__title">Business Logo</div>
        <div class="card__row">
          <div class="card__col-xs-12 card__col-sm-6">
            <app-input-upload [upload]="upload" [input_id]="merchantData.gstDetails.s3BusinessLogo"
              (filesDropped)="setBusinessLogo($event)"></app-input-upload>
          </div>

          <div class="wrapper" style="padding-top: 0;">
            <div class="container">
              <div class="card__col-xs-6 card__col-sm-6">
                <div class="image" *ngIf="merchantData.gstDetails.s3BusinessLogo">
                  <img src="{{merchantData.gstDetails.s3BusinessLogo}}" alt="" class="image__item">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Business Logo Container -->

      <!-- Business Signature Container -->
      <div class="ogp_images card card_main" style="margin-left: 5px;margin-right: 0px">
        <ngx-loading [show]="bSignatureLoader"></ngx-loading>
        <div class="card__title">Business Signature</div>
        <div class="card__row">
          <div class="card__col-xs-12 card__col-sm-6">
            <app-input-upload [upload]="upload" [input_id]="merchantData.gstDetails.s3BusinessSignature"
              (filesDropped)="setBusinessSignature($event)"></app-input-upload>
          </div>

          <div class="wrapper" style="padding-top: 0;">
            <div class="container">
              <div class="card__col-xs-6 card__col-sm-6">
                <div class="image" *ngIf="merchantData.gstDetails.s3BusinessSignature">
                  <img src="{{merchantData.gstDetails.s3BusinessSignature}}" alt="" class="image__item">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Business Signature Container -->

      <!-- GST Certificate Container -->
      <div class="ogp_images card card_main">
        <ngx-loading [show]="gstCertLoader"></ngx-loading>
        <div class="card__title">GST Certificate</div>
        <div class="card__row">
          <div class="card__col-xs-12 card__col-sm-6">
            <app-input-upload [upload]="upload" [input_id]="merchantData.gstDetails.s3GstCertificate"
              (filesDropped)="setGSTCertificate($event)"></app-input-upload>
          </div>

          <div class="wrapper" style="padding-top: 0;">
            <div class="container">
              <div class="card__col-xs-6 card__col-sm-6" style="text-align: center;">
                <div class="image" *ngIf="merchantData.gstDetails.s3GstCertificate">
                  <img src="{{merchantData.gstDetails.s3GstCertificate}}" alt="" class="image__item"
                    *ngIf="merchantData.gstDetails.s3GstCertificate.indexOf('.pdf') == -1">
                  <div *ngIf="merchantData.gstDetails.gstCertificate.indexOf('.pdf') != -1" class="pdf-view">
                    <a class="btn" (click)="viewUrl(merchantData.gstDetails.s3GstCertificate);">View</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- GST Certificate Container -->

      <div class="ogp_images gst-btns-card card card_main">
        <div class="card__row">
          <div class="card__col-xs-12 card__col-sm-6">
            <a class="btn" (click)="getITCLedgerDetails();">ITC Ledger</a>
          </div>
          <div class="card__col-xs-12 card__col-sm-6">

          </div>
        </div>
        <div class="card__row">
          <div class="card__col-xs-12 card__col-sm-6">
            <a class="btn" (click)="getLiabilityLedgerDetails();">Liability Ledger</a>
          </div>
          <div class="card__col-xs-12 card__col-sm-6">

          </div>
        </div>
        <div class="card__row">
          <div class="card__col-xs-12 card__col-sm-6">
            <a class="btn" (click)="getCashITCBalance();">Cash ITC Balance</a>
          </div>
          <div class="card__col-xs-12 card__col-sm-6">

          </div>
        </div>
      </div>

      <!-- Opening Balance -->
      <div class="ogp_images card card_main">
        <ngx-loading [show]="gstCertLoader"></ngx-loading>
        <div class="card__title">GST Opening Balance</div>
        <div class="card__row">
          <div class="card__col-xs-12 card__col-sm-6">
            <app-input-select-object [label]="'Select Return Date'" [type]="'text'"
              [value]="selected_gst_return_calendars_data" [type]="'text'" [name]="'selected_gst_return_calendars_data'"
              [filter_items]="gst_return_calendars_data" (sendValue)="onSelectGSTReturnCalendar($event)">
            </app-input-select-object>
          </div>

          <div class="card__col-xs-12 card__col-sm-6  text-pull-right">
            <a class="btn long-btn" (click)="getOpeningBalance();">Get Credit</a>
          </div>
        </div>
        <div class="card__row">
          <div class="report-table-wrapper">
            <table class="report-table" style="min-width: unset;">
              <thead class="report-table__head">
                <tr class="report-table__row report-table__row_head">
                  <th class="report-table__cell report-table__cell_name text-pull-left" style="width: 180px;"></th>
                  <th class="report-table__cell report-table__cell_name text-pull-right">Op. Bal. of Credit</th>
                </tr>
              </thead>
              <tbody class="report-table__body">
                <tr class="report-table__row">
                  <td class="report-table__cell report-table__cell_name text-pull-left">IGST</td>
                  <td class="report-table__cell report-table__cell_day text-pull-right">
                    <app-input [label]="''" [type]="'number'" [name]="'opbcreditigst'" [placeholder]="''"
                      [value]="opBalCreditObj.igst" (sendValue)="opBalCreditObj.igst = $event;"
                      [is_only_positive_number_allowed]="true"></app-input>
                  </td>
                </tr>

                <tr class="report-table__row">
                  <td class="report-table__cell report-table__cell_name text-pull-left">CGST</td>
                  <td class="report-table__cell report-table__cell_day text-pull-right">
                    <app-input [label]="''" [type]="'number'" [name]="'opbcreditcgst'" [placeholder]="''"
                      [value]="opBalCreditObj.cgst" (sendValue)="opBalCreditObj.cgst = $event;"
                      [is_only_positive_number_allowed]="true"></app-input>
                  </td>
                </tr>

                <tr class="report-table__row">
                  <td class="report-table__cell report-table__cell_name text-pull-left">SGST/UTGST</td>
                  <td class="report-table__cell report-table__cell_day text-pull-right">
                    <app-input [label]="''" [type]="'number'" [name]="'opbcreditsgst'" [placeholder]="''"
                      [value]="opBalCreditObj.sgst" (sendValue)="opBalCreditObj.sgst = $event;"
                      [is_only_positive_number_allowed]="true"></app-input>
                  </td>
                </tr>

                <tr class="report-table__row">
                  <td class="report-table__cell report-table__cell_name text-pull-left">CESS</td>
                  <td class="report-table__cell report-table__cell_day text-pull-right">
                    <app-input [label]="''" [type]="'number'" [name]="'opbcreditcess'" [placeholder]="''"
                      [value]="opBalCreditObj.cess" (sendValue)="opBalCreditObj.cess = $event;"
                      [is_only_positive_number_allowed]="true"></app-input>
                  </td>
                </tr>

                <tr class="report-table__row">
                  <td class="report-table__cell report-table__cell_name text-pull-left">LATE FEE</td>
                  <td class="report-table__cell report-table__cell_day text-pull-right">
                    <app-input [label]="''" [type]="'number'" [name]="'opbcreditlatefee'" [placeholder]="''"
                      [value]="opBalCreditObj.lateFee" (sendValue)="opBalCreditObj.lateFee = $event;"
                      [is_only_positive_number_allowed]="true"></app-input>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="card__row text-pull-right">
          <div class="card__col-xs-12 card__col-sm-12">
            <a class="btn long-btn" (click)="saveGstOpeningBalance();">Save Credit</a>
          </div>
        </div>
      </div>
      <!-- Opening Balance -->

      <!-- Terms and Conditions -->
      <div class="ogp_images gst-btns-card ">
        <div class="card card_main">
          <div class="card__title">Opening Balance(User Onboarding)</div>
          <div class="card__row">
            <div class="card__col-xs-12">
              <app-input [label]="'Purchase Value'" [type]="'text'"
                [name]="merchantData.gstDetails.openingPurchaseValue" [placeholder]="'Opening Purchase Value'"
                [value]="merchantData.gstDetails.openingPurchaseValue" [is_capital]="true"
                (sendValue)="merchantData.gstDetails.openingPurchaseValue = $event"></app-input>
            </div>
            <div class="card__col-xs-12" style="padding-top: 10px;">
              <app-input [label]="'Sales Value'" [type]="'text'" [name]="merchantData.gstDetails.openingSalesValue"
                [placeholder]="'Opening Sales Value'" [value]="merchantData.gstDetails.openingSalesValue"
                (sendValue)="merchantData.gstDetails.openingSalesValue = $event"></app-input>
            </div>
          </div>
        </div>
        <div class="card card_main">
          <div class="card__title">Terms and Conditions</div>
          <div class="card__row">
            <div class="card__col-xs-12">
              <textarea rows="10" style="width: 100%;" class="input__text"
                placeholder="You can add your personalised business terms and conditions." maxLength="1000"
                [(ngModel)]="merchantData.gstDetails.termsAndConditions"></textarea>
            </div>
          </div>
        </div>
      </div>
      <!-- Terms and Conditions -->

      <div class="footer__buttons clearfix" style="margin-top: 40px;">
        <a class="btn long-btn" (click)="saveBusinessProfile();">Save Profile</a>
      </div>
      <!-- .footer__buttons -->
    </ng-template>


  </div><!-- .content__container -->
</div><!-- .content -->