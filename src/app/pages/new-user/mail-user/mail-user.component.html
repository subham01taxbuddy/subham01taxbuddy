<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px', fullScreenBackdrop: true }"></ngx-loading>

<div class="main clearfix" style="padding-top: 0px">
  <div class="card">
    <div class="card__row">
      <!-- <label>Selected Agent for email user: </label> &nbsp;&nbsp;
      <span *ngFor="let agent of agentList; let i=index">
          <a href="javascript:;" (click)="getMailUserByAgentId(agent.value)">{{agent.label}}</a> &nbsp;&nbsp;
      </span> -->
      <div class="filter__col card__col-sm-3 card__col-xs-3">
        <mat-form-field appearance="outline">
          <mat-label>Select Agent</mat-label>
          <mat-select placeholder="Select Agent Id" [(ngModel)]="selectedAgent"
            (selectionChange)="getMailUserByAgentId(selectedAgent)">
            <mat-option *ngFor="let agent of agentList" [value]="agent.email">
              {{agent.name}} <span style="font-weight: bold;">{{agent.serviceType}}</span>
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <br><br>


    <!-- <div *ngIf="showMailUser" class="card__row" style="margin-top: 0px;">
        <div class="tab-panel items-tab card__col-xs-12">
          <div class="tab-panel__content tab-panel__content_visible">
            <div class="table product__table">
              <div class="table__row  table__row_header ">
               
                <div class="table__cell product-row__cell-unit flex-20">
                  <a class="table__sort-link">User Name</a>
                </div>
                <div class="table__cell product-row__cell-unit flex-15">
                  <a class="table__sort-link">Mobile Number</a>
                </div>
                <div class="table__cell product-row__cell-unit flex-20">
                  <a class="table__sort-link">Email</a>
                </div>
                <div class="table__cell product-row__cell-unit flex-20">
                  <a class="table__sort-link">Assign Id</a>
                </div>
                <div class="table__cell product-row__cell-unit flex-10">
                  <a class="table__sort-link">Date</a>
                </div>
                <div class="table__cell product-row__cell-unit flex-15">
                  <a class="table__sort-link">Action</a>
                </div>
              </div>
  
              <div *ngIf="mailUser.length > 0">
                <div *ngFor="let item of mailUser; let p=index ">
                  <div class="table__row-item product-row" [class.table__row-disabled]="false">
                    <div class="table__row product-row__main-variant">
                      <div class="table__cell product-row__cell-stock flex-20">
                        {{item.name}}
                      </div>
                      <div class="table__cell product-row__cell-stock flex-15">
                        {{item.mobileNumber}}
                      </div>
                      <div class="table__cell product-row__cell-stock flex-20">
                        {{item.email}}
                      </div>
                      <div class="table__cell product-row__cell-stock flex-20">
                        {{item.assigneeId}}
                      </div>
                      <div class="table__cell product-row__cell-stock flex-10">
                        {{item.createdDate | date: 'dd/MM/yyyy'}}
                      </div>
                      <div class="table__cell product-row__cell-stock flex-15">
                        <button class="butn" (click)="showUserHistry(item.email)">User Histroy</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <br><br>
              <div *ngIf="mailUser.length === 0">
                <label style="font-size: 15px; margin-left: 350px;">No records available for selected agent</label>
              </div>

            </div>
          </div>
        </div>
      </div> -->

    <div class="card__row">
      <ag-grid-angular class="ag-theme-balham" [gridOptions]="mailUserListGridOptions"
        (rowClicked)="mailUserRowClicked($event)" paginationPageSize=15 pagination=true>
      </ag-grid-angular>
    </div>

  </div>
</div>


<br><br>

<!-- <table mat-table [dataSource]="mailUser">
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef> User Name </th>
          <td mat-cell *matCellDef="let element"> {{element.name}} </td>
        </ng-container>
      
        <ng-container matColumnDef="mobileNumber">
          <th mat-header-cell *matHeaderCellDef> Mobile Number </th>
          <td mat-cell *matCellDef="let element"> {{element.mobileNumber}} </td>
        </ng-container>
      
        <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef> Email </th>
          <td mat-cell *matCellDef="let element"> {{element.email}} </td>
        </ng-container>

        <ng-container matColumnDef="assigneeId">
          <th mat-header-cell *matHeaderCellDef> Assign Id </th>
          <td mat-cell *matCellDef="let element"> {{element.assigneeId}} </td>
        </ng-container>

        <ng-container matColumnDef="createdDate">
          <th mat-header-cell *matHeaderCellDef> Date </th>
          <td mat-cell *matCellDef="let element"> {{element.createdDate}} </td>
        </ng-container> -->

<!-- <ng-container matColumnDef="details">
          <th mat-header-cell *matHeaderCellDef> Assign Id </th>
          <td mat-cell *matCellDef="let element">
            <button mat-icon-button color="primary" (click)="redirectToDetails(element.id)">
                <mat-icon class="mat-18">reorder</mat-icon>
            </button>
          </td>
        </ng-container>
      
        <ng-container matColumnDef="update">
            <th mat-header-cell *matHeaderCellDef> Update </th>
            <td mat-cell *matCellDef="let element">
              <button mat-icon-button color="accent" (click)="redirectToUpdate(element.id)">
                  <mat-icon class="mat-18">system_update</mat-icon>
              </button>
            </td>
          </ng-container>
      
          <ng-container matColumnDef="delete">
              <th mat-header-cell *matHeaderCellDef> Delete </th>
              <td mat-cell *matCellDef="let element">
                <button mat-icon-button color="warn" (click)="redirectToDelete(element.id)">
                    <mat-icon class="mat-18">delete</mat-icon>
                </button>
              </td>
            </ng-container> 
      
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>-->