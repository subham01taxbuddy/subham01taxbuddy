<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px',fullScreenBackdrop:true }"></ngx-loading>
<div class="content" style="width: 60%;padding-right: 10px;">
    <app-document-upload (onUploadDoucument)="afterUploadDocs($event)"></app-document-upload>
    <br>
    <div>
        <span *ngFor="let docs of itrDocuments; let i=index">
            <div style="padding: 5px; display: block; text-decoration:underline;">
                <a *ngIf="!docs.isDeleted" href="javascript:;" (click)="getDocsUrl(i)">{{docs.fileName}}</a> 
                <button *ngIf="!docs.isDeleted" (click)="deleteFile(docs.fileName)" style="float: right;"><i class="fa fa-trash" aria-hidden="true"></i></button>

                <a *ngIf="docs.isDeleted" >{{docs.fileName}}</a> &nbsp;&nbsp;
                <button *ngIf="docs.isDeleted" (click)="deletedFileInfo(docs.cloudFileId)" style="float: right;" title="Deleted file information"><i class="fa fa-info-circle" aria-hidden="true"></i></button>
            </div>
            
        </span>
        <div *ngIf="deletedFileData.length > 0" class="userInfo">
            <button style="float: right; margin-bottom: 3px;" (click)="closeDialog()"><i class="fa fa-times-circle" aria-hidden="true"></i></button>
            <table>
                <tr>
                    <th><b>Doc Deleted By</b></th>
                    <th><b>Action</b></th>
                    <th><b>Date</b></th>
                </tr>
                <tr *ngFor="let data of deletedFileData">
                    <td>{{data.actionBy === ITR_JSON.userId ? 'User' : 'Tax Buddy'}}</td>
                    <td>{{data.action}}</td>
                    <td>{{data.date | date}}</td>
                </tr>
            </table>
        </div> 
    </div>
    <br><br><br>
    <ngx-image-zoom *ngIf="docDetails.docType !== 'pdf' || docDetails.docType !== 'Pdf' || docDetails.docType !== 'xls' || docDetails.docType !== 'doc'  || docDetails.docType !== 'xlsx' || docDetails.docType !== 'docx'" [thumbImage]="docDetails.docUrl"
        [fullImage]="docDetails.docUrl" [magnification]="1" [enableScrollZoom]="true" [enableLens]="true"
        [lensWidth]="200">
    </ngx-image-zoom>
    <!-- <div *ngIf="docDetails.docType === 'pdf' || docDetails.docType === 'Pdf'">
        <button ion-button (click)="incrementZoom(-0.1)">
            -
        </button>&nbsp;
        <button ion-button (click)="incrementZoom(0.1)">
            +
        </button>
        <pdf-viewer [src]="docDetails.docUrl" [zoom]="zoom" [original-size]="true" [autoresize]="true"
            [render-text]="true" style="display: block;height: 100%">
        </pdf-viewer>
    </div> -->

    <ngx-doc-viewer *ngIf="docDetails.docType === 'pdf' || docDetails.docType === 'Pdf' || docDetails.docType === 'xls' || docDetails.docType === 'doc'  || docDetails.docType === 'xlsx' || docDetails.docType === 'docx'"
        [url]="docDetails.docUrl" viewer="google"  style="width:100%;height:93vh;">
    </ngx-doc-viewer>

    <div *ngIf="docDetails.docUrl ===''">
        Documents not uploaded/Selected
    </div>
</div>
<div class="content" style="width: 40%;">
    <app-update-status [userId]="ITR_JSON.userId"></app-update-status>
    <hr>
    <mat-accordion>
        <mat-expansion-panel class="color-panel accordion-border" [expanded]="true">
            <mat-expansion-panel-header>
                <div class="card__title" style="font-size: 20px;">TDS on salary</div>
            </mat-expansion-panel-header>
            <div class="card__row">
                <div class="card__col-xs-12 card__col-sm-8">This is TDS on salary deducted by your employer. Enter the
                    amount from form 16 or
                    26AS</div>
                <div class="pull-right">
                    <button type="button" class="btn" style="border: none;" (click)="onAddRow('ADD')">Add Row <i
                            class="fa fa-plus"></i></button>
                </div>
            </div>

            <div style="height: 100%; padding-top: 5px;padding-bottom: 15px; box-sizing: border-box;">
                <ag-grid-angular class="ag-theme-balham" [gridOptions]="onSalaryGridOptions"
                    (rowClicked)="onSalaryRowClicked($event)">
                </ag-grid-angular>
            </div>
        </mat-expansion-panel>
        <mat-expansion-panel class="color-panel accordion-border" [expanded]="false">
            <mat-expansion-panel-header>
                <div class="card__title" style="font-size: 20px;">TDS other than salary</div>
            </mat-expansion-panel-header>
            <div class="card__row">
                <div class="card__col-xs-12 card__col-sm-8">This is TDS on incomes other than salary. Enter the amount
                    from form 16A or 26AS</div>
                <div class="pull-right">
                    <button type="button" class="btn" style="border: none;"
                        (click)="addTdsOtherThanSalary16A('ADD')">Add Row <i class="fa fa-plus"></i></button>
                </div>
            </div>
            <div style="height: 100%; padding-top: 5px;padding-bottom: 15px; box-sizing: border-box;">
                <ag-grid-angular class="ag-theme-balham" [gridOptions]="tdsOtherThanSalary16AGridOptions"
                    (rowClicked)="tdsOtherThanSalary16ARowClicked($event)">
                </ag-grid-angular>
            </div>
        </mat-expansion-panel>

        <mat-expansion-panel class="color-panel accordion-border" [expanded]="false">
            <mat-expansion-panel-header>
                <div class="card__title" style="font-size: 20px;">TDS other than salary 26QB</div>
            </mat-expansion-panel-header>
            <div class="card__row">
                <div class="card__col-xs-12 card__col-sm-8">This is TDS on incomes other than salary. Enter the amount
                    from form 16A or 26AS</div>
                <div class="pull-right">
                    <button type="button" class="btn" style="border: none;"
                        (click)="addTdsOtherThanSalary26QB('ADD')">Add Row <i class="fa fa-plus"></i></button>
                </div>
            </div>
            <div style="height: 100%; padding-top: 5px;padding-bottom: 15px; box-sizing: border-box;">
                <ag-grid-angular class="ag-theme-balham" [gridOptions]="tdsOtherThanSalary26QBGridOptions"
                    (rowClicked)="tdsOtherThanSalary26QBRowClicked($event)">
                </ag-grid-angular>
            </div>
        </mat-expansion-panel>

        <mat-expansion-panel class="color-panel accordion-border" [expanded]="false">
            <mat-expansion-panel-header>
                <div class="card__title" style="font-size: 20px;">TCS</div>
            </mat-expansion-panel-header>
            <div class="card__row">
                <div class="card__col-xs-12 card__col-sm-8">In case of some incomes the payer of income collects TCS
                    from you. Enter the amount
                    from form 16A or 26AS</div>
                <div class="pull-right">
                    <button type="button" class="btn" style="border: none;" (click)="addTcs('ADD')">Add Row <i
                            class="fa fa-plus"></i></button>
                </div>
            </div>
            <div style="height: 100%; padding-top: 5px;padding-bottom: 15px; box-sizing: border-box;">
                <ag-grid-angular class="ag-theme-balham" [gridOptions]="tcsGridOptions"
                    (rowClicked)="tcsRowClicked($event)">
                </ag-grid-angular>
            </div>
        </mat-expansion-panel>


        <mat-expansion-panel class="color-panel accordion-border" [expanded]="false">
            <mat-expansion-panel-header>
                <div class="card__title" style="font-size: 20px;">Advance and self assesment tax</div>
            </mat-expansion-panel-header>
            <div class="card__row">
                <div class="card__col-xs-12 card__col-sm-8">Please enter the amount of advance tax or self assessment
                    tax paid</div>
                <div class="pull-right">
                    <button type="button" class="btn" style="border: none;" (click)="addOtherThanTdsTcs('ADD')">Add Row
                        <i class="fa fa-plus"></i></button>
                </div>
            </div>
            <div style="height: 100%; padding-top: 5px;padding-bottom: 15px; box-sizing: border-box;">
                <ag-grid-angular class="ag-theme-balham" [gridOptions]="otherThanTdsTcsGridOptions"
                    (rowClicked)="otherThanTdsTcsRowClicked($event)">
                </ag-grid-angular>
            </div>
        </mat-expansion-panel>
    </mat-accordion>

    <div class="pull-right">
        <button class="btn long-btn" style="border: none;" (click)="saveAndContinue()">Save And Continue
        </button>
    </div>
</div>