<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px',fullScreenBackdrop:true }"></ngx-loading>
<div>
    <mat-accordion>
        <mat-expansion-panel class="color-panel accordion-border" [expanded]="true"
            style="display: contents !important;">
            <mat-expansion-panel-header>
                <div class="card__title" style="font-size: 20px;">Other Income</div>
            </mat-expansion-panel-header>

            <div class="content" style="width: 60%; padding-right: 10px;">
                <app-document-upload (onUploadDoucument)="afterUploadDocs($event)"></app-document-upload>
                <br>
                <div>
                    <span *ngFor="let docs of itrDocuments; let i=index">
                        <div style="padding: 5px; display: block; text-decoration:underline;">
                            <a *ngIf="!docs.isDeleted" href="javascript:;" (click)="getDocsUrl(i)">{{docs.fileName}}</a>
                            <button *ngIf="!docs.isDeleted" (click)="deleteFile(docs.fileName)" style="float: right;"><i class="fa fa-trash" aria-hidden="true"></i></button>

                            <a *ngIf="docs.isDeleted" >{{docs.fileName}}</a> &nbsp;&nbsp;
                            <button *ngIf="docs.isDeleted" (click)="deletedFileInfo(docs.cloudFileId)" style="float: right;" title="Deleted file information"><i class="fa fa-info-circle" aria-hidden="true"></i></button>
                        </div>
                       
                    </span>
                    <div *ngIf="deletedFileData.length > 0" class="userInfo">
                        <button style="float: right; margin-bottom: 3px;" (click)="closeDialog()"><i class="fa fa-times-circle" aria-hidden="true"></i></button>
                        <table>
                            <tr>
                                <th><b>Doc Deleted By</b></th>
                                <th><b>Action</b></th>
                                <th><b>Date</b></th>
                            </tr>
                            <tr *ngFor="let data of deletedFileData">
                                <td>{{data.actionBy === ITR_JSON.userId ? 'User' : 'Tax Buddy'}}</td>
                                <td>{{data.action}}</td>
                                <td>{{data.date | date}}</td>
                            </tr>
                        </table>
                    </div> 
                </div>
                <br><br><br>
                <ngx-image-zoom *ngIf="docDetails.docType !== 'pdf'" [thumbImage]="docDetails.docUrl"
                    [fullImage]="docDetails.docUrl" [magnification]="1" [enableScrollZoom]="true" [enableLens]="true"
                    [lensWidth]="200">
                </ngx-image-zoom>
                <div *ngIf="docDetails.docType === 'pdf'">
                    <button ion-button (click)="incrementZoom(-0.1)">
                        -
                    </button>&nbsp;
                    <button ion-button (click)="incrementZoom(0.1)">
                        +
                    </button>
                    <pdf-viewer [src]="docDetails.docUrl" [zoom]="zoom" [original-size]="true" [autoresize]="true"
                        [render-text]="true" style="display: block;height: 100%">
                    </pdf-viewer>
                </div>
                <div *ngIf="docDetails.docUrl ===''">
                    Documents not uploaded/Selected
                </div>
            </div>
            <div class="content" style="width: 40%;">
                <div style="height: 100%; padding-top: 10px; box-sizing: border-box;">
                    <ag-grid-angular style="width: 100%; height: 100%;" class="ag-theme-balham"
                        [gridOptions]="otherIncomeGridOptions" (rowClicked)="onOtherIncomeRowClicked($event)">
                    </ag-grid-angular>
                </div>
            </div>

            <div class="pull-right">
                <button class="btn long-btn" style="border: none;" (click)="saveOtherIncome()">Save and Continue
                </button>
            </div>
        </mat-expansion-panel>
    </mat-accordion>
</div>