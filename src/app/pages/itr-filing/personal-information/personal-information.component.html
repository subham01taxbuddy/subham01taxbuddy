<!-- <div class="row"> -->
<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px',fullScreenBackdrop:true }"></ngx-loading>
<div class="content" style="width: 35%; padding-right: 20px;">
    <app-document-upload (onUploadDoucument)="afterUploadDocs($event)"></app-document-upload>
    <br>
    <div>
        <span *ngFor="let docs of documents; let i=index">
            <div style="padding: 5px; display: block; text-decoration:underline;">
                <a *ngIf="!docs.isDeleted" href="javascript:;" (click)="getDocsUrl(i)">{{docs.fileName}}</a> &nbsp;&nbsp;
                <button *ngIf="!docs.isDeleted" (click)="deleteFile(docs.fileName)" style="float: right;" title="Click to Delete File"><i class="fa fa-trash" aria-hidden="true"></i></button>

                <a *ngIf="docs.isDeleted" >{{docs.fileName}}</a> &nbsp;&nbsp;
                <!-- <p *ngIf="docs.isDeleted" style="float: right; ">Document deleted by on </p> -->
                <button *ngIf="docs.isDeleted" (click)="deletedFileInfo(docs.cloudFileId)" style="float: right;" title="Deleted file information"><i class="fa fa-info-circle" aria-hidden="true"></i></button>
            </div>
          
        </span>
        <div *ngIf="deletedFileData.length > 0" class="userInfo">
            <button style="float: right; margin-bottom: 3px;" (click)="closeDialog()"><i class="fa fa-times-circle" aria-hidden="true"></i></button>
            <table>
                <tr>
                    <th><b>Doc Deleted By</b></th>
                    <th><b>Action</b></th>
                    <th><b>Date</b></th>
                </tr>
                <tr *ngFor="let data of deletedFileData">
                    <td>{{data.actionBy === ITR_JSON.userId ? 'User' : 'Tax Buddy'}}</td>
                    <td>{{data.action}}</td>
                    <td>{{data.date | date}}</td>
                </tr>
            </table>
        </div> 
    </div>
    <br>
    <br>
    <br>
    <ngx-image-zoom *ngIf="docDetails.docType !== 'pdf' || docDetails.docType !== 'xls' || docDetails.docType !== 'doc' || docDetails.docType !== 'xlsx' || docDetails.docType !== 'docx'" [thumbImage]="docDetails.docUrl"
        [fullImage]="docDetails.docUrl" [magnification]="1" [enableScrollZoom]="true" [enableLens]="true"
        [lensWidth]="200">
    </ngx-image-zoom>
    <div *ngIf="docDetails.docType === 'pdf'">
        <button ion-button (click)="incrementZoom(-0.1)">
            -
        </button>&nbsp;
        <button ion-button (click)="incrementZoom(0.1)">
            +
        </button>
        <pdf-viewer [src]="docDetails.docUrl" [zoom]="zoom" [original-size]="true" [autoresize]="true"
            [render-text]="true" style="display: block;height: 100%">
        </pdf-viewer>
    </div>

    <ngx-doc-viewer *ngIf="docDetails.docType === 'xls' || docDetails.docType === 'doc' || docDetails.docType === 'xlsx' || docDetails.docType === 'docx'"
       [url]="docDetails.docUrl" viewer="google"  style="width:100%;height:93vh;">
    </ngx-doc-viewer>

    <!--  <ngx-image-zoom [thumbImage]="getDocumentUrl('PAN').docUrl" [fullImage]="getDocumentUrl('PAN').docUrl"
        [magnification]="1" [enableScrollZoom]="true" [enableLens]="true" [lensWidth]="200">
    </ngx-image-zoom>
    <div *ngIf="getDocumentUrl('PAN').docType === 'pdf'">
        <button ion-button (click)="incrementZoom(-0.1)">
            -
        </button>&nbsp;
        <button ion-button (click)="incrementZoom(0.1)">
            +
        </button>
        <pdf-viewer [src]="getDocumentUrl('PAN').docUrl" [zoom]="zoom" [original-size]="true" [autoresize]="true"
            [render-text]="true" style="display: block;height: 100%">
        </pdf-viewer>
    </div> -->
    <div *ngIf="docDetails.docUrl ===''">
        Documents not uploaded/Selected
    </div>
</div>

<div class="content" style="width: 65%;">
    <div class="card__title" style="padding:10px; font-size: 20px;">Customer Profile</div>
    <app-update-status [userId]="ITR_JSON.userId"></app-update-status>
    <hr>
    <form [formGroup]="customerProfileForm">

        <div class="card__row">
            <div class="card__col-xs-12 card__col-sm-4">
                <mat-form-field appearance="outline">
                    <mat-label>First name</mat-label>
                    <input matTooltip="First name as per PAN" matTooltipClass="tab-tooltip" matTooltipPosition="above"
                        matInput currencyMask placeholder="First name" name="FirstName" formControlName="firstName"
                        class="input-field" maxlength="25">
                    <mat-error *ngIf="customerProfileForm.controls['firstName'].hasError('pattern')">Enter
                        character only</mat-error>
                </mat-form-field>
            </div>
            <div class="card__col-xs-12 card__col-sm-4">
                <mat-form-field appearance="outline">
                    <mat-label>Middle name</mat-label>
                    <input matTooltip="Middle name as per PAN" matTooltipClass="tab-tooltip" matTooltipPosition="above"
                        matInput currencyMask placeholder="Middle name" name="MiddleName" formControlName="middleName"
                        class="input-field" maxlength="75">
                    <mat-error *ngIf="customerProfileForm.controls['middleName'].hasError('pattern')">Enter
                        character only</mat-error>
                </mat-form-field>
            </div>
            <div class="card__col-xs-12 card__col-sm-4">
                <mat-form-field appearance="outline">
                    <mat-label>Last name</mat-label>
                    <input matTooltip="Last name as per PAN" matTooltipClass="tab-tooltip" matTooltipPosition="above"
                        matInput currencyMask placeholder="Last name" name="LastName" formControlName="lastName"
                        class="input-field" maxlength="75" required>
                    <mat-error *ngIf="customerProfileForm.controls['lastName'].hasError('pattern')">Enter
                        character only</mat-error>
                </mat-form-field>
            </div>
        </div>
        <div class="card__row">
            <div class="card__col-xs-12 card__col-sm-4">
                <mat-form-field appearance="outline">
                    <mat-label>PAN Number</mat-label>
                    <input [style.cursor]="ITR_JSON.eFillingCompleted == true ? 'not-allowed':''"
                        [disabled]="ITR_JSON.eFillingCompleted === true"
                        matTooltip="Format should like this(e.g. XXXXXNNNNX) X indicate character and N indicates number."
                        matTooltipClass="tab-tooltip" matTooltipPosition="above" matInput placeholder="PAN"
                        name="panNumber" formControlName="panNumber" class="input-field" maxlength="10" minlength="10"
                        required (keyup)="findAssesseeType()"
                        (blur)="getUserDataByPan(customerProfileForm.controls['panNumber'].value)">
                    <mat-error *ngIf="customerProfileForm.controls['panNumber'].hasError('pattern')">Enter
                        valid PAN (e.g
                        XXXXX1234X)</mat-error>
                </mat-form-field>
            </div>
            <div class="card__col-xs-12 card__col-sm-8">
                <mat-form-field appearance="outline">
                    <mat-label>Father Name</mat-label>
                    <input matTooltip="Father's name as per PAN" matTooltipClass="tab-tooltip"
                        matTooltipPosition="above" matInput currencyMask placeholder="Father's name" name="mobile"
                        [formControl]="customerProfileForm.controls['fatherName']" class="input-field" maxlength="125"
                        required>
                    <mat-error *ngIf="customerProfileForm.controls['fatherName'].hasError('pattern')">
                        Enter character only</mat-error>
                </mat-form-field>
            </div>
        </div>
        <div class="card__row">
            <div class="card__col-xs-12 card__col-sm-4">
                <mat-form-field appearance="outline">
                    <mat-label>Date Of Birth</mat-label>
                    <input matTooltip="Date of birth as per PAN" matTooltipClass="tab-tooltip"
                        matTooltipPosition="above" matInput [min]="minDate" [max]="maxDate" [matDatepicker]="picker"
                        class="input-field" placeholder="Date of birth" name="dateOfBirth"
                        [formControl]="customerProfileForm.controls['dateOfBirth']" required>
                    <mat-hint>Format: DD/MM/YYYY</mat-hint>
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
            </div>
            <div class="card__col-xs-12 card__col-sm-8">
                <mat-form-field appearance="outline">
                    <mat-label>Aadhaar Number</mat-label>
                    <input matTooltip="Aadhar Number should be linked with your PAN Number and 12 digit."
                        matTooltipClass="tab-tooltip" matTooltipPosition="above" matInput currencyMask
                        placeholder="Aadhaar" name="aadharNumber" formControlName="aadharNumber" class="input-field"
                        maxlength="12" [required]="customerProfileForm.controls['assesseeType'].value === 'INDIVIDUAL'">
                    <mat-error
                        *ngIf="customerProfileForm.controls['aadharNumber'].hasError('pattern') || customerProfileForm.controls['aadharNumber'].hasError('minLength') || customerProfileForm.controls['aadharNumber'].hasError('maxLength')">
                        Enter
                        12 digit aadhar number</mat-error>
                </mat-form-field>
            </div>
        </div>
        <hr>
        <div class="card__title" style="padding:10px; font-size: 20px;">Address Details</div>
        <div formGroupName="address">
            <div class="card__row">
                <div class="card__col-xs-12 card__col-sm-6">
                    <mat-form-field appearance="outline">
                        <mat-label>Flat/Door/Block No.</mat-label>
                        <input type="text" trim matInput placeholder="Flat/Door/Block No." name="flatNo"
                            formControlName="flatNo" class="input-field" maxlength="50" required>
                    </mat-form-field>
                </div>
                <div class="card__col-xs-12 card__col-sm-6">
                    <mat-form-field appearance="outline">
                        <mat-label>Premises name</mat-label>
                        <input type="text" trim matInput currencyMask placeholder="Premises name" name="premisesName"
                            formControlName="premisesName" class="input-field" maxlength="50">
                    </mat-form-field>
                </div>
            </div>
            <div class="card__row">
                <div class="card__col-xs-12 card__col-sm-6">
                    <mat-form-field appearance="outline">
                        <mat-label>Area/ Locality</mat-label>
                        <input type="text" trim matInput currencyMask placeholder="Area/ Locality" name="area"
                            formControlName="area" class="input-field" maxlength="50" required>
                    </mat-form-field>
                </div>
                <div class="card__col-xs-12 card__col-sm-6">
                    <mat-form-field appearance="outline">
                        <mat-label>PIN Code</mat-label>
                        <input type="text" matInput placeholder="PIN code" name="pinCode" formControlName="pinCode"
                            class="input-field" maxlength="6" minlength="6" trim required (blur)="getCityData()">
                        <mat-error
                            *ngIf="customerProfileForm.controls.address['controls']['pinCode'].hasError('pattern') || customerProfileForm.controls.address['controls']['pinCode'].hasError('minLength') || customerProfileForm.controls.address['controls']['pinCode'].hasError('maxLength')">
                            Enter
                            6 digit PIN code.</mat-error>
                    </mat-form-field>
                </div>
            </div>
            <div class="card__row">
                <div class="card__col-xs-12 card__col-sm-4">
                    <mat-form-field appearance="outline">
                        <mat-label>Select country</mat-label>
                        <mat-select placeholder="Select country" name="country" formControlName="country"
                            (selectionChange)="changeCountry(customerProfileForm.controls.address['controls']['country'].value)"
                            required>
                            <mat-option *ngFor="let country of countryDropdown" [value]="country.countryCode">
                                {{ country.countryName | titlecase}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="card__col-xs-12 card__col-sm-4">
                    <mat-form-field appearance="outline">
                        <mat-label>Select state</mat-label>
                        <mat-select placeholder="Select state" name="state" formControlName="state" required>
                            <mat-option *ngFor="let state of stateDropdown" [value]="state.stateCode">
                                {{ state.stateName | titlecase}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="card__col-xs-12 card__col-sm-4">
                    <mat-form-field appearance="outline">
                        <mat-label>City</mat-label>
                        <input type="text" trim matInput placeholder="City/Taluka/District" name="city"
                            formControlName="city" class="input-field" maxlength="50" required>
                        <mat-error *ngIf="customerProfileForm.controls.address['controls']['city'].hasError('pattern')">
                            Enter valid
                            city name.</mat-error>
                    </mat-form-field>
                </div>
            </div>
        </div>
        <hr>
        <div class="card__title" style="padding:10px; font-size: 20px;">Bank Details</div>
        <table class="table table-bordered" style="width: 100%;">
            <thead style="background:#eaeaea">
                <tr class="table-head" style="border-left: 1px solid #e0e0e0;border-right: 2px solid #f2f0f0;">
                    <th class="text-center">No</th>
                    <th class="text-center">IFSC Code</th>
                    <th class="text-center">Name of Bank</th>
                    <th class="text-center">Account Number</th>
                    <th class="text-center">Refund Acc.</th>
                    <th class="action-th ">
                        <button mat-icon-button color="warn" class="table-add-remove-button text-left"
                            (click)="addMoreBanks(this.customerProfileForm)">
                            <i class="fa fa-plus-square" aria-hidden="true"></i> Add
                        </button>
                    </th>
                </tr>
            </thead>
            <tbody formArrayName="bankDetails">
                <tr *ngFor="let bank of getBankDetailsArray.controls;let i=index" [formGroupName]="i">
                    <td> {{i+1}}</td>
                    <td>
                        <mat-form-field class="input-field-width" style="width: 90% !important;">
                            <input type="text" trim upperCase matInput formControlName="ifsCode" placeholder=""
                                name="ifsCode[i]" class="input-field" maxlength="11" required
                                (blur)="getBankListByIfsc(customerProfileForm.controls['bankDetails']['controls'][i].controls['ifsCode'],i)">
                            <mat-error
                                *ngIf="customerProfileForm.controls['bankDetails']['controls'][i].controls['ifsCode'].hasError('pattern')">
                                Enter valid IFSC Code.</mat-error>
                        </mat-form-field>
                    </td>

                    <td>
                        <mat-form-field class="input-field-width" style="width: 90% !important;">
                            <input type="text" trim matInput formControlName="name" placeholder="" name="name[i]"
                                class="input-field" maxlength="125" required>
                        </mat-form-field>
                    </td>
                    <td>
                        <mat-form-field class="input-field-width" style="width: 90% !important;">
                            <input type="text" trim matInput formControlName="accountNumber" placeholder=""
                                name="accountNumber[i]" class="input-field" maxlength="20" minlength="3" required>
                            <mat-error
                                *ngIf="customerProfileForm.controls['bankDetails']['controls'][i].controls['accountNumber'].hasError('pattern') || customerProfileForm.controls['bankDetails']['controls'][i].controls['accountNumber'].hasError('minlength')">
                                Account number should be between 3-20 digit</mat-error>
                        </mat-form-field>
                    </td>
                    <td style="padding-left: 15px;">
                        <mat-checkbox color="primary" name="hasRefund[i]" formControlName="hasRefund">
                        </mat-checkbox>
                    </td>

                    <td style="white-space: nowrap;padding: 0%;border:none;justify-content: center;">
                        <button mat-icon-button color="warn" class="table-add-remove-button text-left"
                            (click)="deleteBank(i,this.customerProfileForm)">
                            <i class="fa fa-trash" aria-hidden="true"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="footer__buttons clearfix" style="margin-top: 40px;">
            <button class="btn long-btn" style="border: none;" (click)="previousRoute()">Back</button>
            <button class="btn long-btn" style="border: none;" (click)="saveProfile('NEXT')">Save and Continue
            </button>
        </div>
    </form>
</div>
<!-- </div> -->