<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px',fullScreenBackdrop:true }"></ngx-loading>
<div class="main clearfix">
    <div class="content" style="width: 35%">
        <div class="card card_main" style="position: relative;">
            <!-- <button (click)="rotate()">Press me to rotate</button> -->
            <!-- <div [@rotatedState]='state'> -->
            <ngx-image-zoom *ngIf="getDocumentType('PAN') !== 'pdf'" [thumbImage]="getDocumentUrl('PAN')"
                [fullImage]="getDocumentUrl('PAN')" [magnification]="1" [enableScrollZoom]="true" [enableLens]="true"
                [lensWidth]="200">
            </ngx-image-zoom>
            <div *ngIf="getDocumentType('PAN') === 'pdf'">
                <button ion-button (click)="incrementZoom(-0.1)">
                    -
                </button>&nbsp;
                <button ion-button (click)="incrementZoom(0.1)">
                    +
                </button>
                <pdf-viewer [src]="getDocumentUrl('PAN')" [zoom]="zoom" [original-size]="true" [autoresize]="true"
                    [render-text]="true" style="display: block;height: 100%">
                </pdf-viewer>
            </div>
            <div *ngIf="getDocumentUrl('PAN') ===''">
                PAN Card not uploaded
            </div>
            <br>
            <hr>
            <br>
            <ngx-image-zoom *ngIf="getDocumentType('AADHAAR_FRONT') !== 'pdf'"
                [thumbImage]="getDocumentUrl('AADHAAR_FRONT')" [fullImage]="getDocumentUrl('AADHAAR_FRONT')"
                [magnification]="1" [enableScrollZoom]="true" [enableLens]="true" [lensWidth]="200">
            </ngx-image-zoom>
            <div *ngIf="getDocumentType('AADHAAR_FRONT') === 'pdf'">
                <button ion-button (click)="incrementZoom(-0.1)">
                    -
                </button>&nbsp;
                <button ion-button (click)="incrementZoom(0.1)">
                    +
                </button>
                <pdf-viewer [src]="getDocumentUrl('AADHAAR_FRONT')" [zoom]="zoom" [original-size]="true"
                    [autoresize]="true" [render-text]="true" style="display: block;height: 100%">
                </pdf-viewer>
            </div>
            <div *ngIf="getDocumentUrl('AADHAAR_FRONT') ===''">
                Aadhaar Card front not uploaded
            </div>
        </div>
    </div>


    <div class="content" style="width: 65%">
        <div class="content__container">
            <div class="card card_main">
                <div class="card__title">Customer Profile</div>
                <app-update-status [userId]="ITR_JSON.userId"></app-update-status>
                <!-- <div class="card__row">
                    <div class="card__col-xs-12 card__col-sm-4">
                        <mat-form-field appearance="outline">
                            <mat-label>Filling Status</mat-label>
                            <mat-select placeholder="Filling Status" name="fillingStatus" [formControl]="fillingStatus">
                                <mat-option *ngFor="let status of fillingMasterStatus" [value]="status.statusId">
                                    {{ status.statusName }}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div>
                        
                        <button class="btn long-btn" style="border: none;" (click)="updateStatus()">Update</button>
                    </div>
                </div> -->
                <hr>
                <form [formGroup]="customerProfileForm">
                    <div class="card__row">
                        <div class="card__col-xs-12 card__col-sm-4">
                            <mat-form-field appearance="outline">
                                <mat-label>PAN Number</mat-label>
                                <input [style.cursor]="ITR_JSON.eFillingCompleted == true ? 'not-allowed':''"
                                    [disabled]="ITR_JSON.eFillingCompleted === true"
                                    matTooltip="Format should like this(e.g. XXXXXNNNNX) X indicate character and N indicates number."
                                    matTooltipClass="tab-tooltip" matTooltipPosition="above" matInput placeholder="PAN"
                                    name="panNumber" formControlName="panNumber" class="input-field" maxlength="10"
                                    minlength="10" required (keyup)="findAssesseeType()"
                                    (blur)="getUserDataByPan(customerProfileForm.controls['panNumber'].value)">
                                <mat-error *ngIf="customerProfileForm.controls['panNumber'].hasError('pattern')">
                                    Enter
                                    valid PAN (e.g
                                    XXXXX1234X)</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="card__col-xs-12 card__col-sm-4">
                            <mat-form-field appearance="outline">
                                <mat-label>Mobile</mat-label>
                                <input matTooltip="Mobile number should be of 10 digit." matTooltipClass="tab-tooltip"
                                    matTooltipPosition="above" matInput placeholder="Mobile" name="mobile"
                                    formControlName="contactNumber" class="input-field" maxlength="10" required>
                                <mat-error
                                    *ngIf="customerProfileForm.controls['contactNumber'].hasError('pattern') || customerProfileForm.controls['contactNumber'].hasError('minlength') || customerProfileForm.controls['contactNumber'].hasError('maxlength')">
                                    Enter
                                    10 digit mobile number</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="card__col-xs-12 card__col-sm-4">
                            <mat-form-field appearance="outline">
                                <mat-label>Email</mat-label>
                                <input matInput placeholder="Email address" name="email" formControlName="email"
                                    class="input-field" maxlength="50" required>
                                <mat-error *ngIf="customerProfileForm.controls['email'].hasError('pattern')">Enter
                                    valid email</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="card__row">
                        <div class="card__col-xs-12 card__col-sm-4">
                            <mat-form-field appearance="outline">
                                <mat-label>First name</mat-label>
                                <input matTooltip="First name as per PAN" matTooltipClass="tab-tooltip"
                                    matTooltipPosition="above" matInput currencyMask placeholder="First name"
                                    name="FirstName" formControlName="firstName" class="input-field" maxlength="25">
                                <mat-error *ngIf="customerProfileForm.controls['firstName'].hasError('pattern')">
                                    Enter
                                    character only</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="card__col-xs-12 card__col-sm-4">
                            <mat-form-field appearance="outline">
                                <mat-label>Middle name</mat-label>
                                <input matTooltip="Middle name as per PAN" matTooltipClass="tab-tooltip"
                                    matTooltipPosition="above" matInput currencyMask placeholder="Middle name"
                                    name="MiddleName" formControlName="middleName" class="input-field" maxlength="75">
                                <mat-error *ngIf="customerProfileForm.controls['middleName'].hasError('pattern')">
                                    Enter
                                    character only</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="card__col-xs-12 card__col-sm-4">
                            <mat-form-field appearance="outline">
                                <mat-label>Last name</mat-label>
                                <input matTooltip="Last name as per PAN" matTooltipClass="tab-tooltip"
                                    matTooltipPosition="above" matInput currencyMask placeholder="Last name"
                                    name="LastName" formControlName="lastName" class="input-field" maxlength="75"
                                    required>
                                <mat-error *ngIf="customerProfileForm.controls['lastName'].hasError('pattern')">
                                    Enter
                                    character only</mat-error>
                            </mat-form-field>
                        </div>
                    </div>

                    <div class="card__row">
                        <div class="card__col-xs-12 card__col-sm-4">
                            <mat-form-field appearance="outline">
                                <mat-label>Aadhaar Number</mat-label>
                                <input matTooltip="Aadhar Number should be linked with your PAN Number and 12 digit."
                                    matTooltipClass="tab-tooltip" matTooltipPosition="above" matInput currencyMask
                                    placeholder="Aadhaar" name="aadharNumber" formControlName="aadharNumber"
                                    class="input-field" maxlength="12"
                                    [required]="customerProfileForm.controls['assesseeType'].value === 'INDIVIDUAL'">
                                <mat-error
                                    *ngIf="customerProfileForm.controls['aadharNumber'].hasError('pattern') || customerProfileForm.controls['aadharNumber'].hasError('minLength') || customerProfileForm.controls['aadharNumber'].hasError('maxLength')">
                                    Enter
                                    12 digit aadhar number</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="card__col-xs-12 card__col-sm-4">
                            <mat-form-field appearance="outline">
                                <mat-label>Date Of Birth</mat-label>
                                <input matTooltip="Date of birth as per PAN" matTooltipClass="tab-tooltip"
                                    matTooltipPosition="above" matInput [min]="minDate" [max]="maxDate"
                                    [matDatepicker]="picker" class="input-field" placeholder="Date of birth"
                                    name="dateOfBirth" [formControl]="customerProfileForm.controls['dateOfBirth']"
                                    required>
                                <mat-hint>Format: DD/MM/YYYY</mat-hint>
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>
                        </div>
                        <div class="card__col-xs-12 card__col-sm-4">
                            <mat-form-field appearance="outline">
                                <mat-label>Residential status</mat-label>
                                <mat-select placeholder="Residential status" name="residentialStatus"
                                    [formControl]="customerProfileForm.controls['residentialStatus']" required>
                                    <mat-option *ngFor="let res of residentialStatus" [value]="res.value">
                                        {{ res.label }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="card__row">
                        <div class="card__col-xs-12 card__col-sm-4">
                            <mat-form-field appearance="outline">
                                <mat-label>Select Gender</mat-label>
                                <mat-select placeholder="Select Gender" name="gender" formControlName="gender" required>
                                    <mat-option *ngFor="let gender of genderMaster" [value]="gender.value">
                                        {{ gender.label }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="card__col-xs-12 card__col-sm-4">
                            <mat-form-field appearance="outline">
                                <mat-label>ITR Form</mat-label>
                                <mat-select placeholder="ITR Form" name="itrForm" formControlName="itrType" required>
                                    <mat-option *ngFor="let type of itrTypes" [value]="type.value">
                                        {{ type.label }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="card__col-xs-12 card__col-sm-4">
                            <mat-form-field appearance="outline">
                                <mat-label>Employer Category</mat-label>
                                <mat-select placeholder="Employer Category" name="employerCategory"
                                    formControlName="employerCategory" required>
                                    <mat-option *ngFor="let emp of employersDropdown" [value]="emp.value">
                                        {{ emp.label }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                    </div>
                    <div class="card__row">
                        <div class="card__col-xs-12 card__col-sm-4">
                            <mat-form-field appearance="outline">
                                <mat-label>Filing Team</mat-label>
                                <mat-select placeholder="Filing Team Member Id" name="filingTeamMemberId"
                                    formControlName="filingTeamMemberId">
                                    <mat-option *ngFor="let member of filingTeamMembers" [value]="member.value">
                                        {{ member.label }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="card__col-xs-12 card__col-sm-4">
                            <mat-form-field appearance="outline">
                                <mat-label>Package Selected by User</mat-label>
                                <mat-select placeholder="Package Selected by User" name="planIdSelectedByUser"
                                    formControlName="planIdSelectedByUser">
                                    <mat-option *ngFor="let type of planMaster" [value]="type.value">
                                        {{ type.label }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="card__col-xs-12 card__col-sm-4">
                            <mat-form-field appearance="outline">
                                <mat-label>Package Selected by Tax Expert</mat-label>
                                <mat-select placeholder="Package Selected by Tax Expert"
                                    name="planIdSelectedByTaxExpert" formControlName="planIdSelectedByTaxExpert"
                                    [required]="this.ITR_JSON.planIdSelectedByUser === null
                                     || this.ITR_JSON.planIdSelectedByUser === 0">
                                    <mat-option *ngFor="let res of planMaster" [value]="res.value">
                                        {{ res.label }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="card__row">
                        <div class="card__col-xs-12 card__col-sm-4">
                            <mat-form-field appearance="outline">
                                <mat-label>Return Type</mat-label>
                                <mat-select placeholder="Return Type" name="isRevised" formControlName="isRevised"
                                    (selectionChange)="changeReviseForm()" required>
                                    <mat-option *ngFor="let type of returnTypes" [value]="type.value">
                                        {{ type.label }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="card__col-xs-12 card__col-sm-4"
                            *ngIf="customerProfileForm.controls['isRevised'].value === 'Y'">
                            <mat-form-field appearance="outline">
                                <mat-label>Acknowledgement number</mat-label>
                                <input matTooltip="Acknowledgement number maximum of 15 digit"
                                    matTooltipClass="tab-tooltip" matTooltipPosition="above" matInput
                                    placeholder="Acknowledgement of Original ITR" name="orgITRAckNum"
                                    class="input-field" maxlength="15" minlength="15" formControlName="orgITRAckNum" />
                            </mat-form-field>
                        </div>
                        <div class="card__col-xs-12 card__col-sm-4"
                            *ngIf="customerProfileForm.controls['isRevised'].value === 'Y'">
                            <mat-form-field appearance="outline">
                                <mat-label>Date of filing</mat-label>
                                <input [max]="maxDateRevise" matInput [matDatepicker]="revisedPicker"
                                    placeholder="Date of filing original return" name="orgITRDate"
                                    formControlName="orgITRDate" />
                                <mat-datepicker-toggle matSuffix [for]="revisedPicker"></mat-datepicker-toggle>
                                <mat-datepicker #revisedPicker></mat-datepicker>
                            </mat-form-field>
                        </div>

                    </div>
                    <div formGroupName="seventhProviso139">
                        <div class="card__row">
                            <div class="card__col-xs-12 card__col-sm-8">
                                Have you deposited more than 1 crore in your current A/c ( if Yes) then Enter the
                                Amount
                            </div>
                            <div class="card__col-xs-12 card__col-sm-4">
                                <mat-form-field appearance="outline">
                                    <mat-label>Amount</mat-label>
                                    <input matInput placeholder="Amount" name="depAmtAggAmtExcd1CrPrYrFlg" type="number"
                                        formControlName="depAmtAggAmtExcd1CrPrYrFlg" class="input-field" maxlength="14">
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="card__row">
                            <div class="card__col-xs-12 card__col-sm-8">
                                Your foreign travel expenses is more than Rs. 2 Lakhs (If yes, then enter amount of
                                expenditure)
                            </div>
                            <div class="card__col-xs-12 card__col-sm-4">
                                <mat-form-field appearance="outline">
                                    <mat-label>Amount</mat-label>
                                    <input matInput placeholder="Amount" name="incrExpAggAmt2LkTrvFrgnCntryFlg"
                                        type="number" formControlName="incrExpAggAmt2LkTrvFrgnCntryFlg"
                                        class="input-field" maxlength="14">
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="card__row">
                            <div class="card__col-xs-12 card__col-sm-8">
                                Have your electricity bill exceeded 1 Lakh? (If yes, then enter amount)
                            </div>
                            <div class="card__col-xs-12 card__col-sm-4">
                                <mat-form-field appearance="outline">
                                    <mat-label>Amount</mat-label>
                                    <input matInput placeholder="Amount" name="incrExpAggAmt1LkElctrctyPrYrFlg"
                                        type="number" formControlName="incrExpAggAmt1LkElctrctyPrYrFlg"
                                        class="input-field" maxlength="14">
                                </mat-form-field>
                            </div>

                        </div>

                    </div>
                    <div class="footer__buttons clearfix" style="margin-top: 40px;">
                        <button class="btn long-btn" style="border: none;" (click)="previousRoute()">Back</button>
                        <button class="btn long-btn" style="border: none;" (click)="saveProfile('SAVE')">Save
                            Profile</button>
                        <button class="btn long-btn" style="border: none;" (click)="saveProfile('CONTINUE')">Continue
                            Filing</button>
                        <button class="btn long-btn" style="border: none;" (click)="saveProfile('DIRECT')">Direct
                            Upload</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>