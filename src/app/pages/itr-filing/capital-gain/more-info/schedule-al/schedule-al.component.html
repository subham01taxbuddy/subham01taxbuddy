<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px',fullScreenBackdrop:true }"></ngx-loading>
<br><br>
<form [formGroup]="immovableAssetsForm">
  <div>
    <div class="card__col-xs-12 card__col-sm-10">
      <b>A. Add details of Immovable Assets</b> 
    </div>
    <div class="card__col-xs-12 card__col-sm-2" style="text-align: right;">
      <button class="tbd-btn-small" style="text-align: right;" (click)="addImmovableAsset()">Add More&nbsp;&nbsp;
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
    </div>
  </div><br>
  <div class="table-responsive" style="margin-top: 40px; margin-left: 10px;">
    <table class="table table-bordered" style="border: 1px solid #bdc3c7; width: 100%;">
      <thead class="table-header">
        <tr class="table-head">
          <th class="text-center">Country / Region</th>
          <th class="text-center">Flat / Door / Block No.</th>
          <th class="text-center">Name of Premises / Building / Village</th>
          <th class="text-center">Road / Street / Post Office</th>
          <th class="text-center">Area / Locality</th>
          <th class="text-center"> Town / City / District</th>
          <th class="text-center"> State</th>
          <th class="text-center"> PIN Code</th>
          <th class="text-center"> Amount(cost)</th>
          <th class="text-center"> Description</th>
          <th class="action-th"> Actions </th>
        </tr>
      </thead>
      <tbody formArrayName="immovableAssetsArray">
        <tr *ngFor="let assets of getImmovableAssetsArrayForImmovable.controls;let i=index" [formGroupName]="i">
          
          <td class="kids-name-td table-first-td">
            <mat-form-field class="input-field-width">
              <input matInput class="input-field" name="assets[i]" formControlName="country"
                maxlength="14" [disabled]>
            </mat-form-field>
          </td>
          <td class="kids-name-td table-first-td">
            <mat-form-field class="input-field-width">
              <input matInput class="input-field" name="assets[i]" formControlName="flatNo"
                maxlength="14" [disabled]>
            </mat-form-field>
          </td>
          <td class="kids-name-td table-first-td">
            <mat-form-field class="input-field-width">
              <input matInput class="input-field" name="assets[i]" formControlName="premisesName"
                maxlength="14" [disabled]>
            </mat-form-field>
          </td>
          <td class="kids-name-td table-first-td">
            <mat-form-field class="input-field-width">
              <input matInput class="input-field" name="assets[i]" formControlName="road"
                maxlength="14" [disabled]>
            </mat-form-field>
          </td>
          <td class="kids-name-td table-first-td">
            <mat-form-field class="input-field-width">
              <input matInput class="input-field" name="assets[i]" formControlName="area"
                maxlength="14" [disabled]>
            </mat-form-field>
          </td>
          <td class="kids-name-td table-first-td">
            <mat-form-field class="input-field-width">
              <input matInput class="input-field" name="assets[i]" formControlName="city"
                maxlength="14" [disabled]>
            </mat-form-field>
          </td>
          <td class="kids-name-td table-first-td">
            <mat-form-field class="input-field-width">
              <input matInput class="input-field" name="assets[i]" formControlName="state"
                maxlength="14" [disabled]>
            </mat-form-field>
          </td>
          <td class="kids-name-td table-first-td">
            <mat-form-field class="input-field-width">
              <input matInput class="input-field" name="assets[i]" formControlName="pinCode"
                maxlength="14" [disabled]>
            </mat-form-field>
          </td>
          <td class="kids-age-td">
            <mat-form-field class="input-field-width">
              <input matInput currencyMask type="number" [pattern]="amountRegex" formControlName="amount"
                name="assets[i]" class="input-field" maxlength="14" 
                oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                required>
              <mat-error
                *ngIf="immovableAssetsForm.controls['amount'].hasError('pattern')">
                Enter
                valid amount.</mat-error>
            </mat-form-field>
          </td>
          <td class="kids-name-td table-first-td">
            <mat-form-field class="input-field-width">
              <input matInput class="input-field" name="assets[i]" formControlName="description"
                maxlength="14" [disabled]>
            </mat-form-field>
          </td>

          <td class="action-th " style="white-space: nowrap;padding: 0%;border:none;justify-content: center;">
            <button mat-icon-button color="warn" class="table-add-remove-button text-left"
              (click)="removeImprovement(i,this.immovableForm)">
              <i class="fa fa-trash" aria-hidden="true"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <br>
  
  <br>

  <div class="card__row">
    <div class="card__col-lg-10 card__col-md-10 card__col-sm-10 card__col-xm-10">
      <b>B. Add details of Movable Assets</b>
    </div>
  </div>

  <br><br>

  <div class="table-responsive">
    <form [formGroup]="movableAssetsForm">
    <table class="table table-bordered" style="border: 1px solid #bdc3c7; width: 100%;">
      <thead class="table-header">
        <tr class="table-head">
          <th class="text-center" style="border-left: 1px solid #bdc3c7;" colspan="1" rowspan="2">Jewellery, bullion, etc.</th>
          <th class="text-center" colspan="1" rowspan="2">Archaeological collections, drawings, paintings, sculpture, any work of art</th>
          <th class="text-center" colspan="1" rowspan="2">Vehicles, yachts, boats and aircrafts</th>
          <th class="text-center" colspan="5" rowspan="1">Financial Assets</th>
          <th class="text-center" colspan="1" rowspan="2">C. Liabilities in relation to Assets at (A + B)</th>
          <th class="action-th" colspan="1" rowspan="2"> Actions </th>
            <!-- <button mat-icon-button color="warn" class="table-add-remove-button text-left"
              (click)="addMoreImprovements(this.immovableForm)">
              <i class="fal fa-plus-square" aria-hidden="true"></i> Add
            </button> -->
        </tr>
        <tr class="table-head" style="border: 1px solid #bdc3c7;">
          <th>a. Bank (including all deposits)</th>
          <th>b. Shares and securities</th>
          <th>c. Insurance polices</th>
          <th>d. Loans and advances given</th>
          <th>e. Cash in hand</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="kids-name-td table-first-td">
            <mat-form-field class="input-field-width">
              <input matInput class="input-field" name="jwelleryAmount" formControlName="jwelleryAmount"
                maxlength="14" type="number">
            </mat-form-field>
          </td>
          <td class="kids-age-td">
            <mat-form-field class="input-field-width">
              <input matInput class="input-field" name="artWorkAmount" formControlName="artWorkAmount"
                maxlength="14" type="number">
            </mat-form-field>
          </td>
          <td class="kids-name-td table-first-td">
            <mat-form-field class="input-field-width">
              <input matInput class="input-field" name="vehicleAmount" formControlName="vehicleAmount"
                maxlength="14" type="number">
            </mat-form-field>
          </td>
          <td class="kids-name-td table-first-td">
            <mat-form-field class="input-field-width">
              <input matInput class="input-field" name="bankAmount" formControlName="bankAmount"
                maxlength="14" type="number">
            </mat-form-field>
          </td>
          <td class="kids-name-td table-first-td">
            <mat-form-field class="input-field-width">
              <input matInput class="input-field" name="shareAmount" formControlName="shareAmount"
                maxlength="14" type="number">
            </mat-form-field>
          </td>
          <td class="kids-name-td table-first-td">
            <mat-form-field class="input-field-width">
              <input matInput class="input-field" name="insuranceAmount" formControlName="insuranceAmount"
                maxlength="14" type="number">
            </mat-form-field>
          </td>
          <td class="kids-name-td table-first-td">
            <mat-form-field class="input-field-width">
              <input matInput class="input-field" name="loanAmount" formControlName="loanAmount"
                maxlength="14" type="number">
            </mat-form-field>
          </td>
          <td class="kids-name-td table-first-td">
            <mat-form-field class="input-field-width">
              <input matInput class="input-field" name="cashInHand" formControlName="cashInHand"
                maxlength="14" type="number">
            </mat-form-field>
          </td>
          <td class="kids-name-td table-first-td">
            <mat-form-field class="input-field-width">
              <input matInput class="input-field" name="assetLiability" formControlName="assetLiability"
                maxlength="14" type="number">
            </mat-form-field>
          </td>
          <td class="action-th " style="white-space: nowrap;padding: 0%;border:none;justify-content: center;">
            <button mat-icon-button color="warn" class="table-add-remove-button text-left"
              (click)="removeMovableAssets()">
              <i class="fa fa-trash" aria-hidden="true"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    </form>
  </div>
  
  <br>
  <br>
  
  <mat-dialog-actions align="center">
    <div style="text-align: right;">
      <button class="tbd-btn" (click)="saveAssets()" [disabled]="saveBusy">{{saveBusy ?
        'Saving...': 'Save'}}</button>
      <button type="submit" class="tbd-btn-secondary" (click)="cancelCgForm()">Cancel</button>
    </div>
  </mat-dialog-actions>
</form>