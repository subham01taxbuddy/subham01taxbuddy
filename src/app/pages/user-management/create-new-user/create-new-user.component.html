<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px', fullScreenBackdrop: true }"></ngx-loading>

<div class="main clearfix" style="padding-top: 0px">
  <div class="align-items-center row">
    <div class="col-sm-10">
      <b style="font-size: 20px">Create User</b>
    </div>
    <div class="col-sm-2" *ngIf="roles?.includes('ROLE_OWNER')">
      <p>
        <mat-slide-toggle [formControl]="coOwnerToggle" (change)="getToggleValue()"> Co-Owner </mat-slide-toggle>
      </p>
    </div>
  </div>
  <div class="card">
    <form [formGroup]="signUpForm">
      <div class="card__row">
        <div class="card__col-lg-3">
          <mat-form-field appearance="outline">
            <mat-label>PAN Number</mat-label>
            <input placeholder="PAN" formControlName="panNumber" autocomplete="off"
              (blur)="getUserInfoByPan(signUpForm.controls['panNumber'])" type="text" maxlength="10" minlength="10"
              upperCase matInput>
          </mat-form-field>
        </div>

        <div class="card__col-lg-3">
          <mat-form-field appearance="outline">
            <mat-label>First name</mat-label>
            <input placeholder="First Name" type="text" formControlName="firstName" capitalizeFirst matInput required>
          </mat-form-field>
        </div>
        <div class="card__col-lg-3">
          <mat-form-field appearance="outline">
            <mat-label>Middle Name</mat-label>
            <input placeholder="Middle Name" type="text" formControlName="middleName" capitalizeFirst matInput>
          </mat-form-field>
        </div>
        <div class="card__col-lg-3">
          <mat-form-field appearance="outline">
            <mat-label>Last Name</mat-label>
            <input placeholder="Last Name" type="text" formControlName="lastName" capitalizeFirst matInput required>
          </mat-form-field>
        </div>
        <div class="card__col-lg-3">
          <mat-form-field appearance="outline">
            <mat-label>Select country</mat-label>
            <input type="text" placeholder="Select country" matInput formControlName="countryCode"
              [matAutocomplete]="auto" required>
              <mat-autocomplete  #auto="matAutocomplete">
                <mat-option *ngFor="let option of filteredOptions | async" [value]="option.name" (click)="getCountry(option)">
                {{ option.name| titlecase }}
                </mat-option>
              </mat-autocomplete>
          </mat-form-field>

          <!-- <mat-form-field appearance="outline">
            <mat-label>Select country code</mat-label>
            <mat-select placeholder="Select country" formControlName="countryCode" required>
              <mat-option *ngFor="let country of countryDropdown" [value]="country.countryCode">
                {{ country.countryCode}} ({{ country.countryName | titlecase}})
              </mat-option>
            </mat-select>
          </mat-form-field> -->
        </div>
        <div class="card__col-lg-3">
          <mat-form-field appearance="outline">
            <mat-label>Mobile Number</mat-label>
            <input matInput  [numbersOnly]="true" placeholder="Enter mobile number" formControlName="mobile" name="mobile"
              pattern="[0-9]{10,20}"  required maxlength="20" />
            <mat-error class="error-msg" *ngIf="signUpForm.controls['mobile'].hasError('required')">Mobile number
              is required</mat-error>
            <mat-error class="error-msg" *ngIf="signUpForm.controls['mobile'].hasError('pattern')">Please enter a
              valid mobile no.</mat-error>
          </mat-form-field>
        </div>
        <div class="card__col-lg-3">
          <mat-form-field appearance="outline">
            <mat-label>Email Address</mat-label>
            <input matInput type="email" placeholder="Enter email address" formControlName="email" name="mobile"
              pattern="^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$" maxLength="50" required />
            <mat-error class="error-msg" *ngIf="signUpForm.controls['email'].hasError('required')">Email address is
              required</mat-error>
            <mat-error class="error-msg" *ngIf="signUpForm.controls['email'].hasError('pattern')">Please enter a valid
              email address.</mat-error>
          </mat-form-field>
        </div>
        <div class="card__col-lg-3">
          <mat-form-field appearance="outline">
            <mat-label>Select Service Type</mat-label>
            <mat-select placeholder="Select Service Type" formControlName="serviceType" required
              (selectionChange)="changeServiceType()">
              <mat-option *ngFor="let service of services" [value]="service">
                {{service}}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="signUpForm.controls['serviceType'].hasError('required')">Select
              Service type </mat-error>
          </mat-form-field>
        </div>
       <div class="card__col-lg-8">
         <app-sme-list-drop-down (sendOwner)="fromSme($event, true)" (sendFiler)="fromSme($event, false)" listType="ALL"
            [disabled]="assignedToMe">
         </app-sme-list-drop-down>
       </div>
       <div class="card__col-lg-8" *ngIf="coOwnerCheck">
        <app-co-owner-list-drop-down (sendCoOwner)="fromSme1($event, true)"
          (sendCoFiler)="fromSme1($event, false)"></app-co-owner-list-drop-down>
        </div>
        <div class="card__col-lg-3" *ngIf="roles?.includes('ROLE_OWNER') || roles?.includes('ROLE_FILER')" >
          <mat-checkbox style="padding-top: 14px;" class="example-margin" [(ngModel)]="assignedToMe"
            [ngModelOptions]="{standalone: true}" [disabled]="disableAssignedToMe" (change)="isAssignedToMe()">Assigned
            to me!</mat-checkbox>
        </div>


        <div class=" card__col-xs-12">
          <button class="tbd-btn" (click)="userSignUp()"> User Sign-up </button>
        </div>
      </div>
    </form>
  </div>
</div>
