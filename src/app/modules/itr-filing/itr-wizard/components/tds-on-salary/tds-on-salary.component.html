<ngx-loading
  [show]="loading"
  [config]="{ backdropBorderRadius: '14px', fullScreenBackdrop: true }"
></ngx-loading>
<div class="container">
  <div class="row">
    <div class="col-lg-10 tds-title">TDS On Salary</div>
    <!-- <div class="edit clearfix notes col-lg-2">
      <button
        type="button"
        class="edit_btn"
        [disabled]="salaryForm.invalid"
        (click)="addMore()"
      >
        <i class="fa fa-plus"></i>Add
      </button>
    </div> -->
    <hr />
    <div class="head-title mb-3">
      This is TDS on salary deducted by your employer. Enter the amount form 16
      or 26AS
    </div>
  </div>
  <form [formGroup]="salaryForm">
    <div formArrayName="salaryArray">
      <div
        class="tds-on boxClr"
        *ngFor="
          let salary of getSalaryArray.controls | paginate : config;
          let i = index
        "
        [formGroupName]="fieldGlobalIndex(i)"
      >
        <!-- <mat-checkbox
          color="primary"
          name="hasEdit[i]"
          formControlName="hasEdit"
          class="chkSp"
        >
        </mat-checkbox> -->
        <div class="row">
          <div class="col-sm-3">
            <mat-label>TAN of Employer*</mat-label>
            <mat-form-field appearance="outline">
              <input
                matTooltip="Format should like this(e.g. XXXXXNNNNX) X indicate character and N indicates number"
                matTooltipClass="tab-tooltip"
                matTooltipPosition="above"
                formControlName="deductorTAN"
                matInput
                currencyMask
                placeholder="XXXXXNNNNX"
                name="deductorTAN[i]"
                class="input-field"
                maxlength="10"
                minlength="10"
                required
                type="text"
                trim
                upperCase
              />

              <mat-error *ngIf="salary.get('deductorTAN').hasError('pattern')">
                Enter valid TAN (e.g XXXXX1234X)</mat-error
              >
            </mat-form-field>
          </div>
          <div class="col-sm-3">
            <mat-label>Name of Employer*</mat-label>
            <mat-form-field appearance="outline">
              <input
                formControlName="deductorName"
                matInput
                placeholder="Name of donee"
                name="deductorName[i]"
                class="input-field"
                maxlength="125"
                required
                type="text"
                trim
              />
              <mat-error *ngIf="salary.get('deductorName').hasError('pattern')">
                Name should be character only</mat-error
              >
            </mat-form-field>
          </div>

          <div class="col-sm-3">
            <mat-label>Total Amount credited*</mat-label>
            <mat-form-field appearance="outline">
              <input
                formControlName="totalAmountCredited"
                matInput
                placeholder="Amt other than cash"
                name="totalAmountCredited[i]"
                required
                class="input-field"
                maxlength="14"
                digitsOnly
              />
              <mat-error
                *ngIf="salary.get('totalAmountCredited').hasError('pattern')"
              >
                Enter positive amount without decimal.</mat-error
              >
            </mat-form-field>
          </div>

          <div class="col-sm-3">
            <mat-label>Total Tax Deducted*</mat-label>
            <mat-form-field appearance="outline">
              <input
                formControlName="totalTdsDeposited"
                matInput
                placeholder="Amt other than cash"
                name="totalTdsDeposited[i]"
                required
                class="input-field"
                maxlength="14"
                digitsOnly
              />
              <mat-error
                *ngIf="salary.get('totalTdsDeposited').hasError('pattern')"
              >
                Enter positive amount without decimal.</mat-error
              >
            </mat-form-field>
          </div>
        </div>
        <!-- 
        <div class="edit-head">
          <button
            type="button"
            class="edit-donation spEd"
            (click)="editDonationForm(i)"
          >
            <mat-icon> edit_square </mat-icon>Edit
          </button>
        </div> -->
      </div>
      <hr />
      <div class="col-sm-3">
        <button class="tbd-btn save-btn mvRth" (click)="save()">Save</button>
      </div>
      <!-- <hr /> 
        
      <div class="container">
        <div class="row">
          <div class="col-sm-3">
            <button
              type="submit"
              class="tbd-btn-secondary delBtn"
              (click)="deleteSalaryArray()"
            >
              <i class="fa fa-trash" aria-hidden="true">&nbsp;</i>Delete
            </button>
          </div>
          <div class="col-sm-6">
            <table class="numSp">
              <tr
                *ngFor="let item of getSalaryArray.controls | paginate : config"
              ></tr>
            </table>
            <pagination-controls
              id="salaryPagination"
              (pageChange)="pageChanged($event)"
              class="pgNmbr"
            ></pagination-controls>
          </div>
          
        </div>
      </div> -->
    </div>
  </form>
</div>
