<form [formGroup]="cflForm">
    <div class="frameC">
        <h1 class="heading__title">Losses To Be Carried Forward (Schedule CFL)
        </h1>
        <div class="space">
            <div class="wrapper">
                <div class="div-4">
                    <div class="frame-wrapper-2A">
                        <div class="accordion" id="myAccordion">

                            <div class="table-responsive">
                                <table class="table table-bordered mb-20">
                                    <thead>
                                    <tr class="table-head">
                                        <th class="text-center" rowspan="2">ACTION</th>
                                        <th class="text-center" rowspan="2">ASSESSMENT YEAR</th>
                                        <th class="text-center" rowspan="2">DATE OF FILING</th>
                                        <th class="text-center" rowspan="2">HOUSE PROPERTY LOSS</th>
                                        <th class="text-center" colspan="2">Business & Speculative income</th>
                                        <th class="text-center" colspan="2"> Capital Gain Loss</th>
                                    </tr>
                                    <tr class="table-head">
                                        <th class="text-center">BROUGHT FORWARD
                                            BUSINESS LOSS
                                        </th>
                                        <th class="text-center">LOSS FROM
                                            SPECULATIVE BUSINESS
                                        </th>
                                        <th class="text-center">SHORT TERM
                                            CAPITAL LOSS
                                        </th>
                                        <th class="text-center">LONG TERM
                                            CAPITAL LOSS
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody formArrayName="cflArray">
                                    <tr *ngFor="let cfl of getCflArray.controls;let i=index" [formGroupName]="i">
                                        <td>
                                            <mat-checkbox color="primary" name="hasEdit[i]" formControlName="hasEdit"
                                                          class="">
                                            </mat-checkbox>
                                        </td>
                                        <td>
                                            {{cfl.get('assessmentPastYear').value}}
                                        </td>
                                        <td>
                                            <mat-form-field appearance="outline">
                                                <input matInput placeholder="DD/MM/YYYY" readonly
                                                       name="dateofFilling[i]" [max]="today"
                                                       [matDatepicker]="dateofFilling" autocomplete="off"
                                                       formControlName="dateofFilling">
                                                <mat-datepicker-toggle matSuffix
                                                                       [for]="dateofFilling"></mat-datepicker-toggle>
                                                <mat-datepicker #dateofFilling></mat-datepicker>
                                            </mat-form-field>
                                        </td>
                                        <td>
                                            <mat-form-field appearance="outline">
                                                <input matInput class="input-field" name="housePropertyLoss[i]"
                                                       maxlength="14"
                                                       (change)="calculateTotalLosses()"
                                                       formControlName="housePropertyLoss">
                                            </mat-form-field>
                                        </td>
                                        <td>
                                            <mat-form-field appearance="outline">
                                                <input matInput class="input-field" name="broughtForwordBusinessLoss[i]"
                                                       maxlength="14"
                                                       formControlName="broughtForwordBusinessLoss"
                                                       (change)="calculateTotalLosses()">
                                            </mat-form-field>
                                        </td>
                                        <td>
                                            <mat-form-field [appearance]="getApperance(i, 'speculativeBusinessLoss')">
                                                <input matInput class="input-field" name="speculativeBusinessLoss[i]"
                                                       maxlength="14"
                                                       formControlName="speculativeBusinessLoss"
                                                       (change)="calculateTotalLosses()">
                                            </mat-form-field>
                                        </td>
                                        <td>
                                            <mat-form-field appearance="outline">
                                                <input matInput class="input-field" name="STCGLoss[i]" maxlength="14"
                                                       formControlName="STCGLoss"
                                                       (change)="calculateTotalLosses()">
                                            </mat-form-field>
                                        </td>
                                        <td>
                                            <mat-form-field appearance="outline">
                                                <input matInput class="input-field" name="LTCGLoss[i]" maxlength="14"
                                                       formControlName="LTCGLoss"
                                                       (change)="calculateTotalLosses()">
                                            </mat-form-field>
                                        </td>
                                    </tr>
                                    </tbody>
                                    <hr>
                                    <tbody>
                                    <tr>
                                        <td></td>
                                        <td class="total-losses">
                                            Total of earlier year losses
                                        </td>
                                        <td></td>
                                        <td>
                                            <mat-form-field appearance="outline">
                                                <input matInput class="input-field" readonly name="totalHPLoss"
                                                       formControlName="totalHPLoss"
                                                       maxlength="14">
                                            </mat-form-field>
                                        </td>
                                        <td>
                                            <mat-form-field appearance="outline">
                                                <input matInput class="input-field" name="totalBFBusinessLoss"
                                                       formControlName="totalBFBusinessLoss" readonly maxlength="14">
                                            </mat-form-field>
                                        </td>
                                        <td>
                                            <mat-form-field appearance="outline">
                                                <input matInput class="input-field" readonly name="totalSIBusinessLoss"
                                                       formControlName="totalSIBusinessLoss" maxlength="14">
                                            </mat-form-field>
                                        </td>
                                        <td>
                                            <mat-form-field appearance="outline">
                                                <input matInput class="input-field" readonly name="totalSTCGLoss"
                                                       formControlName="totalSTCGLoss" maxlength="14">
                                            </mat-form-field>
                                        </td>
                                        <td>
                                            <mat-form-field appearance="outline">
                                                <input matInput class="input-field" readonly name="totalLTCGLoss"
                                                       formControlName="totalLTCGLoss" maxlength="14">
                                            </mat-form-field>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>

                            </div>

                        </div>
                        <div class="col-sm-12 spsTp bdrTp">
                            <div class="row">
                                <div class="col-sm-6">
                                    <button type="submit" class="clr-btn" (click)="deleteCflArray()"><i
                                            class="fa fa-close"
                                            aria-hidden="true">&nbsp;</i>Clear
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="out-box">
                    <div class="box-left">
                        <div class="btn__white" (click)="goBack()">Back</div>
                    </div>
                    <div class="box-right">
                        <div class="btn__primary" (click)="save()">Save & View Summary</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
