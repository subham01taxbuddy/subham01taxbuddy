<div style="overflow: hidden">
  <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px', fullScreenBackdrop: true }"></ngx-loading>
  <div class="">
    <main>
      <div class="frameC p-10">
        <div class="space">
          <div class="div-2 p-0">
            <div class="div-4 p-15">
              <div class="frame-wrapper-2A">

                <div class="accordion" id="myAccordion">

                  <div class="accordion-item">
                    <!-- start grid table -->
                    <h2 class="accordion-header" id="heading3">
                      <button class="accordion-button" data-bs-target="#collapse2" data-bs-toggle="collapse"
                        type="button">
                        Professional Income</button>
                    </h2>
                    <div class="accordion-collapse collapse show" id="collapse2">
                      <div class="accordion__item-body">
                        <div class="table-responsive" style="overflow-x: scroll;">
                          <div>
                            <div class="col-sm-12">
                              <ag-grid-angular (rowClicked)="editForm($event)" [gridOptions]="gridOptions"
                                class="newAG ag-theme-balham topSps">
                              </ag-grid-angular>
                            </div>
                            <div class="row col-sm-12">
                              <div class="col-sm-6">
                                <button (click)="deleteArray()" [disabled]="!profSelected()" class=" delete-btn"
                                  type="submit">
                                  <i aria-hidden="true" class="fa fa-trash">&nbsp;</i>Delete
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- //end table -->
                    <div class="accordion-item mt-3">
                      <h2 class="accordion-header" id="headingTwo">
                        <button type="button" class="accordion-button" data-bs-toggle="collapse"
                          data-bs-target="#collapseTwo">Add / Edit Professional Income</button>
                      </h2>
                      <div id="collapseTwo" class="accordion-collapse collapse show" data-bs-parent="#myAccordion">
                        <div class="card-body p-15">
                          <form [formGroup]="selectedFormGroup">
                            <!-- <div class="pre-box1">

                            <div class="hdByr-L">
                              Professional Income 44ADA
                            </div>

                            <div class="hdByr-R">

                              <div class="Bx4">
                                <div class="Bx4L">
                                  <button type="button" (click)="deleteArray()" [disabled]="!profSelected()">
                                    <i class="fa fa-trash-o delbt" aria-hidden="true"></i>
                                  </button>
                                </div>
                                <div class="Bx4R">
                                  <button type="button" class="addAno" (click)="addProfIncomeForm()"> + Add Another
                                  </button>
                                </div>
                              </div>

                            </div>
                          </div> -->
                            <div class="land-box-buyr">
                              <!-- <div class="PreBoxOut" *ngFor="let income of profIncomeFormArray.controls | paginate : config;
                                  let i = index" [formGroupName]="fieldGlobalIndex(i)"> -->
                              <div class="PreBxUp mb-2">
                                <!-- <div class="col-sm-1" style="padding: 0px">
                                    <mat-checkbox name="hasEdit[i]" formControlName="hasEdit" class="tpBtn1">
                                    </mat-checkbox>
                                  </div> -->
                                <div class="field">
                                  <app-business-input-autocomplete [businessType]="'44ADA'"
                                    [selectedInput]="selectedFormGroup.controls['natureOfBusiness'].value"
                                    (businessSelected)="businessClicked($event)">
                                  </app-business-input-autocomplete>
                                  <mat-error *ngIf="(selectedFormGroup.controls['natureOfBusiness'].touched || submitted) && 
                                    selectedFormGroup.controls['natureOfBusiness'].hasError('required')">Please
                                    select</mat-error>
                                </div>
                                <div class="field">
                                  <div class="field-label">
                                    <span class="span">Trade Name</span> <span class="redAst">*</span>
                                  </div>
                                  <mat-form-field appearance="outline">
                                    <input formControlName="tradeName" matInput name="tradeName" class="input-field"
                                      required />
                                  </mat-form-field>
                                  <mat-error *ngIf="(selectedFormGroup.controls['tradeName'].touched ||submitted) &&
                                  selectedFormGroup.controls['tradeName'].hasError('required')">Please
                                    enter the amount</mat-error>
                                </div>

                                <div class="field">
                                  <div class="field-label">
                                    <span class="span">Business description</span>
                                  </div>
                                  <mat-form-field appearance="outline">
                                    <input matInput class="input-field" formControlName="description"
                                      name="description" />
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="PreBxDwn">
                                <div class="pre-box">
                                  <div class="lndBldg-L">Gross Receipts </div>
                                  <div class="lndBldg-R">
                                    <mat-form-field appearance="outline">
                                      <input formControlName="receipts" maxlength="7" placeholder="â‚¹ Enter Amount"
                                        matInput name="receipts" class="input-field" required digitsOnly
                                        (change)="calculatePresumptive()" />
                                    </mat-form-field>
                                    <mat-error *ngIf="(selectedFormGroup.controls['receipts'].touched ||submitted) &&
                                            selectedFormGroup.controls['receipts'].hasError('required')">Please enter
                                      the amount
                                    </mat-error>
                                    <mat-error *ngIf="(selectedFormGroup.controls['receipts'].touched ||submitted) &&
                                          selectedFormGroup.controls['receipts'].hasError('max')">Gross receipts amount
                                      cannot be more than 50,00,000
                                    </mat-error>
                                  </div>
                                </div>
                                <div class="pre-box">
                                  <div class="lndBldg-L">Minimum Income: 50%</div>
                                  <div class="lndBldg-R">
                                    <mat-form-field appearance="outline">
                                      <input formControlName="minimumPresumptiveIncome" matInput
                                        name="minimumPresumptiveIncome" class="input-field" required digitsOnly
                                        readonly />
                                      <div class="percentage-head" style="width: 50px;">
                                        <span class="percentage">
                                          50% </span>
                                        <div class="bar"
                                          [ngStyle]="{'width': minGrossIncome+'px','background-color': '#2D8EF9'}">
                                        </div>
                                      </div>
                                    </mat-form-field>
                                    <mat-error
                                      *ngIf="
                                          (selectedFormGroup.controls['minimumPresumptiveIncome'].touched || submitted) &&
                                          selectedFormGroup.controls['minimumPresumptiveIncome'].hasError('required')">Please
                                      enter the amount</mat-error>
                                  </div>
                                </div>
                                <div class="pre-box">
                                  <div class="lndBldg-L">Presumptive income <span>
                                      <!-- <ng-container *ngFor="let percentage of percentage; let id = index">
                                        <ng-container *ngIf="id === i">
                                          ({{ percentage?.natOfBusiness === profIncomeFormArray?.controls[i]?.get(
                                          "natureOfBusiness" )?.value ? percentage?.percentage ? percentage?.percentage
                                          : 0 : 0 }}%)
                                        </ng-container>
                                      </ng-container> -->
                                    </span><span class="redAst">*</span>
                                  </div>
                                  <div class="lndBldg-R">
                                    <mat-form-field appearance="outline">
                                      <input formControlName="presumptiveIncome" placeholder="â‚¹ Enter Amount" matInput
                                        name="presumptiveIncome" class="input-field"
                                        maxlength="{{selectedFormGroup.controls['receipts'].value?.length}}" required
                                        digitsOnly (change)="calculatePresumptive()" />
                                      <div class="percentage-head" style="width: 50px;">
                                        <span class="percentage">
                                          {{ percentage}}% </span>
                                        <div class="bar"
                                          [ngStyle]="{'width':  (50/100)* (percentage)  +'px','background-color': '#2D8EF9','z-index':'1' }">
                                        </div>
                                      </div>
                                    </mat-form-field>
                                    <mat-error
                                      *ngIf="(selectedFormGroup.controls['presumptiveIncome'].touched ||submitted) && selectedFormGroup.controls['presumptiveIncome'].hasError('min')">Amount
                                      should be greater than
                                      {{selectedFormGroup.controls['minimumPresumptiveIncome'].value }}
                                    </mat-error>
                                    <mat-error *ngIf="(selectedFormGroup.controls['presumptiveIncome'].touched ||submitted) &&
                                    selectedFormGroup.controls['presumptiveIncome'].hasError('max')">Amount
                                      cannot be greater than {{ amountFiftyMax }}
                                    </mat-error>
                                  </div>
                                </div>
                              </div>
                              <!-- </div> -->
                            </div>
                          </form>
                          <div class="out-box p-15">
                            <div class="box-left">
                              <button (click)="clearForm()" class="lgtBtn">Cancel</button>
                            </div>
                            <div class="box-right">
                              <button (click)="saveManualEntry()" class="saveBtnIn">Save
                                Details
                              </button>
                            </div>
                          </div>

                          <!-- <div class="row spsTp bdrTp" style="margin: 0px 20px">
                            <div class="col-sm-6 txt-center">
                              <table>
                                <tr *ngFor="let item of getProfIncomeArray.controls | paginate : config"></tr>
                              </table>
                              <pagination-controls id="professionConfig"
                                (pageChange)="pageChanged($event)"></pagination-controls>
                            </div>
                          </div> -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>