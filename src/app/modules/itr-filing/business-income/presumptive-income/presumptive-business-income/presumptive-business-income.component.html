<div style="overflow: hidden">
  <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px', fullScreenBackdrop: true }"></ngx-loading>
  <div>
    <main id="business_id">
      <div class="frameC p-0">
        <!-- <div class="div">
          <div class="text-wrapper">Business Income 44AD</div>
          <div class="mingcute-down-fill"></div>
        </div> -->
        <div class="space ">
          <div class="div-2 p-0">
            <div class="div-4 p-10">
              <div class="frame-wrapper-2A">
                <div class="accordion" id="myAccordion">
                  <div class="accordion-item">
                    <div class="accordion-item mt-3">
                      <h2 class="accordion-header accoHdclr" id="headingOne">
                        <button type="button" class="accordion-button" data-bs-toggle="collapse"
                                data-bs-target="#collapseOne">Add / Edit Business Income</button>
                      </h2>
                      <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#myAccordion">
                        <div class="card-body p-15">
                          <form [formGroup]="selectedFormGroup">
                            <div class="land-box-buyr" style="padding: 0 15px 15px;">
                              <div class="PreBxUp mb-2">
                                <div class="field">
                                  <app-business-input-autocomplete [businessType]="'44AD'" [selectedInput]="
                                  selectedFormGroup.controls['natureOfBusiness'].value"
                                                                   (businessSelected)="businessClicked($event)">
                                  </app-business-input-autocomplete>

                                  <mat-error *ngIf="
                                  (selectedFormGroup.controls['natureOfBusiness'].touched || submitted) &&
                                  selectedFormGroup.controls['natureOfBusiness'].hasError('required')">
                                    Please select</mat-error>
                                </div>

                                <div class="field">
                                  <div class="field-label">
                                    <span class="span">Trade Name</span> <span class="text-wrapper-2">*</span>
                                  </div>
                                  <mat-form-field appearance="outline" class="small-inp no-height">
                                    <input formControlName="tradeName" matInput name="tradeName" class="input-field"
                                           required />
                                  </mat-form-field>
                                  <mat-error *ngIf="(selectedFormGroup.controls['tradeName'].touched ||
                                        submitted) && selectedFormGroup.controls['tradeName'].hasError('required')
                                    ">Please enter the trade name</mat-error>
                                </div>

                                <div class="field">
                                  <div class="field-label">
                                    <span class="span">Business description</span>
                                  </div>
                                  <mat-form-field appearance="outline" class="small-inp no-height">
                                    <input matInput class="input-field" formControlName="description"
                                           name="description" />
                                  </mat-form-field>
                                </div>
                              </div>
                              <div class="PreBxDwn">
                                <div class="pre-box" style="background-color: #cedaed;">
                                  <div class="lndBldg-L">Bank Receipts <span class="redAst">*</span></div>
                                  <div class="lndBldg-R">
                                    <mat-form-field appearance="outline" class="small-inp no-height">
                                      <input formControlName="bankReceipts" matInput name="bankReceipts"
                                             class="input-field" maxlength="8" required digitsOnly
                                             placeholder="₹ Enter Amount" (change)="
                                        calculatePresumptiveIncome('bank', true)" />
                                    </mat-form-field>
                                    <mat-error *ngIf="(selectedFormGroup.controls['bankReceipts'].touched || submitted) &&
                                          selectedFormGroup.controls['bankReceipts'].hasError('required')">
                                      Please enter the amount</mat-error>
                                    <mat-error *ngIf="
                                        (selectedFormGroup.controls['bankReceipts'].touched || submitted) &&
                                        selectedFormGroup.controls['bankReceipts'].hasError('max')">
                                      The overall turnover limit u/s 44AD exceeds.</mat-error>
                                  </div>
                                </div>
                                <div class="pre-box">
                                  <div class="lndBldg-L">Minimum Presumptive Income <span class="redAst">*</span>
                                  </div>
                                  <div class="lndBldg-R">
                                    <mat-form-field appearance="outline" class="small-inp no-height">
                                      <input formControlName="bankMinIncome" matInput name="bankMinIncome"
                                             class="input-field" required digitsOnly readonly />
                                      <div class="percentage-head" style="width: 50px;">
                                        <span class="percentage">
                                          6% </span>
                                        <div class="bar"
                                             [ngStyle]="{'width': bankMinIncomePercentage+'px','background-color': '#2D8EF9'}">
                                        </div>
                                      </div>
                                    </mat-form-field>
                                    <mat-error *ngIf="
                                        (selectedFormGroup.controls['bankMinIncome'].touched || submitted) &&
                                        selectedFormGroup.controls['bankMinIncome'].hasError('required')">Please enter
                                      the amount</mat-error>
                                  </div>
                                </div>
                                <div class="pre-box">
                                  <div class="lndBldg-L">Presumptive income <span class="redAst">*</span></div>
                                  <div class="lndBldg-R">
                                    <mat-form-field appearance="outline" class="small-inp no-height">
                                      <input formControlName="bankPreIncome" placeholder="₹ Enter Amount" matInput
                                             name="bankPreIncome" class="input-field"
                                             maxlength="{{selectedFormGroup.controls['bankReceipts'].value?.length}}"
                                             required digitsOnly (change)="
                                        calculatePresumptiveIncome('bank', true)" />
                                      <div class="percentage-head" style="width: 50px;">
                                        <span class="percentage">
                                          {{bankPercentage?bankPercentage:0}}%
                                        </span>
                                        <div class="bar"
                                             [ngStyle]="{'width': bankPerWidth?bankPerWidth+'px' : 0+'px','background-color': '#2D8EF9'}">
                                        </div>
                                      </div>
                                    </mat-form-field>
                                    <mat-error *ngIf="selectedFormGroup.controls['bankPreIncome'].hasError('min')">
                                      Amount should be greater than {{ amountSix }}
                                    </mat-error>
                                    <mat-error *ngIf="selectedFormGroup.controls['bankPreIncome'].hasError('max')">
                                      Amount cannot be greater than {{ maxSixAmt }}
                                    </mat-error>
                                  </div>
                                </div>
                              </div>

                              <div class="PreBxDwn">
                                <div class="pre-box" style="background-color: #cedaed;">
                                  <div class="lndBldg-L">Cash Receipts <span class="redAst">*</span></div>
                                  <div class="lndBldg-R">
                                    <mat-form-field appearance="outline" class="small-inp no-height">
                                      <input formControlName="cashReceipts" placeholder="₹ Enter Amount" matInput
                                             name="cashReceipts" maxlength="8" class="input-field" required digitsOnly
                                             (change)="calculatePresumptiveIncome('cash', true)" />
                                    </mat-form-field>
                                    <mat-error *ngIf="(selectedFormGroup.controls['cashReceipts'].touched || submitted) &&
                                          selectedFormGroup.controls['cashReceipts'].hasError('required')">
                                      Please enter the amount</mat-error>
                                    <mat-error *ngIf="(selectedFormGroup.controls['cashReceipts'].touched || submitted) &&
                                      selectedFormGroup.controls['cashReceipts'].hasError('max')">
                                      The overall turnover limit u/s 44AD exceeds.</mat-error>
                                  </div>
                                </div>
                                <div class="pre-box">
                                  <div class="lndBldg-L">Minimum Presumptive Income <span class="redAst">*</span>
                                  </div>
                                  <div class="lndBldg-R">
                                    <mat-form-field appearance="outline" class="small-inp no-height">
                                      <input formControlName="cashMinIncome" matInput name="cashMinIncome"
                                             class="input-field" required digitsOnly readonly />
                                      <div class="percentage-head" style="width: 50px;">
                                        <span class="percentage">
                                          8% </span>
                                        <div class="bar"
                                             [ngStyle]="{'width': cashMinIncomePercentage+'px','background-color': '#2D8EF9'}">
                                        </div>
                                      </div>
                                    </mat-form-field>
                                    <mat-error *ngIf="
                                        (selectedFormGroup.controls['cashMinIncome'].touched || submitted) &&
                                        selectedFormGroup.controls['cashMinIncome'].hasError('required')">Please
                                      enter the amount</mat-error>
                                  </div>
                                </div>
                                <div class="pre-box">
                                  <div class="lndBldg-L">Presumptive income <span class="redAst">*</span></div>
                                  <div class="lndBldg-R">
                                    <mat-form-field appearance="outline" class="small-inp no-height">
                                      <input formControlName="cashPreIncome" placeholder="₹ Enter Amount" matInput
                                             name="cashPreIncome" class="input-field"
                                             maxlength="{{selectedFormGroup.controls['cashReceipts'].value?.length}}"
                                             required digitsOnly (change)="
                                        calculatePresumptiveIncome('cash', true)
                                        " />
                                      <div class="percentage-head" style="width: 50px;">
                                        <span class="percentage">
                                          {{cashPercentage?cashPercentage:0}}%
                                        </span>
                                        <div class="bar"
                                             [ngStyle]="{'width': cashPerWidth?cashPerWidth+'px' : 0+'px','background-color': '#2D8EF9'}">
                                        </div>
                                      </div>
                                    </mat-form-field>
                                    <mat-error *ngIf="selectedFormGroup.controls['cashPreIncome'].hasError('min')">
                                      Amount should be greater than {{ amountEight }}
                                    </mat-error>
                                    <mat-error *ngIf="selectedFormGroup.controls['cashPreIncome'].hasError('max')">
                                      Amount cannot be greater than {{ maxEightAmt }}
                                    </mat-error>
                                  </div>
                                </div>
                              </div>
                              <div class="PreBxDwn">
                                <div class="pre-box" style="background-color: #cedaed;">
                                  <div class="lndBldg-L">Any Other Mode <span class="redAst">*</span></div>
                                  <div class="lndBldg-R">
                                    <mat-form-field appearance="outline" class="small-inp no-height">
                                      <input formControlName="anyOtherMode" placeholder="₹ Enter Amount" matInput
                                             name="anyOtherMode" maxlength="8" class="input-field" required digitsOnly
                                             (change)="calculatePresumptiveIncome('anyOther', true)" />
                                    </mat-form-field>
                                    <mat-error *ngIf="(selectedFormGroup.controls['anyOtherMode'].touched || submitted) &&
                                          selectedFormGroup.controls['anyOtherMode'].hasError('required')">
                                      Please enter the amount</mat-error>
                                    <mat-error *ngIf="(selectedFormGroup.controls['anyOtherMode'].touched || submitted) &&
                                      selectedFormGroup.controls['anyOtherMode'].hasError('max')">
                                      The overall turnover limit u/s 44AD exceeds.</mat-error>
                                  </div>
                                </div>
                                <div class="pre-box">
                                  <div class="lndBldg-L">Minimum Presumptive Income <span class="redAst">*</span>
                                  </div>
                                  <div class="lndBldg-R">
                                    <mat-form-field appearance="outline" class="small-inp no-height">
                                      <input formControlName="anyOtherMinIncome" matInput name="anyOtherMinIncome"
                                             class="input-field" required digitsOnly readonly />
                                      <div class="percentage-head" style="width: 50px;">
                                        <span class="percentage">
                                          8% </span>
                                        <div class="bar"
                                             [ngStyle]="{'width': cashMinIncomePercentage+'px','background-color': '#2D8EF9'}">
                                        </div>
                                      </div>
                                    </mat-form-field>
                                    <mat-error *ngIf="
                                        (selectedFormGroup.controls['anyOtherMinIncome'].touched || submitted) &&
                                        selectedFormGroup.controls['anyOtherMinIncome'].hasError('required')">Please
                                      enter the amount</mat-error>
                                  </div>
                                </div>
                                <div class="pre-box">
                                  <div class="lndBldg-L">Presumptive income <span class="redAst">*</span></div>
                                  <div class="lndBldg-R">
                                    <mat-form-field appearance="outline" class="small-inp no-height">
                                      <input formControlName="anyOtherPreIncome" placeholder="₹ Enter Amount" matInput
                                             name="anyOtherPreIncome" class="input-field"
                                             maxlength="{{selectedFormGroup.controls['anyOtherMode'].value?.length}}"
                                             required digitsOnly (change)="calculatePresumptiveIncome('anyOther', true)" />
                                      <div class="percentage-head" style="width: 50px;">
                                        <span class="percentage">
                                          {{anyOtherPercentage?anyOtherPercentage:0}}%
                                        </span>
                                        <div class="bar"
                                             [ngStyle]="{'width': anyOtherPerWidth?anyOtherPerWidth+'px' : 0+'px','background-color': '#2D8EF9'}">
                                        </div>
                                      </div>
                                    </mat-form-field>
                                    <mat-error *ngIf="selectedFormGroup.controls['anyOtherPreIncome'].hasError('min')">
                                      Amount should be greater than {{ amountEightAnyOther }}
                                    </mat-error>
                                    <mat-error *ngIf="selectedFormGroup.controls['anyOtherPreIncome'].hasError('max')">
                                      Amount cannot be greater than {{ maxEightAnyOtherAmt }}
                                    </mat-error>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </form>

                          <div class="out-box p-15">
                            <div class="box-left">
                              <button (click)="clearForm()" class="lgtBtn">Cancel</button>
                            </div>
                            <div class="box-right">
                              <button (click)="saveManualEntry()" class="saveBtnIn">Save
                                Details
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <h2 class="accordion-header" id="heading3">
                      <button class="accordion-button" data-bs-target="#collapse1" data-bs-toggle="collapse"
                        type="button">
                        Business Income</button>
                    </h2>
                    <div class="accordion-collapse collapse show" id="collapse1">
                      <div class="accordion__item-body">
                        <div class="table-responsive" style="overflow-x: scroll;">
                          <div>
                            <div class="col-sm-12">
                              <ag-grid-angular (rowClicked)="editForm($event)" [gridOptions]="gridOptions"
                                class="newAG ag-theme-balham topSps">
                              </ag-grid-angular>
                            </div>
                            <div class="row col-sm-12">
                              <div class="col-sm-6">
                                <button (click)="deleteArray()" [disabled]="!busSelected()" class=" delete-btn"
                                  type="submit">
                                  <i aria-hidden="true" class="fa fa-trash">&nbsp;</i>Delete
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
