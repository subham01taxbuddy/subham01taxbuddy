<ngx-loading
  [show]="loading"
  [config]="{ backdropBorderRadius: '14px', fullScreenBackdrop: true }"
></ngx-loading>
<div class="mrgArd btmSpc">
  <mat-accordion class="headers-align">
    <mat-expansion-panel
      [expanded]="step === 0"
      (opened)="setStep(0)"
      (closed)="closed()"
      hideToggle
      class="hide-close"
    >
      <mat-expansion-panel-header class="hp">
        <mat-panel-title>
          <mat-icon> arrow_forward_ios </mat-icon>
          House Property Details
        </mat-panel-title>
        <!--      <div class="card__row col-xs-12 edit clearfix isShow">-->
        <!--        <button class="edit_btn" (click)="$event.stopPropagation(); editForm()">-->
        <!--          <mat-icon> edit_square </mat-icon>Edit-->
        <!--        </button>-->
        <!--      </div>-->
      </mat-expansion-panel-header>

      <form [formGroup]="housePropertyForm">
        <!-- type-of-hp selection  -->
        <div class="row" *ngIf="hpView === 'TABLE'">
          <div>
            <!-- add-more-hp-button  -->
            <div style="text-align: right">
              <button class="btn" (click)="addHousingIncome()">
                Add House Property&nbsp;&nbsp;
                <i class="fa fa-plus" aria-hidden="true"></i>
              </button>
            </div>

            <div
              class=""
              style="padding: 25px"
              *ngFor="let house of ITR_JSON.houseProperties; let i = index"
              hideToggle
            >
              <div
                class="flex justify-between"
                (click)="editHouseProperty(i)"
                style="cursor: pointer"
              >
                <!-- checkbox  -->
                <div class="">
                  <div class="custom-control custom-checkbox">
                    <input
                      class="checkbox checkbox-secondary rounded border-2 w-[18px] h-[18px] mb-[-6px]"
                      type="checkbox"
                      (click)="activeTenant = [i]"
                      (click)="$event.stopPropagation()"
                    />
                  </div>
                  <!-- title  -->
                  <div class="card__title">
                    {{
                      house.propertyType === "SOP"
                        ? "Self occupied"
                        : house.propertyType === "LOP"
                        ? "Let out"
                        : house.propertyType === "DLOP"
                        ? "Vacant"
                        : ""
                    }}
                  </div>
                </div>
                <!-- description  -->
                <div class="card__col-sm-4">
                  {{ house.city }}, {{ house.pinCode }}
                </div>
                <!-- net hp income  -->
                <div>
                  {{ utilsService.currencyFormatter(taxableIncomesHP[i]) }}
                </div>
                <!-- right icon  -->
                <mat-icon>arrow_forward_ios</mat-icon>
              </div>
            </div>
            <div>
              <button
                class="btn"
                style="cursor: pointer"
                (click)="deleteHpDetails(active)"
              >
                Delete
              </button>
            </div>
          </div>
          <br />
          <hr />
          <div>
            <!-- page-navigation-buttons  -->
            <div class="flex justify-between p-[30px] back-foot">
              <button class="lgtBtn" (click)="goBack()">
                <mat-icon class="icoAdj">keyboard_backspace</mat-icon>
                <span class="font-semibold">&nbsp;Back to Source Page</span>
              </button>
            </div>
          </div>

          <!-- <div class="card__col-xs-12" style="padding-top: 10px">
            <div class="report-table-container">
              <div class="report-table-wrapper">
                <table class="report-table">
                  <thead class="report-table__head">
                    <tr class="report-table__row report-table__row_head">
                      <th class="report-table__cell report-table__cell_name">
                        Property type
                      </th>
                      <th class="report-table__cell report-table__cell_name">
                        Address
                      </th>
                      <th class="report-table__cell report-table__cell_name">
                        Income
                      </th>
                      <th
                        class="report-table__cell report-table__cell_name"
                      ></th>
                      <th
                        class="report-table__cell report-table__cell_name"
                      ></th>
                    </tr>
                  </thead>
                  <tbody class="report-table__body">
                    <ng-template
                      ngFor
                      let-house
                      [ngForOf]="ITR_JSON.houseProperties"
                      let-i="index"
                    >
                      <tr class="report-table__row">
                        <td class="report-table__cell report-table__cell_day">
                          {{
                            house.propertyType === "SOP"
                              ? "Self occupied"
                              : house.propertyType === "LOP"
                              ? "Let out"
                              : house.propertyType === "DLOP"
                              ? "Vacant"
                              : ""
                          }}
                        </td>
                        <td class="report-table__cell report-table__cell_day">
                          {{ house.address }},
                          {{ house.city }}
                        </td>
                        <td class="report-table__cell report-table__cell_day">
                          {{
                            utilsService.currencyFormatter(house.taxableIncome)
                          }}
                        </td>

                        <td class="report-table__cell report-table__cell_day">
                          <i
                            class="fa fa-pencil"
                            aria-hidden="true"
                            style="cursor: pointer"
                            (click)="editHouseProperty(i)"
                          ></i>
                        </td>
                        <td class="report-table__cell report-table__cell_day">
                          <i
                            class="fa fa-trash"
                            aria-hidden="true"
                            style="cursor: pointer"
                            (click)="deleteHpDetails(i)"
                          ></i>
                        </td>
                      </tr>
                    </ng-template>
                  </tbody>
                </table>
              </div>
            </div>
          </div> -->
        </div>

        <div class="" *ngIf="hpView === 'FORM'">
          <div class="card__row flex flex-col gap-[10px]">
            <!-- type-of-property-radio-buttons  -->
            <div class="row">
              <div class="col-sm-12">
                <div class="mgnBtm">
                  <!-- type-of-property-selection  -->
                  <mat-radio-group
                    aria-label="Select an option"
                    placeholder="Select Property Type"
                    name="propertyType"
                    formControlName="propertyType"
                    (change)="
                      changePropType(
                        housePropertyForm.controls['propertyType'].value
                      )
                    "
                    required
                  >
                    <mat-radio-button
                      class="fntWgt"
                      *ngFor="let propertyType of propertyTypeDropdown"
                      [value]="propertyType.value"
                      >{{ propertyType.label | titlecase }}</mat-radio-button
                    >
                  </mat-radio-group>
                </div>
              </div>
            </div>

            <!-- input-table  -->
            <div class="col-sm-12">
              <div class="tableSps">
                <table class="table table-bordered">
                  <thead>
                    <tr>
                      <th scope="col" style="font-size: 12px !important">
                        Questions
                      </th>
                      <th scope="col" style="font-size: 12px !important">
                        Amount
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- principal & interest during the year  -->
                    <ng-container formArrayName="loans">
                      <ng-container
                        *ngFor="
                          let coOwn of getLoansArray.controls;
                          let i = index
                        "
                        [formGroupName]="i"
                      >
                        <!-- principal during the year  -->
                        <tr>
                          <th scope="row">
                            <mat-label
                              >Principal amount repaid during the
                              year</mat-label
                            >
                          </th>

                          <td>
                            <mat-form-field appearance="outline">
                              <input
                                matTooltip="Principal amount repaid during the year"
                                matTooltipClass="tab-tooltip"
                                matTooltipPosition="above"
                                formControlName="principalAmount"
                                class="input-field"
                                matInput
                                placeholder="Principal amount repaid during the year"
                                name="Total principle amount"
                                maxlength="14"
                                digitsOnly
                              />
                              <mat-error
                                *ngIf="
                                  housePropertyForm.controls['loans'].controls[
                                    i
                                  ].controls['principalAmount'].hasError(
                                    'pattern'
                                  )
                                "
                              >
                                Enter positive number without
                                decimal.</mat-error
                              >
                            </mat-form-field>
                          </td>
                        </tr>

                        <!-- interest paid during the year  -->
                        <tr>
                          <th scope="row">
                            <mat-label>Interest paid during the year</mat-label>

                            <!-- 80ee&80eea  -->
                            <div
                              *ngIf="
                                housePropertyForm.controls['loans'].controls[0]
                                  .controls['interestAmount'].value > 200000
                              "
                              style="padding-top: 20px"
                            >
                              <mat-radio-group
                                [formControl]="
                                  housePropertyForm.controls.isEligibleFor80EE
                                "
                              >
                                <div class="customradiobtn bdr_btm">
                                  <mat-radio-button
                                    style="margin: 0"
                                    value=""
                                    class="right-mrgn"
                                  *ngIf="EEStatus === false"

                                    >Select</mat-radio-button
                                  >
                                </div>
                                <br />
                                <div
                                  class="customradiobtn bdr_btm"
                                  *ngIf="EEStatus === false"
                                >
                                  <mat-radio-button
                                    style="margin: 0"
                                    value="80EE"
                                    class="right-mrgn"
                                    >Interest on loan taken for residential
                                    house property (80EE)</mat-radio-button
                                  >
                                </div>
                                <br />
                                <div class="customradiobtn">
                                  <mat-radio-button
                                    style="margin: 0"
                                    value="80EEA"
                                    class="right-mrgn"
                                    *ngIf="EAStatus === false"
                                    >Deduction in respect of interest on loan
                                    taken for certain house property
                                    (80EEA)</mat-radio-button
                                  >
                                </div>
                              </mat-radio-group>
                            </div>
                          </th>
                          <td>
                            <mat-form-field appearance="outline">
                              <input
                                formControlName="interestAmount"
                                class="input-field"
                                matInput
                                placeholder="Interest amount for this year"
                                name="Total interest amount"
                                maxlength="14"
                                (blur)="checkEligibility()"
                                (change)="EeEaValueChanges(i)"
                                digitsOnly
                              />
                              <mat-error
                                *ngIf="
                                  housePropertyForm.controls['loans'].controls[
                                    i
                                  ].controls['interestAmount'].hasError(
                                    'pattern'
                                  )
                                "
                              >
                                Enter positive number without decimal.
                              </mat-error>
                              <mat-error
                                *ngIf="
                                  housePropertyForm.controls['loans'].controls[
                                    i
                                  ].controls['interestAmount'].hasError('min')
                                "
                              >
                                Interest amount should be 1
                              </mat-error>
                            </mat-form-field>
                          </td>
                        </tr>
                      </ng-container>
                    </ng-container>

                    <ng-container
                      *ngIf="
                        housePropertyForm.controls['propertyType'].value ===
                          'LOP' ||
                        housePropertyForm.controls['propertyType'].value ===
                          'DLOP'
                      "
                    >
                      <!-- Gross rent received / expected rent  -->
                      <tr>
                        <th scope="row">
                          <mat-label>
                            {{
                              housePropertyForm.controls["propertyType"]
                                .value === "LOP"
                                ? "Gross rent received / receivable / letable value"
                                : housePropertyForm.controls["propertyType"]
                                    .value === "DLOP"
                                ? "What was the expected rent amount from said property?"
                                : ""
                            }}
                          </mat-label>
                        </th>
                        <td>
                          <mat-form-field appearance="outline">
                            <input
                              formControlName="annualRentReceived"
                              matInput
                              placeholder="{{
                                housePropertyForm.controls['propertyType']
                                  .value === 'LOP'
                                  ? 'Gross rent received / receivable / letable value'
                                  : housePropertyForm.controls['propertyType']
                                      .value === 'DLOP'
                                  ? 'What was the expected rent amount from said property?'
                                  : ''
                              }}"
                              matTooltipClass="tab-tooltip"
                              matTooltip="{{
                                housePropertyForm.controls['propertyType']
                                  .value === 'LOP'
                                  ? 'Gross rent received / receivable / letable value'
                                  : housePropertyForm.controls['propertyType']
                                      .value === 'DLOP'
                                  ? 'What was the expected rent amount from said property?'
                                  : ''
                              }}"
                              name="rentAmount"
                              class="input-field"
                              maxlength="11"
                              digitsOnly
                              (blur)="calAnnualValue()"
                            />
                            <mat-error
                              *ngIf="
                                housePropertyForm.controls[
                                  'annualRentReceived'
                                ].hasError('pattern')
                              "
                            >
                              Enter positive amount without decimal.</mat-error
                            >
                            <mat-error
                              *ngIf="
                                housePropertyForm.controls[
                                  'annualRentReceived'
                                ].hasError('min')
                              "
                            >
                              Amount can not be 0.</mat-error
                            >
                            <mat-error
                              *ngIf="
                                housePropertyForm.controls[
                                  'annualRentReceived'
                                ].hasError('required')
                              "
                            >
                              Gross Rent is required in LOP & DLOP
                            </mat-error>
                          </mat-form-field>
                        </td>
                      </tr>

                      <!-- Your % share  -->
                      <tr *ngIf="isCoOwners.value">
                        <th scope="row">
                          <mat-label> Your share on rent received </mat-label>
                        </th>
                        <td>
                          <mat-form-field appearance="outline">
                            <input
                              formControlName="rentPercentage"
                              matInput
                              currencyMask
                              placeholder="Your share of rent received"
                              name="rentPercentage"
                              class="input-field"
                              maxlength="11"
                              digitsOnly
                              (blur)="calAnnualValue()"
                            />
                            <mat-error
                              *ngIf="
                                housePropertyForm.controls[
                                  'rentPercentage'
                                ].hasError('pattern')
                              "
                            >
                              Enter positive amount without decimal.</mat-error
                            >
                          </mat-form-field>
                        </td>
                      </tr>

                      <!-- property tax  -->
                      <tr>
                        <th scope="row">
                          <mat-label
                            >Amount of property tax paid during the
                            year?</mat-label
                          >
                        </th>
                        <td>
                          <mat-form-field appearance="outline">
                            <input
                              formControlName="propertyTax"
                              matInput
                              currencyMask
                              placeholder="Property tax paid"
                              name="propertyTax"
                              class="input-field"
                              maxlength="11"
                              digitsOnly
                              (blur)="calAnnualValue()"
                            />
                            <mat-error
                              *ngIf="
                                housePropertyForm.controls[
                                  'propertyTax'
                                ].hasError('pattern')
                              "
                            >
                              Enter positive amount without decimal.</mat-error
                            >
                          </mat-form-field>
                        </td>
                      </tr>

                      <!-- Annual Value  -->
                      <tr>
                        <th scope="row">
                          <mat-label> Annual Value </mat-label>
                        </th>
                        <td>
                          <mat-form-field appearance="outline">
                            <input
                              matInput
                              placeholder="Annual Value"
                              [(ngModel)]="annualValue"
                              [ngModelOptions]="{ standalone: true }"
                              matTooltipClass="tab-tooltip"
                              matTooltip="Gross rent received - Tax paid on local authorities"
                              name="annualValue"
                              class="input-field"
                              maxlength="11"
                              digitsOnly
                              disabled
                            />
                            <mat-hint
                              >Gross rent received - Tax paid on local
                              authorities</mat-hint
                            >
                          </mat-form-field>
                        </td>
                      </tr>

                      <!-- 30% of annual value  -->
                      <tr>
                        <th scope="row">
                          <mat-label>30% of Annual value</mat-label>
                        </th>
                        <td>
                          <mat-form-field appearance="outline">
                            <input
                              matInput
                              placeholder="30% of Annual value"
                              [(ngModel)]="thirtyPctOfAnnualValue"
                              [ngModelOptions]="{ standalone: true }"
                              name="thirtyPctOfAV"
                              class="input-field"
                              maxlength="11"
                              digitsOnly
                              disabled
                            />
                            <mat-hint>30% of Annual value</mat-hint>
                          </mat-form-field>
                        </td>
                      </tr>
                    </ng-container>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- old-principal&interest  -->
            <!-- <div class="card__row">
              <span formArrayName="loans">
                <span
                  *ngFor="let coOwn of getLoansArray.controls; let i = index"
                  [formGroupName]="i"
                >
                  <div class="card__col-xs-12 card__col-sm-4">
                    <mat-form-field appearance="outline">
                      <mat-label
                        >Principal amount repaid during the year</mat-label
                      >
                      <input
                        matTooltip="Principal amount repaid during the year"
                        matTooltipClass="tab-tooltip"
                        matTooltipPosition="above"
                        formControlName="principalAmount"
                        matInput
                        placeholder="Principal amount repaid during the year"
                        name="Total principle amount"
                        class="input-field"
                        maxlength="14"
                        digitsOnly
                      />
                      <mat-error
                        *ngIf="
                          housePropertyForm.controls['loans'].controls[
                            i
                          ].controls['principalAmount'].hasError('pattern')
                        "
                      >
                        Enter positive number without decimal.</mat-error
                      >
                    </mat-form-field>
                  </div>
                  <div class="card__col-xs-12 card__col-sm-4">
                    <mat-form-field appearance="outline">
                      <mat-label
                        >Interest payable on borrowed capital</mat-label
                      >
                      <input
                        formControlName="interestAmount"
                        matInput
                        placeholder="Interest amount for this year"
                        name="Total interest amount"
                        class="input-field"
                        maxlength="14"
                        (blur)="checkEligibility()"
                        digitsOnly
                      />
                      <mat-error
                        *ngIf="
                          housePropertyForm.controls['loans'].controls[
                            i
                          ].controls['interestAmount'].hasError('pattern')
                        "
                      >
                        Enter positive number without decimal.
                      </mat-error>
                      <mat-error
                        *ngIf="
                          housePropertyForm.controls['loans'].controls[
                            i
                          ].controls['interestAmount'].hasError('min')
                        "
                      >
                        Interest amount should be 1
                      </mat-error>
                    </mat-form-field>
                  </div>
                </span>
              </span>
            </div> -->

            <!-- <div
              class="card__row"
              *ngIf="
                housePropertyForm.controls['propertyType'].value === 'LOP' ||
                housePropertyForm.controls['propertyType'].value === 'DLOP'
              "
            >
              <div class="card__col-xs-12 card__col-sm-4">
                <mat-form-field appearance="outline">
                  <mat-label>
                    {{
                      housePropertyForm.controls["propertyType"].value === "LOP"
                        ? "Gross rent received / receivable / letable value"
                        : housePropertyForm.controls["propertyType"].value ===
                          "DLOP"
                        ? "What was the expected rent amount from said property?"
                        : ""
                    }}
                  </mat-label>
                  <input
                    formControlName="annualRentReceived"
                    matInput
                    placeholder="{{
                      housePropertyForm.controls['propertyType'].value === 'LOP'
                        ? 'Gross rent received / receivable / letable value'
                        : housePropertyForm.controls['propertyType'].value ===
                          'DLOP'
                        ? 'What was the expected rent amount from said property?'
                        : ''
                    }}"
                    matTooltipClass="tab-tooltip"
                    matTooltip="{{
                      housePropertyForm.controls['propertyType'].value === 'LOP'
                        ? 'Gross rent received / receivable / letable value'
                        : housePropertyForm.controls['propertyType'].value ===
                          'DLOP'
                        ? 'What was the expected rent amount from said property?'
                        : ''
                    }}"
                    name="rentAmount"
                    class="input-field"
                    maxlength="11"
                    digitsOnly
                    (blur)="calAnnualValue()"
                  />
                  <mat-error
                    *ngIf="
                      housePropertyForm.controls['annualRentReceived'].hasError(
                        'pattern'
                      )
                    "
                  >
                    Enter positive amount without decimal.</mat-error
                  >
                  <mat-error
                    *ngIf="
                      housePropertyForm.controls['annualRentReceived'].hasError(
                        'min'
                      )
                    "
                  >
                    Amount can not be 0.</mat-error
                  >
                </mat-form-field>
              </div>
              <div
                class="card__col-xs-12 card__col-sm-4"
                *ngIf="isCoOwners.value"
              >
                <mat-form-field appearance="outline">
                  <mat-label>Your share of rent received</mat-label>
                  <input
                    formControlName="rentPercentage"
                    matInput
                    currencyMask
                    placeholder="Your share of rent received"
                    name="rentPercentage"
                    class="input-field"
                    maxlength="11"
                    digitsOnly
                    (blur)="calAnnualValue()"
                  />
                  <mat-error
                    *ngIf="
                      housePropertyForm.controls['rentPercentage'].hasError(
                        'pattern'
                      )
                    "
                  >
                    Enter positive amount without decimal.</mat-error
                  >
                </mat-form-field>
              </div>
              <div class="card__col-xs-12 card__col-sm-4">
                <mat-form-field appearance="outline">
                  <mat-label
                    >Amount of property tax paid during the year?</mat-label
                  >
                  <input
                    formControlName="propertyTax"
                    matInput
                    currencyMask
                    placeholder="Amount of property tax paid during the year?"
                    name="propertyTax"
                    class="input-field"
                    maxlength="11"
                    digitsOnly
                    (blur)="calAnnualValue()"
                  />
                  <mat-error
                    *ngIf="
                      housePropertyForm.controls['propertyTax'].hasError(
                        'pattern'
                      )
                    "
                  >
                    Enter positive amount without decimal.</mat-error
                  >
                </mat-form-field>
              </div>
            </div> -->
            <!-- <div
              class="card__row"
              *ngIf="
                housePropertyForm.controls['propertyType'].value === 'LOP' ||
                housePropertyForm.controls['propertyType'].value === 'DLOP'
              "
            >
              <div class="card__col-xs-12 card__col-sm-4">
                <mat-form-field appearance="outline">
                  <mat-label> Annual Value </mat-label>
                  <input
                    matInput
                    placeholder="Annual Value"
                    [(ngModel)]="annualValue"
                    [ngModelOptions]="{ standalone: true }"
                    matTooltipClass="tab-tooltip"
                    matTooltip="Gross rent received - Tax paid on local authorities"
                    name="annualValue"
                    class="input-field"
                    maxlength="11"
                    digitsOnly
                    disabled
                  />
                  <mat-hint
                    >Gross rent received - Tax paid on local
                    authorities</mat-hint
                  >
                </mat-form-field>
              </div>
              <div class="card__col-xs-12 card__col-sm-4">
                <mat-form-field appearance="outline">
                  <mat-label>30% of Annual value</mat-label>
                  <input
                    matInput
                    placeholder="30% of Annual value"
                    [(ngModel)]="thirtyPctOfAnnualValue"
                    [ngModelOptions]="{ standalone: true }"
                    name="thirtyPctOfAV"
                    class="input-field"
                    maxlength="11"
                    digitsOnly
                    disabled
                  />
                  <mat-hint>30% of Annual value</mat-hint>
                </mat-form-field>
              </div>
            </div> -->
          </div>

          <hr />

          <!-- property-details  -->
          <div class="card__row flex flex-col gap-[10px]">
            <div class="card__title" style="padding: 0px 15px; font-size: 20px">
              Property Details:
            </div>
            <div
              class="card__row flex flex-row justify-between"
              style="margin: 10px 0"
            >
              <div
                class="card__col-xs-12 card__col-sm-12"
                style="padding-right: 0"
              >
                <mat-form-field appearance="outline">
                  <mat-label>Address of Property</mat-label>
                  <input
                    type="text"
                    trim
                    matInput
                    placeholder="Address of Property"
                    name="address"
                    class="input-field"
                    formControlName="address"
                    style="line-height: 21px"
                  />
                  <mat-error
                    *ngIf="
                      housePropertyForm.controls['address'].hasError('required')
                    "
                  >
                    Enter address of property
                  </mat-error>
                </mat-form-field>
              </div>
              <div
                class="card__col-xs-12 card__col-sm-4"
                style="padding-left: 0"
              >
                <mat-form-field appearance="outline">
                  <mat-label>Town/City</mat-label>
                  <input
                    type="text"
                    trim
                    matInput
                    placeholder="Town/City"
                    name="city"
                    class="input-field"
                    formControlName="city"
                    style="line-height: 21px"
                  />
                  <mat-error
                    *ngIf="
                      housePropertyForm.controls['city'].hasError('required')
                    "
                  >
                    Enter town/city
                  </mat-error>
                  <mat-error
                    *ngIf="
                      housePropertyForm.controls['city'].hasError('pattern')
                    "
                  >
                    Enter character only.</mat-error
                  >
                </mat-form-field>
              </div>
            </div>
            <div
              class="card__row flex flex-row justify-between"
              style="margin: 10px 0 20px 0"
            >
              <div class="card__col-xs-12 card__col-sm-4">
                <mat-form-field appearance="outline">
                  <mat-label>Select state</mat-label>
                  <mat-select
                    placeholder="Select state"
                    name="state"
                    formControlName="state"
                    style="line-height: 21px"
                  >
                    <mat-option
                      *ngFor="let state of stateDropdown"
                      [value]="state.stateCode"
                    >
                      {{ state.stateName | titlecase }}
                    </mat-option>
                  </mat-select>
                  <mat-error
                    *ngIf="
                      housePropertyForm.controls['state'].hasError('required')
                    "
                  >
                    Select the state
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="card__col-xs-12 card__col-sm-4">
                <mat-form-field appearance="outline">
                  <mat-label>Country</mat-label>
                  <mat-select
                    name="country"
                    formControlName="country"
                    style="line-height: 21px"
                  >
                    <mat-option value="91"> India </mat-option>
                  </mat-select>
                  <mat-error
                    *ngIf="
                      housePropertyForm.controls['country'].hasError('required')
                    "
                  >
                    select the country
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="card__col-xs-12 card__col-sm-4">
                <mat-form-field appearance="outline">
                  <mat-label>Pin Code</mat-label>
                  <input
                    type="text"
                    trim
                    matInput
                    placeholder="Pin Code"
                    name="pinCode"
                    class="input-field"
                    formControlName="pinCode"
                    (blur)="updateDataByPincode()"
                    style="line-height: 21px"
                  />
                  <mat-error
                    *ngIf="
                      housePropertyForm.controls['pinCode'].hasError('required')
                    "
                  >
                    Enter pincode
                  </mat-error>
                  <mat-error
                    *ngIf="
                      housePropertyForm.controls['pinCode'].hasError('pattern')
                    "
                  >
                    Enter valid pin
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
          </div>

          <hr />

          <!-- co-ownership details  -->
          <div class="card__row flex flex-col gap-[10px]">
            <div class="card__title" style="padding: 0 15px; font-size: 20px">
              Co-Ownership Details:
            </div>
            <div class="card__row card__row" style="padding: 0px 15px">
              <div class="flex gap-[25px] flex-col">
                <!-- co-owner yes-no selection  -->
                <div class="card__col-xs-12 flex justify-between items-center">
                  <div class="titlBg">Is the property jointly owned? *</div>
                  <mat-radio-group
                    name="isCoOwners"
                    (change)="haveCoOwners()"
                    [formControl]="isCoOwners"
                  >
                    <mat-radio-button
                      [value]="true"
                      style="margin-left: 0px"
                      labelPosition="before"
                      >Yes </mat-radio-button
                    >&nbsp;&nbsp;&nbsp;
                    <mat-radio-button [value]="false" labelPosition="before"
                      >No</mat-radio-button
                    >
                  </mat-radio-group>
                  <!-- add-more-button  -->
                  <div>
                    <button
                      *ngIf="isCoOwners.value"
                      type="button"
                      size="12px"
                      class="add-btn1"
                      (click)="addMoreCoOwner()"
                    >
                      <i class="fa fa-plus-square" aria-hidden="true"></i> Add
                    </button>
                  </div>
                </div>

                <!-- table  -->
                <div
                  class="card__col-xs-12 flex justify-center flex-col"
                  *ngIf="isCoOwners.value"
                >
                  <table class="table table-bordered" style="margin: 10px">
                    <thead>
                      <tr>
                        <th scope="col" style="font-size: 12px !important">
                          <div class="custom-control custom-checkbox">
                            <input
                              class="checkbox checkbox-secondary rounded border-2 w-[18px] h-[18px] mb-[-6px]"
                              type="checkbox"
                              id="customCheck2"
                              disabled
                              name="checkbox"
                            />
                          </div>
                        </th>
                        <th scope="col" style="font-size: 12px !important">
                          Co-Owner's Name
                        </th>
                        <th scope="col" style="font-size: 12px !important">
                          PAN Number
                        </th>
                        <th scope="col" style="font-size: 12px !important">
                          Share (%)
                        </th>
                      </tr>
                    </thead>
                    <tbody formArrayName="coOwners">
                      <tr
                        *ngFor="
                          let coOwn of getCoOwnersArray.controls;
                          let i = index
                        "
                        [formGroupName]="i"
                      >
                        <td>
                          <div class="custom-control custom-checkbox">
                            <input
                              class="checkbox checkbox-secondary rounded border-2 w-[18px] h-[18px] mb-[-6px]"
                              type="checkbox"
                              name="checkbox"
                              (click)="active = [i]"
                            />
                          </div>
                        </td>
                        <td>
                          <mat-form-field
                            class="input-field-width"
                            appearance="outline"
                          >
                            <input
                              matInput
                              class="input-field"
                              name="coOwn[i]"
                              formControlName="name"
                              pattern="[a-zA-Z ]*"
                              required
                              maxlength="40"
                              type="text"
                              trim
                            />
                            <mat-error
                              *ngIf="
                                housePropertyForm.controls['coOwners'].controls[
                                  i
                                ].controls['name'].hasError('pattern')
                              "
                            >
                              Enter valid name.</mat-error
                            >
                          </mat-form-field>
                        </td>

                        <td>
                          <mat-form-field
                            appearance="outline"
                            class="input-field-width"
                          >
                            <input
                              matInput
                              class="input-field"
                              name="coOwn[i]"
                              matTooltip="Format should like this(e.g. XXXXXNNNNX) X indicate character and N indicates number."
                              matTooltipClass="tab-tooltip"
                              matTooltipPosition="above"
                              formControlName="panNumber"
                              maxlength="10"
                              required
                              type="text"
                              trim
                              [class.invalid]="isduplicatePAN(i, 'coOwners')"
                              upperCase
                              [matTooltip]="
                                isduplicatePAN(i, 'coOwners')
                                  ? 'Duplicate PAN Number'
                                  : ''
                              "
                              matTooltipPosition="above"
                              matTooltipClass="error-tooltip"
                            />
                            <mat-error
                              *ngIf="
                                housePropertyForm.controls['coOwners'].controls[
                                  i
                                ].controls['panNumber'].hasError('pattern')
                              "
                            >
                              Enter valid PAN.</mat-error
                            >
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-form-field
                            appearance="outline"
                            class="input-field-width"
                            style="width: 100% !important"
                          >
                            <input
                              matInput
                              class="input-field"
                              name="coOwn[i]"
                              formControlName="percentage"
                              maxlength="2"
                              digitsOnly
                              oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                              onkeypress="event.charCode >= 48 && event.charCode <= 57"
                              (blur)="calPercentage()"
                            />
                            <mat-error
                              *ngIf="
                                housePropertyForm.controls['coOwners'].controls[
                                  i
                                ].controls['percentage'].hasError('pattern')
                              "
                            >
                              Enter positive number without decimal.</mat-error
                            >
                          </mat-form-field>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  <!-- delete  -->
                  <div>
                    <button
                      *ngIf="isCoOwners.value"
                      type="button"
                      size="12px"
                      class="btn btn-outline-danger !important"
                      (click)="removeCoOwner(active)"
                    >
                      <i class="fa fa-trash" aria-hidden="true"></i>
                      Delete
                    </button>
                  </div>

                  <!-- <table
                    class="table table-bordered"
                    style="width: 100%"
                    *ngIf="!isCoOwners.value"
                  >
                    <thead style="background: #eaeaea">
                      <tr
                        class="table-head"
                        style="
                          border-left: 1px solid #e0e0e0;
                          border-right: 2px solid #f2f0f0;
                        "
                      >
                        <th class="text-center">No</th>
                        <th class="text-center">Co-owner name</th>
                        <th class="text-center">PAN</th>
                        <th class="text-center">Shares (%) *</th>
                         <th class="text-center">Refund Acc.</th>
                        <th class="action-th">
                          <button
                            mat-icon-button
                            color="warn"
                            class="table-add-remove-button text-left"
                            (click)="addMoreCoOwner()"
                          >
                            <i class="fa fa-plus-square" aria-hidden="true"></i>
                            Add
                          </button>
                        </th>
                      </tr>
                    </thead>
                    <tbody formArrayName="coOwners">
                      <tr
                        *ngFor="
                          let coOwn of getCoOwnersArray.controls;
                          let i = index
                        "
                        [formGroupName]="i"
                      >
                        <td>{{ i + 1 }}</td>
                        <td>
                          <mat-form-field class="input-field-width">
                            <input
                              matInput
                              class="input-field"
                              name="coOwn[i]"
                              formControlName="name"
                              pattern="[a-zA-Z ]*"
                              required
                              maxlength="40"
                              type="text"
                              trim
                            />
                            <mat-error
                              *ngIf="
                                housePropertyForm.controls['coOwners'].controls[
                                  i
                                ].controls['name'].hasError('pattern')
                              "
                            >
                              Enter valid name.</mat-error
                            >
                          </mat-form-field>
                        </td>

                        <td>
                          <mat-form-field class="input-field-width">
                            <input
                              matInput
                              class="input-field"
                              name="coOwn[i]"
                              matTooltip="Format should like this(e.g. XXXXXNNNNX) X indicate character and N indicates number."
                              matTooltipClass="tab-tooltip"
                              matTooltipPosition="above"
                              formControlName="panNumber"
                              maxlength="10"
                              required
                              type="text"
                              trim
                              [class.invalid]="isduplicatePAN(i, 'coOwners')"
                              upperCase
                              [matTooltip]="
                                isduplicatePAN(i, 'coOwners')
                                  ? 'Duplicate PAN Number'
                                  : ''
                              "
                              matTooltipPosition="above"
                              matTooltipClass="error-tooltip"
                            />
                            <mat-error
                              *ngIf="
                                housePropertyForm.controls['coOwners'].controls[
                                  i
                                ].controls['panNumber'].hasError('pattern')
                              "
                            >
                              Enter valid PAN.</mat-error
                            >
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-form-field
                            class="input-field-width"
                            style="width: 90% !important"
                          >
                            <input
                              matInput
                              class="input-field"
                              name="coOwn[i]"
                              formControlName="percentage"
                              maxlength="2"
                              digitsOnly
                              oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                              onkeypress="event.charCode >= 48 && event.charCode <= 57"
                              (blur)="calPercentage()"
                            />
                            <mat-error
                              *ngIf="
                                housePropertyForm.controls['coOwners'].controls[
                                  i
                                ].controls['percentage'].hasError('pattern')
                              "
                            >
                              Enter positive number without decimal.</mat-error
                            >
                          </mat-form-field>
                        </td>

                        <td
                          style="
                            white-space: nowrap;
                            padding: 0%;
                            border: none;
                            justify-content: center;
                          "
                        >
                          <button
                            mat-icon-button
                            color="warn"
                            class="table-add-remove-button text-left"
                            (click)="removeCoOwner(i)"
                          >
                            <i class="fa fa-trash" aria-hidden="true"></i>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table> -->
                </div>
              </div>
            </div>
          </div>

          <br />
          <hr />

          <!-- tenant details  -->
          <div
            class="card__row flex flex-col gap-[10px]"
            *ngIf="housePropertyForm.controls['propertyType'].value === 'LOP'"
          >
            <!-- title & add-button -->
            <div class="card__col-xs-12 flex justify-between items-center">
              <div class="card__title" style="padding: 0 15px; font-size: 20px">
                Tenant Details
              </div>
              <!-- add-button  -->
              <div>
                <button class="btn" (click)="addMoreTenants()">
                  <i class="fa fa-plus-square" aria-hidden="true"></i> Add
                </button>
              </div>
            </div>

            <!-- table  -->
            <div class="card__col-xs-12 flex justify-center flex-col">
              <table class="table table-bordered" style="margin: 10px">
                <thead>
                  <tr>
                    <th scope="col" style="font-size: 12px !important">
                      <div class="custom-control custom-checkbox">
                        <input
                          class="checkbox checkbox-secondary rounded border-2 w-[18px] h-[18px] mb-[-6px]"
                          type="checkbox"
                          id="customCheck2"
                          disabled
                        />
                      </div>
                    </th>
                    <th scope="col" style="font-size: 12px !important">
                      Tenant Name
                    </th>
                    <th scope="col" style="font-size: 12px !important">
                      PAN Number
                    </th>
                  </tr>
                </thead>
                <tbody formArrayName="tenant">
                  <tr
                    *ngFor="let ten of getTenantArray.controls; let i = index"
                    [formGroupName]="i"
                  >
                    <td>
                      <div class="custom-control custom-checkbox">
                        <input
                          class="checkbox checkbox-secondary rounded border-2 w-[18px] h-[18px] mb-[-6px]"
                          type="checkbox"
                          (click)="activeTenant = [i]"
                        />
                      </div>
                    </td>

                    <td>
                      <mat-form-field
                        class="input-field-width"
                        appearance="outline"
                      >
                        <input
                          matInput
                          name="ten[ii]"
                          class="input-field"
                          formControlName="name"
                          pattern="[a-zA-Z ]*"
                          required
                          maxlength="40"
                          type="text"
                          trim
                        />
                        <mat-error
                          *ngIf="
                            housePropertyForm.controls['tenant'].controls[
                              i
                            ].controls['name'].hasError('required')
                          "
                        >
                          Enter tenant name.</mat-error
                        >
                      </mat-form-field>
                    </td>

                    <td>
                      <mat-form-field
                        appearance="outline"
                        class="input-field-width"
                      >
                        <input
                          matInput
                          class="input-field"
                          name="ten[i]"
                          matTooltip="Format should like this(e.g. XXXXXNNNNX) X indicate character and N indicates number."
                          matTooltipClass="tab-tooltip"
                          matTooltipPosition="above"
                          formControlName="panNumber"
                          maxlength="10"
                          type="text"
                          trim
                          [class.invalid]="isduplicatePAN(i, 'tenant')"
                          upperCase
                          [matTooltip]="
                            isduplicatePAN(i, 'tenant')
                              ? 'Duplicate PAN Number'
                              : ''
                          "
                          matTooltipPosition="above"
                          matTooltipClass="error-tooltip"
                        />
                        <mat-error
                          *ngIf="
                            housePropertyForm.controls['tenant'].controls[
                              i
                            ].controls['panNumber'].hasError('pattern')
                          "
                        >
                          Enter valid PAN.</mat-error
                        >
                      </mat-form-field>
                    </td>
                  </tr>
                </tbody>
              </table>
              <!-- delete-button  -->
              <div
                style="
                  white-space: nowrap;
                  padding: 0%;
                  border: none;
                  justify-content: center;
                "
              >
                <button
                  type="button"
                  size="12px"
                  class="btn btn-outline-danger !important"
                  (click)="removeTenant(activeTenant)"
                >
                  <i class="fa fa-trash" aria-hidden="true"></i> Delete
                </button>
              </div>
            </div>
          </div>
          <!-- action buttons  -->
        </div>
      </form>
    </mat-expansion-panel>
  </mat-accordion>
  <div class="flex justify-between p-[30px] back-foot">
    <!-- <a class="btn btn-cancel">Cancel</a> -->
    <button class="lgtBtn" (click)="goBack()">
      <mat-icon class="icoAdj">keyboard_backspace</mat-icon>
      <span class="font-semibold">&nbsp;Back to Main Page</span>
    </button>
    <button
      *ngIf="hpView === 'FORM'"
      class="saveBtnIn"
      (click)="saveHouseProperty('', '')"
    >
      <span class="font-semibold">Save All</span>
    </button>
  </div>
</div>
