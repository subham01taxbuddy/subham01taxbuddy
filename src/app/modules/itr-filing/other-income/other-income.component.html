<ngx-loading
  [show]="loading"
  [config]="{ backdropBorderRadius: '14px', fullScreenBackdrop: true }"
></ngx-loading>

<div>
    <div class="frameC">
      <div class="div">
        <div class="text-wrapper">Other Source of Income</div>
        <div class="mingcute-down-fill"></div>
      </div>
      <div class="space">
        <div class="div-2">

          <div class="div-4">
            <div class="frame-wrapper-2A">
              <form [formGroup]="otherIncomeFormGroup">
                <div class="accordion" id="myAccordion">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="headingTwo">
                      <button type="button" class="accordion-button" data-bs-toggle="collapse"
                              data-bs-target="#collapseTwo">Interest Income <input type="number" class="form-control inpClr2"
                                                                                   id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="₹0"></button>

                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse show" data-bs-parent="#myAccordion">
                      <div class="accordion__item-body" formArrayName="otherIncomes">
                        <div class="div-6" *ngFor="let income of getIncomeArray.controls; let i = index"
                             [formGroupName]="i">
                          <div class="form-field">
                            <div><span class="span">{{ income.value.label }} </span></div>
                          </div>
                          <div class="form-field">
                            <mat-form-field appearance="outline">
                              <input
                                      type="text"
                                      trim
                                      matInput
                                      placeholder=""
                                      name="incomeValue[i]"
                                      formControlName="incomeValue"
                                      type="number"
                                      maxlength="125"
                                      (blur)="validateIncomeValueOnBlur()"/>
                            </mat-form-field>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="accordion-item">
                    <h2 class="accordion-header" id="headingThree">
                      <button type="button" class="accordion-button" data-bs-toggle="collapse"
                              data-bs-target="#collapseThree">Divident Income
                        <input type="number" class="form-control inpClr2" [value]="getTotal()"
                               id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="₹0">
                      </button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse show" data-bs-parent="#myAccordion">
                      <div class="accordion__item-body" formGroupName="dividendIncomes">
                        <div class="div-6">
                          <div class="form-field">
                            <div><span class="span">Upto 15 June </span></div>
                            <mat-form-field appearance="outline">
                              <input
                                      digitsOnly
                                      trim
                                      matInput
                                      placeholder="Upto 15 June 2022"
                                      name="quarter1"
                                      formControlName="quarter1"
                                      maxlength="50"
                                      digitsOnly
                              />
                            </mat-form-field>
                          </div>
                          <div class="form-field">
                            <div><span class="span">16th June- 15th Sep</span></div>
                            <mat-form-field appearance="outline">
                              <input
                                      digitsOnly
                                      trim
                                      matInput
                                      placeholder="16 June 2022 - 15 Sep 2022"
                                      name="quarter2"
                                      formControlName="quarter2"
                                      maxlength="50"
                                      digitsOnly
                              />
                            </mat-form-field>
                          </div>
                          <div class="form-field">
                            <div><span class="span">16th Sep- 15th Dec </span></div>
                            <mat-form-field appearance="outline">
                              <input
                                      digitsOnly
                                      trim
                                      matInput
                                      placeholder="16 Sep 2022 - 15 Dec 2022"
                                      name="quarter3"
                                      formControlName="quarter3"
                                      maxlength="50"
                                      digitsOnly
                              />
                            </mat-form-field>
                          </div>
                        </div>
                        <div class="div-6">
                          <div class="form-field">
                            <div> <span class="span">16th Dec- 15th Mar</span></div>
                            <mat-form-field appearance="outline">
                              <input
                                      digitsOnly
                                      trim
                                      matInput
                                      placeholder="16 Dec 2022 - 15 March 2023"
                                      name="quarter4"
                                      formControlName="quarter4"
                                      maxlength="50"
                                      digitsOnly
                              />
                            </mat-form-field>
                          </div>
                          <div class="form-field">
                            <div><span class="span">16th Mar- 31th Mar</span></div>
                            <mat-form-field appearance="outline">
                              <input
                                      digitsOnly
                                      trim
                                      matInput
                                      placeholder="16 March 2023 - 31 March 2023"
                                      name="quarter5"
                                      formControlName="quarter5"
                                      maxlength="50"
                                      digitsOnly
                              />
                            </mat-form-field>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                    <div class="accordion-item">
                      <h2 class="accordion-header" id="headingThree">
                        <button type="button" class="accordion-button" data-bs-toggle="collapse"
                                data-bs-target="#collapseThree">Income from Gift <input type="number" class="form-control inpClr2"
                                                                                        id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="₹0"></button>
                      </h2>
                      <div id="collapseThree" class="accordion-collapse collapse show" data-bs-parent="#myAccordion">
                        <div class="accordion__item-body">
                          <table class="table table-bordered" style="width: 100%">
                        <thead style="background: #eaeaea">
                        <tr class="table-head">
                          <th></th>
                          <th class="text-center">Whether GIft is received from Relative</th>
                          <th></th>
                        </tr>
                        </thead>
                        <tbody formGroupName="giftTax">
                        <tr>
                          <td>
                            Money received without consideration
                          </td>
                          <td>
                            <mat-checkbox formControlName="aggregateValueWithoutConsiderationNotTaxable">
                            </mat-checkbox>
                          </td>
                          <td>
                            <mat-form-field
                                    class="input-field-width"
                                    style="width: 90% !important"
                            >
                              <input
                                      type="text"
                                      trim
                                      matInput
                                      placeholder=""
                                      formControlName="aggregateValueWithoutConsideration"
                                      type="number"
                                      class="input-field"
                                      maxlength="125"
                              />
                            </mat-form-field>
                          </td>
                        </tr>

                        <tr>
                          <td>
                            Immovable property received without consideration
                          </td>
                          <td>
                            <mat-checkbox formControlName="immovablePropertyWithoutConsiderationNotTaxable">
                            </mat-checkbox>
                          </td>
                          <td>
                            <mat-form-field
                                    class="input-field-width"
                                    style="width: 90% !important"
                            >
                              <input
                                      type="text"
                                      trim
                                      matInput
                                      placeholder=""
                                      formControlName="immovablePropertyWithoutConsideration"
                                      type="number"
                                      class="input-field"
                                      maxlength="125"
                              />
                            </mat-form-field>
                          </td>
                        </tr>

                        <tr>
                          <td>
                            Immovable property received for inadequate consideration
                          </td>
                          <td>
                            <mat-checkbox formControlName="immovablePropertyInadequateConsiderationNotTaxable">
                            </mat-checkbox>
                          </td>
                          <td>
                            <mat-form-field
                                    class="input-field-width"
                                    style="width: 90% !important"
                            >
                              <input
                                      type="text"
                                      trim
                                      matInput
                                      placeholder=""
                                      formControlName="immovablePropertyInadequateConsideration"
                                      type="number"
                                      class="input-field"
                                      maxlength="125"
                              />
                            </mat-form-field>
                          </td>
                        </tr>

                        <tr>
                          <td>
                            Any Other property received without consideration
                          </td>
                          <td>
                            <mat-checkbox formControlName="anyOtherPropertyWithoutConsiderationNotTaxable">
                            </mat-checkbox>
                          </td>
                          <td>
                            <mat-form-field
                                    class="input-field-width"
                                    style="width: 90% !important"
                            >
                              <input
                                      type="text"
                                      trim
                                      matInput
                                      placeholder=""
                                      formControlName="anyOtherPropertyWithoutConsideration"
                                      type="number"
                                      class="input-field"
                                      maxlength="125"
                              />
                            </mat-form-field>
                          </td>
                        </tr>

                        <tr>
                          <td>
                            Any Other property received for inadequate consideration
                          </td>
                          <td>
                            <mat-checkbox formControlName="anyOtherPropertyInadequateConsiderationNotTaxable">
                            </mat-checkbox>
                          </td>
                          <td>
                            <mat-form-field
                                    class="input-field-width"
                                    style="width: 90% !important"
                            >
                              <input
                                      type="text"
                                      trim
                                      matInput
                                      placeholder=""
                                      formControlName="anyOtherPropertyInadequateConsideration"
                                      type="number"
                                      class="input-field"
                                      maxlength="125"
                              />
                            </mat-form-field>
                          </td>
                        </tr>
                        </tbody>
                      </table>
                        </div>
                      </div>
                    </div>

                  <div class="accordion-item">
                    <h2 class="accordion-header" id="headingThree">
                      <button type="button" class="accordion-button" data-bs-toggle="collapse"
                              data-bs-target="#collapseThree">Any Other Income <input type="number" class="form-control inpClr2"
                                                                                      id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="₹0"></button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse show" data-bs-parent="#myAccordion">
                      <div class="accordion__item-body">
                        <div class="txHdg">Family Pension</div>
                        <div class="div-6 gray_box">
                          <div class="form-field">
                            <div><span class="span">Family Pension amount </span></div>

                            <div class="form-field">
                              <mat-form-field appearance="outline">
                                <input
                                        digitsOnly
                                        matInput
                                        placeholder="Family pension"
                                        name="quarter1"
                                        formControlName="familyPension"
                                        maxlength="50"
                                        (blur)="calFamPension()"
                                />
                              </mat-form-field>
                            </div>
                          </div>
                          <div class="form-field">
                            <div><span class="span">Deduction u/s 57(2)a </span></div>
                            <div class="form-field">
                              <mat-form-field appearance="outline">
                              <input
                                      digitsOnly
                                      matInput
                                      name="quarter2"
                                      formControlName="famPenDeduction"
                                      [disabled]="true"
                              />
                            </mat-form-field>
                            </div>
                          </div>
                          <div class="form-field">
                            <div><span class="span">Net family pension</span></div>
                            <div class="form-field">
                              <mat-form-field appearance="outline">
                              <input
                                      digitsOnly
                                      matInput
                                      name="quarter3"
                                      formControlName="totalFamPenDeduction"
                                      [disabled]="true"
                              />
                            </mat-form-field>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                  </div>

                </div>
              </form>
            </div>

          </div>
        </div>
      </div>
    </div>

  <div class="frameC">
    <div class="div">
      <div class="text-wrapper">Exempt Income</div>
      <div class="mingcute-down-fill"></div>
    </div>
    <div class="space">
      <div class="div-2">



        <div class="div-4">
          <div class="frame-wrapper-2A">

            <form [formGroup]="exemptIncomeFormGroup">
              <div class="accordion" id="myAccordion" formArrayName="exemptIncomes">
                <div class="accordion-item">
                  <h2 class="accordion-header accoHdclr" id="headingOne">
                    <button type="button" class="accordion-button" data-bs-toggle="collapse" data-bs-target="#collapseOne">Agriculture Income</button>
                  </h2>
                  <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#myAccordion" *ngFor="let income of getExemptIncomeArray.controls;let i = index"
                       [formGroupName]="i">
                    <div class="card-body" *ngIf="income.value.incomeType === 'AGRI'" [formGroup]="agriIncFormGroup">

                      <div class="surBx1">

                        <div class="hp2main">
                          <div class="hplft">Gross Agriculture Receipt </div>
                          <div class="form-field">
                            <mat-form-field appearance="outline">
                              <input
                                      type="number"
                                      matInput
                                      placeholder=""
                                      name="grossAgriculturalReceipts[i]"
                                      formControlName="grossAgriculturalReceipts"
                                      maxlength="125"
                                      (change)="setNetAgriIncome(i)"
                              />
                            </mat-form-field>
                          </div>
                        </div>
                        <div class="hp2main">
                          <div class="hplft">Expenditure On Agriculture</div>
                          <div class="form-field">
                            <mat-form-field appearance="outline">
                              <input
                                      type="number"
                                      trim
                                      matInput
                                      placeholder=""
                                      name="expenditureIncurredOnAgriculture[i]"
                                      formControlName="expenditureIncurredOnAgriculture"
                                      maxlength="125"
                                      (change)="setNetAgriIncome(i)"
                              />
                            </mat-form-field>
                          </div>
                        </div>
                        <div class="hp2main">
                          <div class="hplft">Unabsorbed Agriculture Loss</div>
                          <div class="form-field">
                            <mat-form-field appearance="outline">
                              <input
                                      type="number"
                                      trim
                                      matInput
                                      placeholder=""
                                      name="unabsorbedAgriculturalLoss[i]"
                                      formControlName="unabsorbedAgriculturalLoss"
                                      maxlength="125"
                                      (change)="setNetAgriIncome(i)"
                              />
                            </mat-form-field>
                          </div>
                        </div>
                        <div class="hp2main">
                          <div class="hplft">The agricultural income portion relating to rules 7,
                            7A, 7B(1), 7B(1A) & 8</div>
                          <div class="form-field">
                            <mat-form-field appearance="outline">
                              <input
                                      type="number"
                                      trim
                                      matInput
                                      placeholder=""
                                      name="agriIncomePortionRule7[i]"
                                      formControlName="agriIncomePortionRule7"
                                      maxlength="125"
                                      (change)="setNetAgriIncome(i)"
                                      readonly
                              />
                            </mat-form-field>
                          </div>
                        </div>
                        <div class="hp2main">
                          <div class="hplft">Net Agriculture Income</div>
                          <div class="form-field">
                            <mat-form-field appearance="outline">
                              <input
                                      type="number"
                                      trim
                                      matInput
                                      placeholder=""
                                      name="netAgriculturalIncome[i]"
                                      formControlName="netAgriculturalIncome"
                                      maxlength="125"
                                      readonly
                              />
                            </mat-form-field>
                          </div>
                        </div>
                      </div>

                      <div class="txHdg">
                        Since the Net Agriculture income amount entered is more than INR 5 Lakh, enter the following details-
                      </div>
                      <div formArrayName="agriInc" *ngIf="
                        income.value.incomeType === 'AGRI' &&
                        income.value.incomeValue > 500000">
                        <button (click)="addAgriLandDtls()">+Add More</button>
                        <div class="gry-box-spc"
                           *ngFor="
                          let agriIncArray of getAgriIncomeArray.controls;
                          let j = index
                        "
                           [formGroupName]="j">
                        <!-- row1 -->
                          <div class="buyr-box">
                            <div class="field">
                              <input
                                      class="checkbox checkbox-secondary rounded border-2 w-[18px] h-[18px] mb-[-6px]"
                                      type="checkbox"
                                      (click)="$event.stopPropagation()"
                                      [checked]="selectedIndexes.includes(j)"
                                      (click)="toggleSelectedIndex(j)"
                              />
                            </div>
                            <div class="field">
                              <div class="field-label">
                                <span class="span">Name of District</span>
                              </div>
                              <div class="form-field">
                                <mat-form-field appearance="outline">
                                <input
                                        matInput
                                        placeholder="Name of District"
                                        name="nameOfDistrict[j]"
                                        formControlName="nameOfDistrict"/>
                              </mat-form-field>
                              </div>
                            </div>

                            <div class="field">
                              <div class="field-label">
                                <span class="span">Pincode</span>
                              </div>
                              <div class="form-field">
                                <mat-form-field appearance="outline">
                                <input
                                        matInput
                                        placeholder="Pincode"
                                        name="pinCode[j]"
                                        formControlName="pinCode"/>
                              </mat-form-field>
                              </div>
                            </div>

                            <div class="field">
                              <div class="field-label">
                                <span class="span">Measurement</span>
                              </div>
                              <div class="form-field">
                                <mat-form-field appearance="outline">
                                <input
                                        matInput
                                        placeholder="land In Acre"
                                        name="landInAcre[j]"
                                        formControlName="landInAcre"/>
                              </mat-form-field>
                              </div>
                            </div>

                          </div>
                          <!-- row2 -->
                          <div class="buyr-box">

                            <div class="field">
                              <div class="field-label">
                                <span class="span">Ownership status</span>
                              </div>
                              <div class="form-field">
                                <mat-select formControlName="owner"
                                      placeholder="owner"
                                      required>
                                <mat-option>Select</mat-option>
                                <mat-option [value]="'O'">Owner</mat-option>
                                <mat-option [value]="'H'">Held on lease</mat-option>
                              </mat-select>
                              </div>
                            </div>

                            <div class="field">
                              <div class="field-label">
                                <span class="span">Water Source</span>
                              </div>
                              <div class="form-field">
                                <mat-select formControlName="typeOfLand" placeholder="Type Of Land">
                                  <mat-option>Select</mat-option>
                                  <mat-option [value]="'IRG'">Irrigated</mat-option>
                                  <mat-option [value]="'RF'">Rain-fed</mat-option>
                                </mat-select>
                              </div>
                            </div>

                          </div>
                          <div (click)="delete()">
                              <button>Delete</button>
                            </div>
                        </div>
                      </div>

                    </div>
                  </div>
                </div>
                <div class="accordion-item">
                  <h2 class="accordion-header" id="headingTwo">
                    <button type="button" class="accordion-button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
                      Other Exempt Amount
                      <input type="number" class="form-control inpClr2" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="₹0">
                    </button>

                  </h2>
                  <div id="collapseTwo" class="accordion-collapse collapse show" data-bs-parent="#myAccordion">
                    <div class="card-body" *ngFor="let income of getExemptIncomeArray.controls;let i = index"
                         [formGroupName]="i">

                      <div class="hp4main1" *ngIf="income.value.incomeType !== 'AGRI'">

                        <div class="hp4-2">
                          <div class="field">
                            <div class="field-label">
                              <span class="span">Income Category </span>
                            </div>
                            <mat-form-field appearance="outline">
                              <mat-select value="{{income.value.value}}" >
                                <mat-option value="{{income.value.value}}">{{ income.value.label }}</mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                        </div>

                        <div class="hp4-3">
                          <div class="field">
                            <div class="field-label">
                              <span class="span">Amount </span>
                            </div>
                            <div class="form-field">
                              <mat-form-field appearance="outline">
                              <input
                                      type="number"
                                      matInput
                                      placeholder=""
                                      name="incomeValue[i]"
                                      formControlName="incomeValue"
                                      maxlength="125"
                                      [readonly]="income.value.incomeType === 'AGRI'"
                              />
                            </mat-form-field>
                            </div>
                          </div>
                        </div>

                        <div class="hp4-4">
                          <div class="Bx4">
                            <div class="Bx4L">
                              <button type="button"> <i class="fa fa-trash-o delbt"></i> </button>
                            </div>
                            <div class="Bx4R" *ngIf="false">
                              <button type="button" class="addAno"> + Add Another </button>
                            </div>
                          </div>
                        </div>


                      </div>

                    </div>
                  </div>
                </div>

              </div>
              <div class="note">
                Note: 1. Sec 10(26) - Deduction is available only for certain category
                of assesses of NE Region and Ladakh
                <br />
                Note: 2. Sec 10(26AAA) - Deduction is available only for certain
                Sikkimese assessees
              </div>
            </form>

          </div>

        </div>
      </div>
    </div>
  </div>
</div>


<div class="out-box">
  <div class="box-left">
    <div class="btn btn__white" (click)="goBack()">Back</div>
  </div>
  <div class="box-right">
    <div class="btn btn__primary" (click)="saveAll()">Save & View Summary</div>
  </div>
</div>

