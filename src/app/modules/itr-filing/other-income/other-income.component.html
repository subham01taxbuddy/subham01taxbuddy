<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px',fullScreenBackdrop:true }"></ngx-loading>
<mat-accordion class="headers-align">
  <mat-expansion-panel hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title>
        <mat-icon>
          arrow_forward_ios
        </mat-icon>
        Other incomes
      </mat-panel-title>
    </mat-expansion-panel-header>
    <div style="height: 100%; padding-top: 10px; box-sizing: border-box;">
      <div class="card__col-xs-12 card__col-sm-12">
                <ag-grid-angular style="width: 100%; height: 100%;" class="ag-theme-balham"
                                 [gridOptions]="otherIncomeGridOptions" (rowClicked)="onOtherIncomeRowClicked($event)">
                </ag-grid-angular>
        <div *ngIf="false" formGroup="otherIncomeFormGroup">
          <table class="table table-bordered">
            <thead style="background:#eaeaea">
            <tr class="table-head">
              <th class="text-center">Salary Type</th>
              <th class="text-center">Gross Amount</th>
              <th class="text-center">Actions</th>
            </tr>
            </thead>
            <tbody formArrayName="otherIncomesFormArray">
              <tr *ngFor="let income of otherIncomeDropdown;let i=index" [formGroupName]="i">
              <td>
                <mat-label>{{income.label}}</mat-label>
              </td>

              <td>
                <mat-form-field class="input-field-width" style="width: 90% !important;">
                  <input type="text" trim matInput formControlName="name" placeholder="" name="income[i]"
                         class="input-field" maxlength="125" required/>
                  <!--                <mat-error-->
                  <!--                  *ngIf="customerProfileForm.controls['bankDetails'].controls[i].controls['name'].hasError('pattern')">-->
                  <!--                  Enter character only.</mat-error>-->
                </mat-form-field>
              </td>

              <td>
                <button class="table-add-remove-button text-left">
                  <!--                      [disabled]="!customerProfileForm.controls['bankDetails'].controls[i].controls['hasEdit'].value"-->
                  Edit
                </button>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
        <br>
        <hr>
        <div style="padding-top: 20px;">

          <div class="subTitle"> Quartely Break-up of Dividend Income
            <span style="float: right;">Total: {{getTotal()}}</span>
          </div>

          <div class="card__row">
            <div class="card__col-xs-12 card__col-sm-6">
              <mat-label class="inputLabel">Upto 15 June 2022</mat-label>
              <mat-form-field appearance="outline">
                <input digitsOnly trim matInput placeholder="Upto 15 June 2022" name="quarter1"
                       [formControl]="dividendIncomes.controls['quarter1']" class="input-field" maxlength="50"
                       digitsOnly>
              </mat-form-field>
            </div>
            <div class="card__col-xs-12 card__col-sm-6">
              <mat-label class="inputLabel">16 June 2022 - 15 Sep 2022</mat-label>
              <mat-form-field appearance="outline">
                <input digitsOnly trim matInput placeholder="16 June 2022 - 15 Sep 2022" name="quarter2"
                       [formControl]="dividendIncomes.controls['quarter2']" class="input-field" maxlength="50"
                       digitsOnly>
              </mat-form-field>
            </div>
            <div class="card__col-xs-12 card__col-sm-6">
              <mat-label class="inputLabel">16 Sep 2022 - 15 Dec 2022</mat-label>
              <mat-form-field appearance="outline">
                <input digitsOnly trim matInput placeholder="16 Sep 2022 - 15 Dec 2022" name="quarter3"
                       [formControl]="dividendIncomes.controls['quarter3']" class="input-field" maxlength="50"
                       digitsOnly>
              </mat-form-field>
            </div>
            <div class="card__col-xs-12 card__col-sm-6">
              <mat-label class="inputLabel">16 Dec 2022 - 15 March 2022</mat-label>
              <mat-form-field appearance="outline">
                <input digitsOnly trim matInput placeholder="16 Dec 2022 - 15 March 2022" name="quarter4"
                       [formControl]="dividendIncomes.controls['quarter4']" class="input-field" maxlength="50"
                       digitsOnly>
              </mat-form-field>
            </div>
            <div class="card__col-xs-12 card__col-sm-6">
              <mat-label class="inputLabel">16 March 2022 - 31 March 2022</mat-label>
              <mat-form-field appearance="outline">
                <input digitsOnly trim matInput placeholder="16 March 2022 - 31 March 2022" name="quarter5"
                       [formControl]="dividendIncomes.controls['quarter5']" class="input-field" maxlength="50"
                       digitsOnly>
              </mat-form-field>
            </div>
          </div>

        </div>
        <hr>

        <div style="padding-top: 20px;">
          <div class="subTitle">Family Pension
            <!-- <span style="float: right;">Total:{{getTotalExemptIncome()}}</span> -->
          </div>
          <div class="card__row">
            <div class="card__col-xs-12 card__col-sm-4">
              <mat-label class="inputLabel">Family pension</mat-label>
              <mat-form-field appearance="outline">
                <input digitsOnly trim matInput placeholder="Family pension" name="quarter1"
                       [formControl]="familyPension" class="input-field" maxlength="50" digitsOnly
                       (blur)="calFamPension()">
              </mat-form-field>
            </div>
            <div class="card__col-xs-12 card__col-sm-4">
              <mat-label class="inputLabel">(-) Deduction u/s 57(iia)</mat-label>
              <mat-form-field appearance="outline">
                <input digitsOnly trim matInput name="quarter2" class="input-field"
                       [(ngModel)]="famPenDeduction" digitsOnly disabled>
              </mat-form-field>
            </div>
            <div class="card__col-xs-12 card__col-sm-4">
              <mat-label class="inputLabel">Total Family Pension</mat-label>
              <mat-form-field appearance="outline">
                <input digitsOnly trim matInput name="quarter3" class="input-field"
                       [(ngModel)]="totalFamPenDeduction" digitsOnly disabled>
              </mat-form-field>
            </div>
          </div>

        </div>
      </div>
      <div class="">
        <div class="card__row footer__buttons clearfix" style="margin-top: 40px;">
          <button class="tbd-btn save-btn" [disabled]="familyPension.invalid || dividendIncomes.invalid"
                  (click)="saveOtherIncome()">Save
          </button>
        </div>
      </div>

    </div>
  </mat-expansion-panel>

  <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" (closed)="closed('personal')" hideToggle
                       class="hide-close">
    <mat-expansion-panel-header>
      <mat-panel-title>
        <mat-icon>
          arrow_forward_ios
        </mat-icon>
        Exempted Incomes
      </mat-panel-title>
    </mat-expansion-panel-header>
    <div class="card__col-xs-12 card__col-sm-12">
      <div class="card__title" style="padding:10px; font-size: 20px;">Exempt Incomes
        <span style="float: right;">Total:{{getTotalExemptIncome()}}</span>
      </div>
      <div style="height: 100%; padding-top: 10px; box-sizing: border-box;">
        <ag-grid-angular style="width: 100%; height: 100%;" class="ag-theme-balham"
                         [gridOptions]="exemptIncomesGridOptions" (rowClicked)="onExemptIncomesRowClicked($event)">
        </ag-grid-angular>
      </div>
      Note: 1. Sec 10(26) - Deduction is available only for certain category of assesses of NE Region and
      Ladakh
      <br>
      Note: 2. Sec 10(26AAA) - Deduction is available only for certain Sikkimese assessees
    </div>
  </mat-expansion-panel>

</mat-accordion>

<div class="flex justify-between border-t mt-[75px] m-[25px] py-[25px]">
  <button
    class="display-flex btn normal-case h-fit min-h-fit transition-all duration-300 bg-white hover:bg-sky-700 hover:border-sky-700 py-3 px-7 hover:text-white">
    <mat-icon>keyboard_backspace</mat-icon>
    <span class="font-semibold">&nbsp;Back to Source Page</span>
  </button>

  <button
    class="btn normal-case h-fit min-h-fit transition-all duration-300 bg-sky-600 hover:bg-sky-700 hover:border-sky-700 py-3 px-7 text-white">
    <span class="font-semibold">Save All</span>
  </button>
</div>
<div class="card__row">


</div>
