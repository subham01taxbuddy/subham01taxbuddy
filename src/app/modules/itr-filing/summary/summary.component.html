<ngx-loading
  [show]="loading"
  [config]="{ backdropBorderRadius: '14px', fullScreenBackdrop: true }"
></ngx-loading>
<div
  class="card__title"
  style="padding: 10px; font-size: 20px"
  (click)="downloadXML()"
>
  Personal Details
</div>

<div class="grids griHgh return_glance tpOfBx">
  <div class="com_model perBx">
    <div class="container">
      <div class="card__row">
        <div class="card__col-xs-12 card__col-sm-4 card__col-md-4">
          <!-- Name -->
          <div class="txBt">
            <span class="txLf">Name:</span>
            <span class="txMuLf">{{ getUserName("personal") }}</span>
          </div>
          <div
            class="txBt"
            *ngIf="
              ITR_JSON.aadharNumber !== '' &&
              ITR_JSON.aadharNumber !== null &&
              ITR_JSON.aadharNumber !== undefined
            "
          >
            <div>
              <span class="txLf">Aadhar Number:</span
              ><span class="txMuLf">{{ ITR_JSON.aadharNumber }}</span>
            </div>
          </div>
          <!-- Mobile -->
          <div class="txBt">
            <div>
              <span class="txLf">Mobile Number:</span
              ><span class="txMuLf">{{ ITR_JSON.contactNumber }}</span>
            </div>
          </div>
          <!--Residential Status  -->
          <div class="txBt">
            <span class="txLf">Residential Status:</span
            ><span class="txMuLf">{{
              ITR_JSON.residentialStatus === "RESIDENT"
                ? "Resident"
                : "Non Resident"
            }}</span>
          </div>
          <div class="txBt">
            <span class="txLf">Return Type:</span
            ><span class="txMuLf">{{
              ITR_JSON.isDefective === "Y"
                ? "Defective"
                : ITR_JSON.isRevised === "N"
                ? "Original"
                : "Revised"
            }}</span>
          </div>
          <!-- Address -->
          <div class="txBt" style="border-bottom: none">
            <span class="txLf">Address:</span
            ><span class="txMuLf"
              >{{
                ITR_JSON.address?.flatNo +
                  ",
                            " +
                  ITR_JSON.address?.area
              }}
              <br />
              {{ ITR_JSON.address?.city }}, PIN:
              {{ ITR_JSON.address?.pinCode }}</span
            >
          </div>
        </div>
        <div class="card__col-xs-12 card__col-sm-4 card__col-md-4">
          <!-- DOB -->
          <div class="txBt">
            <span class="txLf">Date of Birth:</span
            ><span class="txMuLf">{{ selfObj.dateOfBirth | date }}</span>
          </div>
          <!-- PAN -->
          <div class="txBt">
            <span class="txLf">PAN Card:</span
            ><span class="txMuLf">{{ ITR_JSON.panNumber }}</span>
          </div>

          <!-- Email Id  -->
          <div class="txBt">
            <span class="txLf">Email ID:</span
            ><span class="txMuLf">{{ ITR_JSON.email }}</span>
          </div>
          <!-- ITR Form -->
          <div class="txBt">
            <span class="txLf">ITR Form:</span>
            <span class="txMuLf">{{ ITR_JSON.itrSummaryJson ? getItrTypeInSummary() : ITR_JSON.itrType }}</span>
          </div>

          <div class="txBt">
            <span class="txLf">Original Ack No:</span>
            <span class="txMuLf">{{
              ITR_JSON.orgITRAckNum ? ITR_JSON.orgITRAckNum : "NA"
            }}</span>
          </div>

          <!-- Bank  -->
          <div class="txBt" style="border-bottom: none">
            <span class="txLf">Bank Name:</span
            ><span class="txMuLf">{{ bankArray?.name }}</span>
            <span class="txLf">Account Number:</span
            ><span class="txMuLf">{{ bankArray?.accountNumber }}</span>
          </div>
        </div>

        <div class="card__col-xs-12 card__col-sm-4 card__col-md-4">
          <div *ngIf="finalCalculations?.amountPayable > 0">
            <div class="incBx">
              <span class="inTex">Income Tax Payable:</span><br /><br />
              <span class="inNo"
                >{{
                  utilsService.currencyFormatter(
                    finalCalculations?.amountPayable
                  )
                }}.00</span
              >
            </div>
            <p class="paIncTx">
              You must pay the balance tax before proceeding to e-filing. To pay
              your tax
              <a
                href="https://eportal.incometax.gov.in/iec/foservices/#/e-pay-tax-prelogin/user-details"
                target="_new"
                class="LkTx"
                >Click here</a
              >
              and select<br />
              CHALLAN NO/ITNS 280 under NON-TDS/TCS Section
            </p>
          </div>
        </div>

        <div
          class="regime"
          style="background-color: orange; padding: 10px; margin-bottom: 5px"
        >
          {{ ITR_JSON.regime === "NEW" ? "New Tax Regime" : "Old Tax Regime" }}
        </div>

        <div
          class="regime"
          *ngIf="ITR_JSON.itrSummaryJson"
          style="background-color: orange; padding: 10px; margin-bottom: 5px"
        >
          {{
            ITR_JSON.isItrSummaryJsonEdited === true
              ? "Taxbuddy Calculations"
              : "Calculations as per uploaded JSON"
          }}
        </div>

        <div
          class="regime"
          *ngIf="!ITR_JSON.itrSummaryJson"
          style="background-color: orange; padding: 10px; margin-bottom: 5px"
        >
          Taxbuddy Calculations
        </div>

        <div
          class="card__col-xs-12 card__col-sm-4 card__col-md-4"
          style="margin-top: 25px"
          *ngIf="finalCalculations?.amountRefund > 0"
        >
          <div class="incBx">
            <span class="inTex">Income Tax Refund:</span><br /><br />
            <span class="inRef"
              >{{
                utilsService.currencyFormatter(finalCalculations?.amountRefund)
              }}.00</span
            >
          </div>
          <p class="paIncTx">
            Great news...!!! You are getting refund of
            {{
              utilsService.currencyFormatter(finalCalculations?.amountRefund)
            }}.00 of your tax return into your bank account number.
            <b>{{ bankArray?.accountNumber }}</b>
          </p>
        </div>
      </div>
    </div>
  </div>
  <br />
  <hr />
  <app-update-status [userId]="ITR_JSON.userId"></app-update-status>
  <hr />
  <!-- <div _ngcontent-c4="" class="sub_btn mvBtU"><button _ngcontent-c4="" class="btn prvBut"
        routerlink="/warning" type="button" tabindex="0" ng-reflect-router-link="/warning">Previous</button>
      <button _ngcontent-c4="" class="btn grBut" type="button" style="cursor: pointer;"><i _ngcontent-c4=""
          class="fas fa-download"></i> Download </button></div> -->

  <div class="flex flex-col">
    <div class="sub_btn lwBtDn" *ngIf="show">
      <!-- <button type="button" class="btn prvBut" (click)="previousRoute()"
              [disabled]="isPreviousAvailable()">Previous</button> -->
      <!-- <button type="button" *ngIf="ITR_JSON.eFillingCompleted" routerLink="/taxreturn" class="btn save"> Back
              To My ITR(s)</button> -->

      <!-- <button *ngIf="!ITR_JSON.eFillingCompleted" type="button" (click)="downloadXML()" class="btn grBut"
                [disabled]="taxable && taxable > 0" [style.cursor]="(taxable && taxable > 0) ? 'not-allowed':'pointer'"> <i
                  class="fas fa-download"></i> Download XML</button> -->
      <!-- TODO -->
      <button
        type="button"
        *ngIf="isValidItr"
        (click)="confirmSubmitITR()"
        class="btn grBut pull-right"
        [style.cursor]="!isValidateJson ? 'not-allowed' : 'pointer'"
        style="background-color: red"
        [disabled]="!isValidateJson"
      >
        File ITR
      </button>
      <!-- <button *ngIf="isValidateJson" type="button" (click)="confirmSubmitITR()"
              class="btn grBut pull-right" [disabled]="(taxable && taxable > 0) || isPreviousAvailable()"
              [style.cursor]="((taxable && taxable > 0) || isPreviousAvailable()) ? 'not-allowed':'pointer'"
              style="background-color: red;"> File
              ITR</button> -->
      <!-- <button type="button" (click)="downloadXML()" class="btn grBut" style="background-color: orange;">
              Download XML</button> -->
      <!--  [disabled]="taxable && taxable > 0"  [style.cursor]="(taxable && taxable > 0) ? 'not-allowed':'pointer'"  *ngIf="ITR_JSON.isDefective === 'Y'" -->
      <button type="button" *ngIf="isDownloadAllowed()" (click)="downloadPDF()" class="btn grBut">
        Download PDF
      </button>
      <button *ngIf="isDownloadAllowed()"
        type="button"
        class="btn kommBut"
        (click)="sendPdf('kommunicate')"
      >
        Send PDF to Kommunicate chat
      </button>

      <button *ngIf="isDownloadAllowed()"
        type="button"
        class="btn whatsAppBut"
        (click)="sendPdf('whatsapp')"
      >
        Send PDF to WhatsApp
      </button>
      <button
        type="button"
        class="btn whatsAppBut"
        style="background-color: #05a3bc; border: #05a3bc solid 1px"
        (click)="downloadJson()"
      >
        Download JSON
      </button>
      <button
        type="button"
        (click)="validateITR()"
        class="btn grBut"
        style="background-color: orange"
      >
        Validate ITR
      </button>
    </div>

    <div>
      <div class="flex flex-row justify-between items-start">
        <h3>Computation of Income and Tax</h3>
        <!-- <div>
          <mat-slide-toggle [(ngModel)]="summaryToolChecked"></mat-slide-toggle>
          <span> Use Summary Tool instead </span>
        </div> -->
      </div>
    </div>
  </div>

  <div class="container" *ngIf="show">
    <div class="row">
      <div class="col-sm-12">
        <table>
          <tbody>
            <tr>
              <td colspan="4" class="padding-panel">
                <mat-accordion>
                  <!-- *************** Income from Salary ********************-->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="
                      finalCalculations?.salary?.salaryTotalIncome === 0
                        ? true
                        : false
                    "
                    #salary
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div
                            class="col-lg-8 col-md-8 col-sm-8 col-xs-8 whieTx"
                          >
                            1. Income from Salary
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                            <div class="AdjAr1">
                              <mat-icon *ngIf="!salary.expanded"
                                >keyboard_arrow_down
                              </mat-icon>
                              <mat-icon *ngIf="salary.expanded"
                                >keyboard_arrow_up
                              </mat-icon>
                            </div>

                            <label class="rtNumb1">
                              <i class="material-icons icRup">&#8377;</i>&nbsp;
                              {{
                                utilsService.currencyFormatter(
                                  finalCalculations?.salary?.salaryTotalIncome
                                )
                              }}
                            </label>
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>

                    <div>
                      <table
                        class="table table-bordered table-striped table-hover"
                        style="margin-top: 20px"
                      >
                        <tbody>
                          <tr>
                            <th>Particulars</th>
                            <th
                              *ngFor="
                                let salary of finalCalculations?.salary
                                  ?.employers;
                                let i = index
                              "
                            >
                              Employer {{ i + 1 }}
                            </th>
                          </tr>
                          <tr>
                            <td>1. Employer's Name</td>
                            <td
                              *ngFor="
                                let salary of finalCalculations?.salary
                                  ?.employers;
                                let i = index
                              "
                            >
                              {{
                                utilsService.isNonEmpty(salary.employerName)
                                  ? salary?.employerName
                                  : "Employer " + (i + 1)
                              }}
                            </td>
                          </tr>
                          <tr>
                            <td>2. Gross Salary</td>
                            <td
                              *ngFor="
                                let salary of finalCalculations?.salary
                                  ?.employers;
                                let i = index
                              "
                            >
                              Rs
                              {{
                                utilsService.currencyFormatter(
                                  salary.grossSalary
                                )
                              }}
                            </td>
                          </tr>
                          <tr>
                            <td>3. Less: Exempt Allowance</td>
                            <td
                              *ngFor="
                                let salary of finalCalculations?.salary
                                  ?.employers;
                                let i = index
                              "
                            >
                              Rs
                              {{
                                utilsService.currencyFormatter(
                                  salary.exemptAllowance
                                )
                              }}
                            </td>
                          </tr>
                          <tr>
                            <td>4. Less: Professional Tax</td>
                            <td
                              *ngFor="
                                let salary of finalCalculations?.salary
                                  ?.employers;
                                let i = index
                              "
                            >
                              Rs
                              {{
                                utilsService.currencyFormatter(
                                  salary.professionalTax
                                )
                              }}
                            </td>
                          </tr>
                          <tr>
                            <td>5. Less: Entertainment Allowance</td>
                            <td
                              *ngFor="
                                let salary of finalCalculations?.salary
                                  ?.employers;
                                let i = index
                              "
                            >
                              Rs
                              {{
                                utilsService.currencyFormatter(
                                  salary.entAllowance
                                )
                              }}
                            </td>
                          </tr>
                          <tr>
                            <td>6. Less: Standard Deduction</td>
                            <td
                              *ngFor="
                                let salary of finalCalculations?.salary
                                  ?.employers;
                                let i = index
                              "
                            >
                              Rs
                              {{
                                utilsService.currencyFormatter(
                                  salary.standardDeduction
                                )
                              }}
                            </td>
                          </tr>

                          <tr>
                            <th>7. Taxable Salary</th>
                            <td
                              *ngFor="
                                let salary of finalCalculations?.salary
                                  ?.employers;
                                let i = index
                              "
                            >
                              Rs
                              {{
                                utilsService.currencyFormatter(
                                  salary.taxableSalary
                                )
                              }}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </mat-expansion-panel>

                  <!-- *******************Income from House Property ************************** -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="[
                      finalCalculations?.houseProperties?.hpTotalIncome &&
                      finalCalculations?.houseProperties?.hpTotalIncome === 0
                        ? true
                        : false
                    ]"
                    #HP
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            2. Income from House Property
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="AdjAr">
                              <mat-icon *ngIf="!HP.expanded"
                                >keyboard_arrow_down
                              </mat-icon>
                              <mat-icon *ngIf="HP.expanded"
                                >keyboard_arrow_up</mat-icon
                              >
                            </div>
                            <label class="rtNumb1">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.houseProperties
                                    ?.hpTotalIncome
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>

                    <div>
                      <table
                        class="table table-bordered table-striped table-hover"
                        style="margin-top: 20px"
                      >
                        <tbody>
                          <tr>
                            <th>Particulars</th>
                            <th
                              *ngFor="
                                let hp of finalCalculations?.houseProperties
                                  ?.houseProps;
                                let i = index
                              "
                            >
                              {{ hp.typeOfHp }}
                            </th>
                          </tr>
                          <tr>
                            <td>1. Gross Rent Received</td>
                            <td
                              *ngFor="
                                let hp of finalCalculations?.houseProperties
                                  ?.houseProps;
                                let i = index
                              "
                            >
                              Rs
                              {{
                                utilsService.currencyFormatter(
                                  hp.grossRentReceived
                                )
                              }}
                            </td>
                          </tr>
                          <tr>
                            <td>2. Taxes Paid</td>
                            <td
                              *ngFor="
                                let hp of finalCalculations?.houseProperties
                                  ?.houseProps;
                                let i = index
                              "
                            >
                              Rs
                              {{ utilsService.currencyFormatter(hp.taxesPaid) }}
                            </td>
                          </tr>
                          <tr>
                            <td>3. Annual Value (1-2)</td>
                            <td
                              *ngFor="
                                let hp of finalCalculations?.houseProperties
                                  ?.houseProps;
                                let i = index
                              "
                            >
                              Rs
                              {{
                                utilsService.currencyFormatter(hp.annualValue)
                              }}
                            </td>
                          </tr>
                          <tr>
                            <td>4. Standard Deduction @30%</td>
                            <td
                              *ngFor="
                                let hp of finalCalculations?.houseProperties
                                  ?.houseProps;
                                let i = index
                              "
                            >
                              Rs
                              {{
                                utilsService.currencyFormatter(
                                  hp.hpStandardDeduction
                                )
                              }}
                            </td>
                          </tr>
                          <tr>
                            <td>5. Interest On Home Loan</td>
                            <td
                              *ngFor="
                                let hp of finalCalculations?.houseProperties
                                  ?.houseProps;
                                let i = index
                              "
                            >
                              Rs
                              {{
                                utilsService.currencyFormatter(hp.hpinterest)
                              }}
                            </td>
                          </tr>
                          <tr>
                            <th>6. Net Income (3-4-5)</th>
                            <td
                              *ngFor="
                                let hp of finalCalculations?.houseProperties
                                  ?.houseProps;
                                let i = index
                              "
                            >
                              Rs
                              {{
                                utilsService.currencyFormatter(hp.hpNetIncome)
                              }}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </mat-expansion-panel>

                  <!-- ************************** Income from Business ****************************** -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="[
                      finalCalculations?.businessIncome?.businessIncomeTotal ===
                      0
                        ? true
                        : false
                    ]"
                    #business
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            3. Income from Business
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="AdjAr">
                              <mat-icon *ngIf="!business.expanded"
                                >keyboard_arrow_down
                              </mat-icon>
                              <mat-icon *ngIf="business.expanded"
                                >keyboard_arrow_up
                              </mat-icon>
                            </div>
                            <label class="rtNumb1">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.businessIncome
                                    ?.businessIncomeTotal
                                    ? finalCalculations?.businessIncome
                                        ?.businessIncomeTotal
                                    : 0
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>

                    <div>
                      <table
                        class="table table-bordered table-striped table-hover"
                        style="margin-top: 20px"
                      >
                        <tbody>
                          <tr>
                            <th>Section No.</th>
                            <th>Nature Of Business Code</th>
                            <th>Trade Name</th>
                            <th>Gross Turnover/Receipt</th>
                            <th>Taxable Income</th>
                          </tr>

                          <!-- businessIncome - bank  -->
                          <ng-container
                            *ngIf="
                              finalCalculations?.businessIncome
                                ?.businessIncomeDetails?.business44AD?.bank &&
                              finalCalculations?.businessIncome
                                ?.businessIncomeDetails?.business44AD?.bank
                                .length > 0
                            "
                          >
                            <tr
                              *ngFor="
                                let business of finalCalculations
                                  ?.businessIncome?.businessIncomeDetails
                                  ?.business44AD?.bank
                              "
                            >
                              <ng-container
                                *ngIf="
                                  business.grossTurnover > 0 &&
                                  business.TaxableIncome > 0
                                "
                              >
                                <td>
                                  {{ business?.businessSection }}
                                </td>
                                <td>
                                  {{ business?.natureOfBusinessCode }}
                                </td>
                                <td>{{ business?.tradeName }}</td>
                                <td>Rs {{ business?.grossTurnover }}</td>
                                <td>
                                  Rs
                                  {{ business?.TaxableIncome }}
                                </td>
                              </ng-container>
                            </tr>
                          </ng-container>

                          <!-- businessIncome - cash  -->
                          <ng-container
                            *ngIf="
                              finalCalculations?.businessIncome
                                ?.businessIncomeDetails?.business44AD?.cash &&
                              finalCalculations?.businessIncome
                                ?.businessIncomeDetails?.business44AD?.cash
                                .length > 0
                            "
                          >
                            <tr
                              *ngFor="
                                let business of finalCalculations
                                  ?.businessIncome?.businessIncomeDetails
                                  ?.business44AD?.cash
                              "
                            >
                              <ng-container
                                *ngIf="
                                  business.grossTurnover > 0 &&
                                  business.TaxableIncome > 0
                                "
                              >
                                <td>
                                  {{ business?.businessSection }}
                                </td>
                                <td>
                                  {{ business?.natureOfBusinessCode }}
                                </td>
                                <td>{{ business?.tradeName }}</td>
                                <td>Rs {{ business?.grossTurnover }}</td>
                                <td>
                                  Rs
                                  {{ business?.TaxableIncome }}
                                </td>
                              </ng-container>
                            </tr>
                          </ng-container>

                          <!-- professionalIncome  -->
                          <ng-container
                            *ngIf="
                              finalCalculations?.businessIncome
                                ?.businessIncomeDetails?.business44ADA &&
                              finalCalculations?.businessIncome
                                ?.businessIncomeDetails?.business44ADA.length >
                                0
                            "
                          >
                            <tr
                              *ngFor="
                                let business of finalCalculations
                                  ?.businessIncome?.businessIncomeDetails
                                  ?.business44ADA
                              "
                            >
                              <ng-container
                                *ngIf="
                                  business.grossTurnover > 0 &&
                                  business.TaxableIncome > 0
                                "
                              >
                                <td>
                                  {{ business?.businessSection }}
                                </td>
                                <td>
                                  {{ business?.natureOfBusinessCode }}
                                </td>
                                <td>{{ business?.tradeName }}</td>
                                <td>Rs {{ business?.grossTurnover }}</td>
                                <td>
                                  Rs
                                  {{ business?.TaxableIncome }}
                                </td>
                              </ng-container>
                            </tr>
                          </ng-container>

                          <!-- PROFIT AND LOSS INCOMES  -->
                          <!-- Non speculative Income  -->
                          <ng-container
                            *ngIf="
                              finalCalculations?.businessIncome
                                ?.businessIncomeDetails?.nonSpecIncome
                                ?.grossTurnover &&
                              finalCalculations?.businessIncome
                                ?.businessIncomeDetails?.nonSpecIncome
                                ?.grossTurnover !== 0
                            "
                          >
                            <tr>
                              <td>
                                {{
                                  finalCalculations?.businessIncome
                                    ?.businessIncomeDetails?.nonSpecIncome
                                    ?.businessSection
                                }}
                              </td>
                              <td>
                                {{
                                  finalCalculations?.businessIncome
                                    ?.businessIncomeDetails?.nonSpecIncome
                                    ?.natureOfBusinessCode
                                }}
                              </td>
                              <td>
                                {{
                                  finalCalculations?.businessIncome
                                    ?.businessIncomeDetails?.nonSpecIncome
                                    ?.tradeName
                                }}
                              </td>
                              <td>
                                Rs
                                {{
                                  finalCalculations?.businessIncome
                                    ?.businessIncomeDetails?.nonSpecIncome
                                    ?.grossTurnover
                                }}
                              </td>
                              <td>
                                Rs
                                {{
                                  utilsService.currencyFormatter(
                                    finalCalculations?.businessIncome
                                      ?.businessIncomeDetails?.nonSpecIncome
                                      ?.TaxableIncome
                                  )
                                }}
                              </td>
                            </tr>
                          </ng-container>
                          <!-- speculative Income  -->
                          <ng-container
                            *ngIf="
                              finalCalculations?.businessIncome
                                ?.businessIncomeDetails?.specIncome
                                ?.grossTurnover &&
                              finalCalculations?.businessIncome
                                ?.businessIncomeDetails?.specIncome
                                ?.grossTurnover !== 0
                            "
                          >
                            <tr>
                              <td>
                                {{
                                  finalCalculations?.businessIncome
                                    ?.businessIncomeDetails?.specIncome
                                    ?.businessSection
                                }}
                              </td>
                              <td>
                                {{
                                  finalCalculations?.businessIncome
                                    ?.businessIncomeDetails?.specIncome
                                    ?.natureOfBusinessCode
                                }}
                              </td>
                              <td>
                                {{
                                  finalCalculations?.businessIncome
                                    ?.businessIncomeDetails?.specIncome
                                    ?.tradeName
                                }}
                              </td>
                              <td>
                                Rs
                                {{
                                  finalCalculations?.businessIncome
                                    ?.businessIncomeDetails?.specIncome
                                    ?.grossTurnover
                                }}
                              </td>
                              <td>
                                Rs
                                {{
                                  utilsService.currencyFormatter(
                                    finalCalculations?.businessIncome
                                      ?.businessIncomeDetails?.specIncome
                                      ?.TaxableIncome
                                  )
                                }}
                              </td>
                            </tr>
                          </ng-container>
                        </tbody>
                      </table>
                    </div>
                  </mat-expansion-panel>

                  <!-- ************************** Income from Capital Gain ****************************** -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="[
                      totalCapitalGain('AMT') === 0 &&
                      !ITR_JSON.systemFlags.hasCapitalGain &&
                      !ITR_JSON.itrSummaryJson
                        ? true
                        : false
                    ]"
                    #CG
                  >
                    <mat-expansion-panel-header class="newclass">
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            4. Income from Capital Gain
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="AdjAr1">
                              <mat-icon *ngIf="!CG.expanded"
                                >keyboard_arrow_down
                              </mat-icon>
                              <mat-icon *ngIf="CG.expanded"
                                >keyboard_arrow_up</mat-icon
                              >
                            </div>
                            <label class="rtNumb1">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  keys?.TotalCapGains
                                    ? keys?.TotalCapGains
                                    : summaryDetail?.capitalGain
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                    <!-- <label>Short term</label> -->
                    <!-- Content goes here -->
                    <div class="bxHed" *ngIf="slab(-1, 'INPUT').length > 0">
                      Short term capital gain @ slab rate
                      <span style="float: right">{{
                        keys?.ShortTermAppRate
                          ? keys?.ShortTermAppRate
                          : getSlabWiseTotal(-1)
                      }}</span>
                    </div>
                    <table
                      class="table table-bordered table-striped table-hover"
                      *ngIf="slab(-1, 'INPUT').length > 0"
                    >
                      <thead>
                        <tr>
                          <th style="font-weight: bold">Name of asset</th>
                          <!-- <th style="font-weight:bold;">Description</th> -->
                          <th style="font-weight: bold">
                            Capital gain amount (1)
                          </th>
                          <th style="font-weight: bold">Deduction (2)</th>
                          <th style="font-weight: bold">
                            Net capital gain (3=1-2)
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr
                          *ngFor="
                            let slabRate of slab(-1, 'INPUT');
                            let i = index
                          "
                        >
                          <td>{{ getNameFromCode(slabRate?.assetType) }}</td>
                          <!-- <td>{{slabRate.description}}</td> -->
                          <td>
                            Rs
                            {{
                              utilsService.currencyFormatter(slabRate?.cgIncome)
                            }}
                          </td>
                          <td>
                            Rs
                            {{
                              utilsService.currencyFormatter(
                                getTotalInvestments(slabRate)
                              )
                            }}
                          </td>
                          <td>
                            Rs
                            {{
                              utilsService.currencyFormatter(
                                slabRate?.cgIncome -
                                  getTotalInvestments(slabRate)
                              )
                            }}
                          </td>
                        </tr>
                      </tbody>
                    </table>

                    <div class="bxHed" *ngIf="slab(15, 'INPUT').length > 0">
                      Short term capital gain @ 15%
                      <span style="float: right">{{
                        keys?.ShortTerm15Per
                          ? keys?.ShortTerm15Per
                          : getSlabWiseTotal(15)
                      }}</span>
                    </div>
                    <table
                      class="table table-bordered table-striped table-hover"
                      *ngIf="slab(15, 'INPUT').length > 0"
                    >
                      <thead>
                        <tr>
                          <th style="font-weight: bold">Name of asset</th>
                          <!-- <th style="font-weight:bold;">Description</th> -->
                          <th style="font-weight: bold">
                            Capital gain amount (1)
                          </th>
                          <th style="font-weight: bold">Deduction (2)</th>
                          <th style="font-weight: bold">
                            Net capital gain (3=1-2)
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr
                          *ngFor="
                            let slabRate of slab(15, 'INPUT');
                            let i = index
                          "
                        >
                          <td>{{ getNameFromCode(slabRate?.assetType) }}</td>
                          <!-- <td>{{slabRate.description}}</td> -->
                          <td>
                            Rs
                            {{
                              utilsService.currencyFormatter(slabRate?.cgIncome)
                            }}
                          </td>
                          <td>
                            Rs
                            {{
                              utilsService.currencyFormatter(
                                getTotalInvestments(slabRate)
                              )
                            }}
                          </td>
                          <td>
                            Rs
                            {{
                              utilsService.currencyFormatter(
                                slabRate?.cgIncome -
                                  getTotalInvestments(slabRate)
                              )
                            }}
                          </td>
                        </tr>
                      </tbody>
                    </table>

                    <div class="bxHed" *ngIf="slab(10, 'INPUT').length > 0">
                      Long term capital gain @ 10%
                      <span style="float: right">{{
                        keys?.LongTerm10Per
                          ? keys?.LongTerm10Per
                          : getSlabWiseTotal(10)
                      }}</span>
                    </div>
                    <table
                      class="table table-bordered table-striped table-hover"
                      *ngIf="slab(10, 'INPUT').length > 0"
                    >
                      <thead>
                        <tr>
                          <th style="font-weight: bold">Name of asset</th>
                          <!-- <th style="font-weight:bold;">Description</th> -->
                          <th style="font-weight: bold">
                            Capital gain amount (1)
                          </th>
                          <th style="font-weight: bold">Deduction (2)</th>
                          <th style="font-weight: bold">
                            Net capital gain (3=1-2)
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr
                          *ngFor="
                            let slabRate of slab(10, 'INPUT');
                            let i = index
                          "
                        >
                          <td>{{ getNameFromCode(slabRate?.assetType) }}</td>
                          <!-- <td>{{slabRate.description}}</td> -->
                          <td>
                            Rs
                            {{
                              utilsService.currencyFormatter(slabRate?.cgIncome)
                            }}
                          </td>
                          <td>
                            Rs
                            {{
                              utilsService.currencyFormatter(
                                getTotalInvestments(slabRate)
                              )
                            }}
                          </td>
                          <td>
                            Rs
                            {{
                              utilsService.currencyFormatter(
                                slabRate?.cgIncome -
                                  getTotalInvestments(slabRate)
                              )
                            }}
                          </td>
                        </tr>
                      </tbody>
                    </table>

                    <div class="bxHed" *ngIf="slab(20, 'INPUT').length > 0">
                      Long term capital gain @ 20%
                      <span style="float: right">{{
                        keys?.LongTerm20Per
                          ? keys?.LongTerm20Per
                          : getSlabWiseTotal(20)
                      }}</span>
                    </div>
                    <table
                      class="table table-bordered table-striped table-hover"
                      *ngIf="slab(20, 'INPUT').length > 0"
                    >
                      <thead>
                        <tr>
                          <th style="font-weight: bold">Name of asset</th>
                          <!-- <th style="font-weight:bold;">Description</th> -->
                          <th style="font-weight: bold">
                            Capital gain amount (1)
                          </th>
                          <th style="font-weight: bold">Deduction (2)</th>
                          <th style="font-weight: bold">
                            Net capital gain (3=1-2)
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr
                          *ngFor="
                            let slabRate of slab(20, 'INPUT');
                            let i = index
                          "
                        >
                          <td>{{ getNameFromCode(slabRate?.assetType) }}</td>
                          <!-- <td>{{slabRate.description}}</td> -->
                          <td>
                            Rs
                            {{
                              utilsService.currencyFormatter(slabRate?.cgIncome)
                            }}
                          </td>
                          <td>
                            Rs
                            {{
                              utilsService.currencyFormatter(
                                getTotalInvestments(slabRate)
                              )
                            }}
                          </td>
                          <td>
                            Rs
                            {{
                              utilsService.currencyFormatter(
                                slabRate?.cgIncome -
                                  getTotalInvestments(slabRate)
                              )
                            }}
                          </td>
                        </tr>
                      </tbody>
                    </table>

                    <!-- Content goes here -->
                    <table class="table" style="width: 100%">
                      <tbody>
                        <!--  <tr *ngFor="let cg of capitalGain.capitalGain;let i=index">
                            <td>{{displayLabel(cg.taxRate)}}</td>
                            <td class="tbl-lbl-right">
                              <i
                                class="material-icons icRup">&#8377;</i>&nbsp;{{totalCg(cg.cgIncome,cg.belAdjustmentAmount,cg.setOffAmount,cg.hpSetOff ,cg.pastYearSetOffAmount)}}
                            </td>
                          </tr> -->
                        <!-- <tr>
                              <td>Short-term chargeable at application rate</td>
                              <td class="tbl-lbl-right">
                                <i class="material-icons"
                                  style="font-size:15px;">&#8377;</i>&nbsp;{{capitalGain.summaryBucketCGST.bucketCGSTsAR.finalTotalTaxableIncome}}
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <label>Total short-term</label>
                              </td>
                              <td class="tbl-lbl-right">
                                <i class="material-icons"
                                  style="font-size:15px;">&#8377;</i>&nbsp;{{capitalGain.summaryBucketCGST.taxableIncome}}
                              </td>
                            </tr> -->
                      </tbody>
                    </table>
                    <!-- <hr> -->
                    <!-- <label>Long term</label> -->
                    <!-- <table class="table" style="width:100%">
                          <tbody>
                            <tr>
                              <td>Long-term chargeable at 10%</td>
                              <td class="tbl-lbl-right">
                                <i class="material-icons"
                                  style="font-size:15px;">&#8377;</i>&nbsp;{{capitalGain.summaryBucketCGLT.bucket10s.finalTotalTaxableIncome}}
                              </td>
                            </tr>
                            <tr>
                              <td>Long-term chargeable at 20%</td>
                              <td class="tbl-lbl-right">
                                <i class="material-icons"
                                  style="font-size:15px;">&#8377;</i>&nbsp;{{capitalGain.summaryBucketCGLT.bucket20s.finalTotalTaxableIncome}}
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <label>Total long-term</label>
                              </td>
                              <td class="tbl-lbl-right">
                                <i class="material-icons"
                                  style="font-size:15px;">&#8377;</i>&nbsp;{{capitalGain.summaryBucketCGLT.taxableIncome}}
                              </td>
                            </tr>
                          </tbody>
                        </table> -->
                  </mat-expansion-panel>

                  <!-- ***************************** Income from Other Source ***************************** -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="[
                      finalCalculations?.otherIncome?.otherIncomeTotal === 0
                        ? true
                        : false
                    ]"
                    #otherIncome
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            5. Income from Other Source
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="AdjAr1">
                              <mat-icon *ngIf="!otherIncome.expanded"
                                >keyboard_arrow_down
                              </mat-icon>
                              <mat-icon *ngIf="otherIncome.expanded"
                                >keyboard_arrow_up
                              </mat-icon>
                            </div>
                            <label class="rtNumb1">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.otherIncome
                                    ?.otherIncomeTotal
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>

                    <div>
                      <table
                        class="table table-bordered table-striped table-hover"
                        style="margin-top: 20px"
                      >
                        <tbody>
                          <tr>
                            <th>Particulars</th>
                            <th>Amount</th>
                          </tr>
                          <tr
                            *ngIf="
                              finalCalculations?.otherIncome?.otherIncomes
                                ?.saving ||
                              finalCalculations?.otherIncome?.otherIncomes
                                ?.intFromDeposit ||
                              finalCalculations?.otherIncome?.otherIncomes
                                ?.taxRefund ||
                              finalCalculations?.otherIncome?.otherIncomes
                                ?.anyOtherInterest
                            "
                          >
                            <th colspan="2">Interest Income</th>
                          </tr>
                          <tr
                            *ngIf="
                              finalCalculations?.otherIncome?.otherIncomes
                                ?.saving
                            "
                          >
                            <td>Saving Bank Accounts</td>
                            <td>
                              Rs
                              {{
                                utilsService.currencyFormatter(
                                  finalCalculations?.otherIncome?.otherIncomes
                                    ?.saving
                                )
                              }}
                            </td>
                          </tr>
                          <tr
                            *ngIf="
                              finalCalculations?.otherIncome?.otherIncomes
                                ?.intFromDeposit
                            "
                          >
                            <td>Fixed/Recurring Deposits</td>
                            <td>
                              Rs
                              {{
                                utilsService.currencyFormatter(
                                  finalCalculations?.otherIncome?.otherIncomes
                                    ?.intFromDeposit
                                )
                              }}
                            </td>
                          </tr>
                          <tr
                            *ngIf="
                              finalCalculations?.otherIncome?.otherIncomes
                                ?.taxRefund
                            "
                          >
                            <td>Income Tax Refund</td>
                            <td>
                              Rs
                              {{
                                utilsService.currencyFormatter(
                                  finalCalculations?.otherIncome?.otherIncomes
                                    ?.taxRefund
                                )
                              }}
                            </td>
                          </tr>
                          <tr
                            *ngIf="
                              finalCalculations?.otherIncome?.otherIncomes
                                ?.anyOtherInterest
                            "
                          >
                            <td>Any Other Interest Income</td>
                            <td>
                              Rs
                              {{
                                utilsService.currencyFormatter(
                                  finalCalculations?.otherIncome?.otherIncomes
                                    ?.anyOtherInterest
                                )
                              }}
                            </td>
                          </tr>

                          <tr
                            *ngIf="
                              finalCalculations?.otherIncome?.otherIncomes
                                ?.dividendIncome ||
                              finalCalculations?.otherIncome?.otherIncomes
                                ?.familyPension
                            "
                          >
                            <th colspan="2">Other Income</th>
                          </tr>
                          <tr
                            *ngIf="
                              finalCalculations?.otherIncome?.otherIncomes
                                ?.dividendIncome
                            "
                          >
                            <td>Dividend Income</td>

                            <td>
                              Rs
                              {{
                                utilsService.currencyFormatter(
                                  finalCalculations?.otherIncome?.otherIncomes
                                    ?.dividendIncome
                                )
                              }}
                            </td>
                          </tr>
                          <tr
                            *ngIf="
                              finalCalculations?.otherIncome?.otherIncomes
                                ?.familyPension
                            "
                          >
                            <td>Family Pension</td>

                            <td>
                              Rs
                              {{
                                utilsService.currencyFormatter(
                                  finalCalculations?.otherIncome?.otherIncomes
                                    ?.familyPension
                                )
                              }}
                            </td>
                          </tr>
                          <tr>
                            <th>Total</th>
                            <th>
                              Rs
                              {{
                                utilsService.currencyFormatter(
                                  finalCalculations?.otherIncome
                                    ?.otherIncomeTotal
                                )
                              }}
                            </th>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </mat-expansion-panel>

                  <!-- ********************** Total Income ********************** -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="true"
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            <b> 6. Total Income Head Wise (1+2+3+4+5)</b>
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <label class="rtNumb">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.totalHeadWiseIncome
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                  </mat-expansion-panel>

                  <!-- **************************** Losses of Current Year Set Off *************************** -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="[
                      finalCalculations?.currentYearLosses
                        ?.totalCurrentYearSetOff === 0
                        ? true
                        : false
                    ]"
                    #setOff
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            7. Losses of Current Year Setoff
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="AdjAr1">
                              <mat-icon *ngIf="!setOff.expanded"
                                >keyboard_arrow_down
                              </mat-icon>
                              <mat-icon *ngIf="setOff.expanded"
                                >keyboard_arrow_up
                              </mat-icon>
                            </div>
                            <label class="rtNumb1">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.currentYearLosses
                                    ?.totalCurrentYearSetOff
                                )
                              }}
                            </label>
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                    <table
                      class="table table-bordered table-striped table-hover"
                      style="margin-top: 20px"
                    >
                      <tbody>
                        <tr>
                          <td><b>Loss Of Current Year </b></td>
                          <td><b>Amount Adjusted</b></td>
                        </tr>
                        <tr
                          *ngIf="
                            finalCalculations?.currentYearLosses
                              ?.currentYearLossesSetOff[0]?.houseProperty !== 0
                          "
                        >
                          <td>House Property</td>
                          <td>
                            Rs
                            {{
                              utilsService.currencyFormatter(
                                finalCalculations?.currentYearLosses
                                  ?.currentYearLossesSetOff[0]?.houseProperty
                              )
                            }}
                          </td>
                        </tr>
                        <tr
                          *ngIf="
                            finalCalculations?.currentYearLosses
                              ?.currentYearLossesSetOff[0]?.businessSetOff !== 0
                          "
                        >
                          <td>Business</td>
                          <td>
                            Rs
                            {{
                              utilsService.currencyFormatter(
                                finalCalculations?.currentYearLosses
                                  ?.currentYearLossesSetOff[0]?.businessSetOff
                              )
                            }}
                          </td>
                        </tr>
                        <tr
                          *ngIf="
                            finalCalculations?.currentYearLosses
                              ?.currentYearLossesSetOff[0]
                              ?.otherThanHpBusiness !== 0
                          "
                        >
                          <td>Other's</td>
                          <td>
                            Rs
                            {{
                              utilsService.currencyFormatter(
                                finalCalculations?.currentYearLosses
                                  ?.currentYearLossesSetOff[0]
                                  ?.otherThanHpBusiness
                              )
                            }}
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </mat-expansion-panel>

                  <!-- ********************** Balance After Set Off Current Year Losses (6-7) ********************** -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="true"
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            8. Balance After Setoff Of Current Year Losses (6-7)
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <label class="rtNumb">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.balanceAfterSetOffCurrentYearLosses
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                  </mat-expansion-panel>

                  <!-- ********************** Brought Forward Losses Set Off  ********************** -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="[
                      finalCalculations?.BroughtFwdLossesSetoff
                        ?.BroughtFwdLossesSetoffTotal === 0
                        ? true
                        : false
                    ]"
                    #bflSetOff
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            9. Brought Forward Losses Setoff
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="AdjAr">
                              <mat-icon *ngIf="!bflSetOff.expanded"
                                >keyboard_arrow_down
                              </mat-icon>
                              <mat-icon *ngIf="bflSetOff.expanded"
                                >keyboard_arrow_up
                              </mat-icon>
                            </div>
                            <label class="rtNumb1">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                convertToPositive(
                                  finalCalculations?.BroughtFwdLossesSetoff
                                    ?.BroughtFwdLossesSetoffTotal
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>

                    <table
                      class="table table-bordered table-striped table-hover"
                      style="margin-top: 20px"
                    >
                      <tbody>
                        <tr>
                          <td><b>Loss Of Current Year </b></td>
                          <td><b>Amount Adjusted</b></td>
                        </tr>
                        <tr
                          *ngIf="
                            finalCalculations?.BroughtFwdLossesSetoff
                              ?.BroughtFwdLossesSetoffDtls?.hpLoss !== 0
                          "
                        >
                          <td>House Property</td>
                          <td>
                            Rs
                            {{
                              utilsService.currencyFormatter(
                                finalCalculations?.BroughtFwdLossesSetoff
                                  ?.BroughtFwdLossesSetoffDtls?.hpLoss
                              )
                            }}
                          </td>
                        </tr>
                        <tr
                          *ngIf="
                            finalCalculations?.BroughtFwdLossesSetoff
                              ?.BroughtFwdLossesSetoffDtls?.stLoss !== 0
                          "
                        >
                          <td>Short Term Loss</td>
                          <td>
                            Rs
                            {{
                              utilsService.currencyFormatter(
                                finalCalculations?.BroughtFwdLossesSetoff
                                  ?.BroughtFwdLossesSetoffDtls?.stLoss
                              )
                            }}
                          </td>
                        </tr>
                        <tr
                          *ngIf="
                            finalCalculations?.BroughtFwdLossesSetoff
                              ?.BroughtFwdLossesSetoffDtls?.ltLoss !== 0
                          "
                        >
                          <td>Long Term Loss</td>
                          <td>
                            Rs
                            {{
                              utilsService.currencyFormatter(
                                finalCalculations?.BroughtFwdLossesSetoff
                                  ?.BroughtFwdLossesSetoffDtls?.ltLoss
                              )
                            }}
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </mat-expansion-panel>

                  <!-- ********************** Gross Total Income (8-9) ********************** -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="true"
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            <b> 10. Gross Total Income (8-9)</b>
                            <i
                              >(Round of to nearest
                              <i class="material-icons icRup">&#8377;</i> 10)</i
                            >
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <label class="rtNumb">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.grossTotalIncome
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                  </mat-expansion-panel>

                  <!-- ********************** Income Chargeable To Tax At Special Rate Under Section 111A, 112 etc. ********************** -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="true"
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            11. Income Chargeable to Tax at Special Rate Under
                            Section 111A, 112 etc.
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <label class="rtNumb">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.totalSpecialRateIncome
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                  </mat-expansion-panel>

                  <!-- ********************** Deductions Under Chapter VI-A ********************** -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="
                      finalCalculations?.deductions?.deductionTotal === 0
                        ? true
                        : false
                    "
                    #deductionVI
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            12. Deductions Under Chapter VI-A
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="AdjAr1">
                              <mat-icon *ngIf="!deductionVI.expanded"
                                >keyboard_arrow_down
                              </mat-icon>
                              <mat-icon *ngIf="deductionVI.expanded"
                                >keyboard_arrow_up
                              </mat-icon>
                            </div>
                            <label class="rtNumb1">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.deductions?.deductionTotal
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>

                    <div>
                      <table
                        class="table table-bordered table-striped table-hover"
                        style="margin-top: 20px"
                      >
                        <tbody>
                          <tr>
                            <td><b>Particular</b></td>
                            <td><b>Amount</b></td>
                          </tr>
                          <tr
                            *ngFor="
                              let deduction of finalCalculations?.deductions
                                ?.deductionDtls;
                              let i = index
                            "
                          >
                            <td *ngIf="deduction.amount > 0">
                              {{ deduction.name }}
                            </td>
                            <td *ngIf="deduction.amount > 0">
                              Rs
                              {{
                                utilsService.currencyFormatter(
                                  deduction?.amount
                                )
                              }}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </mat-expansion-panel>

                  <!-- ********************** Total Income (10-12) ********************** -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="true"
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            <b>13. Total Income (10-12)</b>
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <label class="rtNumb">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.totalIncome
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                  </mat-expansion-panel>

                  <!-- ********************** Income Chargeable At Special Rates After Adjusting Basic Exemption Limit ********************** -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="true"
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            14. Income Chargeable at Special Rates After
                            Adjusting Basic Exemption Limit
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <label class="rtNumb">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.specialRateChargeable
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                  </mat-expansion-panel>

                  <!-- ************************* Net Agriculture Income ************************* -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="true"
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            15. Net Agriculture Income
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <label class="rtNumb">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.netAgricultureIncome
                                )
                              }}
                            </label>
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                  </mat-expansion-panel>

                  <!-- ************************ Aggregate Income (13-14+15) ************************ -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="true"
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            <b>16. Aggregate Income (13-14+15)</b>
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <label class="rtNumb">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.aggregateIncome
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                  </mat-expansion-panel>

                  <!-- ************************ Losses To Be Carried Forward  ************************ -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="[
                      finalCalculations?.lossesToBeCarriedForward?.cflTotal ===
                      0
                        ? true
                        : false
                    ]"
                    #lossCarryFwd
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            17. Losses To Be Carried Forward
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="AdjAr1">
                              <mat-icon *ngIf="!lossCarryFwd.expanded"
                                >keyboard_arrow_down
                              </mat-icon>
                              <mat-icon *ngIf="lossCarryFwd.expanded"
                                >keyboard_arrow_up
                              </mat-icon>
                            </div>
                            <label class="rtNumb1">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.lossesToBeCarriedForward
                                    ?.cflTotal
                                    ? finalCalculations
                                        ?.lossesToBeCarriedForward?.cflTotal
                                    : 0
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>

                    <table
                      class="table table-bordered table-striped table-hover"
                      style="margin-top: 20px"
                    >
                      <thead>
                        <tr>
                          <th>
                            <b>Year</b>
                          </th>
                          <th>
                            <b>House Property Loss</b>
                          </th>
                          <th>
                            <b>Short Term Capital Loss</b>
                          </th>
                          <th>
                            <b>Long Term Capital Loss</b>
                          </th>
                          <th>
                            <b>Other than Speculative Business Loss</b>
                          </th>
                          <th>
                            <b>Loss from Speculative Business</b>
                          </th>
                          <th>
                            <b>Loss from Specified Business</b>
                          </th>
                          <th>
                            <b>other Losses</b>
                          </th>
                          <th>
                            <b>Losses Set Off During The Year</b>
                          </th>
                          <th>
                            <b>Carried Forward To Next Year</b>
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container
                          *ngFor="
                            let losses of finalCalculations
                              ?.lossesToBeCarriedForward?.cflDtls;
                            let i = index
                          "
                        >
                          <tr>
                            <td>
                              {{
                                losses?.assessmentPastYear
                                  ? losses?.assessmentPastYear
                                  : 0
                              }}
                            </td>
                            <td>
                              {{
                                utilsService.currencyFormatter(
                                  losses?.housePropertyLoss
                                    ? losses?.housePropertyLoss
                                    : 0
                                )
                              }}
                            </td>
                            <td>
                              {{
                                utilsService.currencyFormatter(
                                  losses?.STCGLoss ? losses?.STCGLoss : 0
                                )
                              }}
                            </td>
                            <td>
                              {{
                                utilsService.currencyFormatter(
                                  losses?.LTCGLoss ? losses?.LTCGLoss : 0
                                )
                              }}
                            </td>
                            <td>
                              {{
                                utilsService.currencyFormatter(
                                  losses?.BusLossOthThanSpecLossCF
                                    ? losses?.BusLossOthThanSpecLossCF
                                    : 0
                                )
                              }}
                            </td>
                            <td>
                              {{
                                utilsService.currencyFormatter(
                                  losses?.LossFrmSpecBusCF
                                    ? losses?.LossFrmSpecBusCF
                                    : 0
                                )
                              }}
                            </td>
                            <td>
                              {{
                                utilsService.currencyFormatter(
                                  losses?.LossFrmSpecifiedBusCF
                                    ? losses?.LossFrmSpecifiedBusCF
                                    : 0
                                )
                              }}
                            </td>
                            <td>
                              {{
                                utilsService.currencyFormatter(
                                  losses?.OthSrcLoss ? losses?.OthSrcLoss : 0
                                )
                              }}
                            </td>
                            <td>
                              {{
                                utilsService.currencyFormatter(
                                  finalCalculations?.lossesToBeCarriedForward
                                    ?.lossSetOffDuringYear
                                    ? finalCalculations
                                        ?.lossesToBeCarriedForward
                                        ?.lossSetOffDuringYear
                                    : 0
                                )
                              }}
                            </td>
                            <td>
                              {{
                                utilsService.currencyFormatter(
                                  finalCalculations?.lossesToBeCarriedForward
                                    ?.cflTotal
                                    ? finalCalculations
                                        ?.lossesToBeCarriedForward?.cflTotal
                                    : 0
                                )
                              }}
                            </td>
                          </tr>
                        </ng-container>
                      </tbody>
                    </table>
                  </mat-expansion-panel>

                  <!-- *********************** Total Tax (A+B-C) ********************** -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="[
                      finalCalculations?.totalTax?.totalTax === 0 ? true : false
                    ]"
                    #totalTax
                  >
                    <mat-expansion-panel-header class="newclass">
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            18. Total Tax (A+B-C)
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="AdjAr1">
                              <mat-icon *ngIf="!totalTax.expanded"
                                >keyboard_arrow_down
                              </mat-icon>
                              <mat-icon *ngIf="totalTax.expanded"
                                >keyboard_arrow_up
                              </mat-icon>
                            </div>
                            <label class="rtNumb1">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.totalTax?.totalTax
                                )
                              }}
                            </label>
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>

                    <div>
                      <table
                        class="table table-bordered table-striped table-hover"
                        style="margin-top: 20px"
                      >
                        <tbody>
                          <tr>
                            <td><b>Particular</b></td>
                            <td><b>Amount</b></td>
                          </tr>
                          <tr>
                            <td>Tax at normal rate - A</td>
                            <td>
                              <i class="material-icons" style="font-size: 15px"
                                >₹</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.totalTax?.taxAtNormalRate
                                )
                              }}
                            </td>
                          </tr>
                          <tr>
                            <td>Tax at special rate - B</td>
                            <td>
                              <i class="material-icons" style="font-size: 15px"
                                >₹</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.totalTax?.taxAtSpecialRate
                                )
                              }}
                            </td>
                          </tr>
                          <tr>
                            <td>Rebate on agriculture income - C</td>
                            <td>
                              <i class="material-icons" style="font-size: 15px"
                                >₹</i
                              >&nbsp;-{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.totalTax
                                    ?.rebateOnAgricultureIncome
                                )
                              }}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </mat-expansion-panel>

                  <!-- *********************** Rebate Under Section 87A ************************ -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="true"
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            19. Rebate Under Section 87A
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <label class="rtNumb">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.rebateUnderSection87A
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                  </mat-expansion-panel>

                  <!-- *************************** Tax After Rebate (18-19) *************************** -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="true"
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            20. Tax After Rebate (18-19)
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <label class="rtNumb">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.taxAfterRebate
                                )
                              }}
                            </label>
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                  </mat-expansion-panel>

                  <!-- *********************** Surcharge ************************ -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="true"
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            21. Surcharge
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <label class="rtNumb">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.surcharge
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                  </mat-expansion-panel>

                  <!-- *********************** Education Cess, Including Secondary and Higher Education Cess ************************ -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="true"
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            22. Health and Education Cess
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <label class="rtNumb">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.eductionCess
                                )
                              }}
                            </label>
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                  </mat-expansion-panel>

                  <!-- *********************** Gross Tax Liability (20+21+22) ************************ -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="true"
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            23. Gross Tax Liability (20+21+22)
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <label class="rtNumb">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.grossTaxLiability
                                )
                              }}
                            </label>
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                  </mat-expansion-panel>

                  <!-- *********************** Tax Relief ************************ -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="[
                      finalCalculations?.taxRelief?.totalRelief === 0
                        ? true
                        : false
                    ]"
                    #taxRelief
                  >
                    <mat-expansion-panel-header class="newclass">
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            24. Tax Relief
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="AdjAr">
                              <mat-icon *ngIf="!taxRelief.expanded"
                                >keyboard_arrow_down
                              </mat-icon>
                              <mat-icon *ngIf="taxRelief.expanded"
                                >keyboard_arrow_up
                              </mat-icon>
                            </div>
                            <label class="rtNumb1">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.taxRelief?.totalRelief
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                    <table
                      class="table table-bordered table-striped table-hover accoTab"
                    >
                      <tbody>
                        <tr>
                          <td><b>Particular</b></td>
                          <td><b>Amount</b></td>
                        </tr>
                        <tr>
                          <td>Under 89</td>
                          <td class="">
                            <i class="material-icons icRup">&#8377;</i>&nbsp;{{
                              utilsService.currencyFormatter(
                                finalCalculations?.taxRelief?.taxReliefUnder89
                              )
                            }}
                          </td>
                        </tr>
                        <tr>
                          <td>Under 90/ 90A</td>
                          <td class="">
                            <i class="material-icons icRup">&#8377;</i>&nbsp;{{
                              utilsService.currencyFormatter(
                                finalCalculations?.taxRelief
                                  ?.taxReliefUnder90_90A
                              )
                            }}
                          </td>
                        </tr>
                        <tr>
                          <td>Under 91</td>
                          <td class="">
                            <i class="material-icons">&#8377;</i>&nbsp;{{
                              utilsService.currencyFormatter(
                                finalCalculations?.taxRelief?.taxReliefUnder91
                              )
                            }}
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </mat-expansion-panel>

                  <!-- *********************** Net Tax Liability (23-24) ************************ -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="true"
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            25. Net Tax Liability (23-24)
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <label class="rtNumb">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.netTaxLiability
                                )
                              }}
                            </label>
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                  </mat-expansion-panel>

                  <!-- *********************** Interest and Fee Payable ************************ -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="[
                      finalCalculations?.interestAndFee?.totalInterestAndFee ===
                      0
                        ? true
                        : false
                    ]"
                    #interestFee
                  >
                    <mat-expansion-panel-header class="newclass">
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            <b> 26. Interest and Fee Payable</b>
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="AdjAr1">
                              <mat-icon *ngIf="!interestFee.expanded"
                                >keyboard_arrow_down
                              </mat-icon>
                              <mat-icon *ngIf="interestFee.expanded"
                                >keyboard_arrow_up
                              </mat-icon>
                            </div>
                            <label class="rtNumb1">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.interestAndFee
                                    ?.totalInterestAndFee
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                    <table class="table table-bordered table-hover accoTab">
                      <tbody>
                        <tr>
                          <td><b>Particular</b></td>
                          <td><b>Amount</b></td>
                          <td
                            *ngIf="
                              finalCalculations?.interestAndFee?.interest234C
                                ?.q1 > 0
                            "
                          >
                            <b>Q1</b>
                          </td>
                          <td
                            *ngIf="
                              finalCalculations?.interestAndFee?.interest234C
                                ?.q2 > 0
                            "
                          >
                            <b>Q2</b>
                          </td>
                          <td
                            *ngIf="
                              finalCalculations?.interestAndFee?.interest234C
                                ?.q3 > 0
                            "
                          >
                            <b>Q3</b>
                          </td>
                          <td
                            *ngIf="
                              finalCalculations?.interestAndFee?.interest234C
                                ?.q4 > 0
                            "
                          >
                            <b>Q4</b>
                          </td>
                          <td
                            *ngIf="
                              finalCalculations?.interestAndFee?.interest234C
                                ?.q5 > 0
                            "
                          >
                            <b>Q5</b>
                          </td>
                        </tr>
                        <tr>
                          <td>Interest for late filing u/s 234A</td>
                          <td class="">
                            <i class="material-icons" style="font-size: 15px"
                              >₹</i
                            >&nbsp;{{
                              utilsService.currencyFormatter(
                                finalCalculations?.interestAndFee?.total234A
                              )
                            }}
                          </td>
                        </tr>
                        <tr>
                          <td>
                            Interest for non-payment of advance tax u/s 234B
                          </td>
                          <td class="">
                            <i class="material-icons" style="font-size: 15px"
                              >₹</i
                            >&nbsp;{{
                              utilsService.currencyFormatter(
                                finalCalculations?.interestAndFee?.total234B
                              )
                            }}
                          </td>
                        </tr>
                        <tr>
                          <td>
                            Interest for delay in payment of advance tax u/s
                            234C
                          </td>
                          <td class="">
                            <i class="material-icons" style="font-size: 15px"
                              >₹</i
                            >&nbsp;{{
                              utilsService.currencyFormatter(
                                finalCalculations?.interestAndFee?.total234C
                              )
                            }}
                          </td>
                          <td
                            *ngIf="
                              finalCalculations?.interestAndFee?.interest234C
                                ?.q1 > 0
                            "
                          >
                            {{
                              utilsService.currencyFormatter(
                                finalCalculations?.interestAndFee?.interest234C
                                  ?.q1
                              )
                            }}
                          </td>
                          <td
                            *ngIf="
                              finalCalculations?.interestAndFee?.interest234C
                                ?.q2 > 0
                            "
                          >
                            {{
                              utilsService.currencyFormatter(
                                finalCalculations?.interestAndFee?.interest234C
                                  ?.q2
                              )
                            }}
                          </td>
                          <td
                            *ngIf="
                              finalCalculations?.interestAndFee?.interest234C
                                ?.q3 > 0
                            "
                          >
                            {{
                              utilsService.currencyFormatter(
                                finalCalculations?.interestAndFee?.interest234C
                                  ?.q3
                              )
                            }}
                          </td>
                          <td
                            *ngIf="
                              finalCalculations?.interestAndFee?.interest234C
                                ?.q4 > 0
                            "
                          >
                            {{
                              utilsService.currencyFormatter(
                                finalCalculations?.interestAndFee?.interest234C
                                  ?.q4
                              )
                            }}
                          </td>
                          <td
                            *ngIf="
                              finalCalculations?.interestAndFee?.interest234C
                                ?.q5 > 0
                            "
                          >
                            {{
                              utilsService.currencyFormatter(
                                finalCalculations?.interestAndFee?.interest234C
                                  ?.q5
                              )
                            }}
                          </td>
                        </tr>
                        <tr>
                          <td>Penalty for late filing u/s 234F</td>
                          <td class="">
                            <i class="material-icons" style="font-size: 15px"
                              >₹</i
                            >&nbsp;{{
                              utilsService.currencyFormatter(
                                finalCalculations?.interestAndFee?.total234F
                              )
                            }}
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </mat-expansion-panel>

                  <!-- *********************** Aggregate Liability (25+26) ************************ -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="true"
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            27. Aggregate Liability (25+26)
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <label class="rtNumb">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.aggregateLiability
                                )
                              }}
                            </label>
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                  </mat-expansion-panel>

                  <!-- *********************** Tax Paid ************************ -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="[
                      finalCalculations?.taxPaid?.totalTaxesPaid === 0
                        ? true
                        : false
                    ]"
                    #taxPaid
                  >
                    <mat-expansion-panel-header class="newclass">
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            28. Tax Paid
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="AdjAr">
                              <mat-icon *ngIf="!taxPaid.expanded"
                                >keyboard_arrow_down
                              </mat-icon>
                              <mat-icon *ngIf="taxPaid.expanded"
                                >keyboard_arrow_up
                              </mat-icon>
                            </div>
                            <label class="rtNumb1">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(
                                  finalCalculations?.taxPaid?.totalTaxesPaid
                                )
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                    <!-- SALARY TDS -->
                    <div>
                      <div class="bxHed">TDS (On Salary)</div>
                      <table
                        class="table table-bordered table-striped table-hover"
                      >
                        <thead>
                          <tr>
                            <th style="font-weight: bold; width: 20%">
                              Name Of Deductor
                            </th>
                            <th style="font-weight: bold; width: 25%">
                              TAN Of Deductor
                            </th>
                            <th style="font-weight: bold; width: 35%">
                              Amount Of Which TDS Deducted
                            </th>
                            <th style="font-weight: bold; width: 20%">
                              Total Tax Amount
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr
                            *ngFor="
                              let onSalary of finalCalculations?.taxPaid
                                ?.onSalary
                            "
                          >
                            <td>{{ onSalary?.deductorName }}</td>
                            <td>{{ onSalary?.deductorTAN }}</td>
                            <td>
                              Rs.
                              {{
                                utilsService.currencyFormatter(
                                  onSalary?.totalAmountCredited
                                )
                              }}
                            </td>
                            <td>
                              Rs.
                              {{
                                utilsService.currencyFormatter(
                                  onSalary?.totalTdsDeposited
                                )
                              }}
                            </td>
                          </tr>
                          <tr>
                            <th>Total Amount</th>
                            <th></th>
                            <th></th>
                            <th>
                              Rs.
                              {{
                                utilsService.currencyFormatter(
                                  finalCalculations?.taxPaid?.totalOnSalary
                                )
                              }}
                            </th>
                          </tr>
                        </tbody>
                      </table>
                    </div>

                    <!-- OTHER THAN SALARY -->
                    <div>
                      <div class="bxHed">TDS (Other Than Salary)</div>
                      <table
                        class="table table-bordered table-striped table-hover"
                      >
                        <thead>
                          <tr>
                            <th style="font-weight: bold; width: 20%">
                              Name Of Deductor
                            </th>
                            <th style="font-weight: bold; width: 25%">
                              TAN Of Deductor
                            </th>
                            <th style="font-weight: bold; width: 35%">
                              Amount Of Which TDS Deducted
                            </th>
                            <th style="font-weight: bold; width: 20%">
                              Total Tax Deducted
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr
                            *ngFor="
                              let otherThanSalary16A of finalCalculations
                                ?.taxPaid?.otherThanSalary16A
                            "
                          >
                            <td>{{ otherThanSalary16A?.deductorName }}</td>
                            <td>{{ otherThanSalary16A?.deductorTAN }}</td>
                            <td>
                              Rs.
                              {{
                                utilsService.currencyFormatter(
                                  otherThanSalary16A?.totalAmountCredited
                                )
                              }}
                            </td>
                            <td>
                              Rs.
                              {{
                                utilsService.currencyFormatter(
                                  otherThanSalary16A?.totalTdsDeposited
                                )
                              }}
                            </td>
                          </tr>
                          <tr>
                            <th>Total Amount</th>
                            <th></th>
                            <th></th>
                            <th>
                              Rs.
                              {{
                                finalCalculations?.taxPaid
                                  ?.totalOtherThanSalary16A
                              }}
                            </th>
                          </tr>
                        </tbody>
                      </table>
                    </div>

                    <!-- 26QB -->

                    <div>
                      <div class="bxHed">TDS (Other Than Salary 26QB)</div>
                      <table
                        class="table table-bordered table-striped table-hover"
                      >
                        <thead>
                          <tr>
                            <th style="font-weight: bold; width: 20%">
                              Name Of Deductor
                            </th>
                            <th style="font-weight: bold; width: 25%">
                              PAN Of Deductor
                            </th>
                            <th style="font-weight: bold; width: 35%">
                              Amount Of Which TDS Deducted
                            </th>
                            <th style="font-weight: bold; width: 20%">
                              Total Tax Deducted
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr
                            *ngFor="
                              let otherThanSalary26QB of finalCalculations
                                ?.taxPaid?.otherThanSalary26QB
                            "
                          >
                            <td>{{ otherThanSalary26QB?.deductorName }}</td>
                            <td>{{ otherThanSalary26QB?.deductorTAN }}</td>
                            <td>
                              Rs.
                              {{
                                utilsService.currencyFormatter(
                                  otherThanSalary26QB?.totalAmountCredited
                                )
                              }}
                            </td>
                            <td>
                              Rs.
                              {{
                                utilsService.currencyFormatter(
                                  otherThanSalary26QB?.totalTdsDeposited
                                )
                              }}
                            </td>
                          </tr>
                          <tr>
                            <th>Total Amount</th>
                            <th></th>
                            <th></th>
                            <th>
                              Rs.
                              {{
                                finalCalculations?.taxPaid
                                  ?.totalOtherThanSalary26QB
                              }}
                            </th>
                          </tr>
                        </tbody>
                      </table>
                    </div>

                    <!-- tcs -->
                    <div>
                      <div class="bxHed">TCS</div>
                      <table
                        class="table table-bordered table-striped table-hover"
                      >
                        <thead>
                          <tr>
                            <th style="font-weight: bold; width: 20%">
                              Name Of Collector
                            </th>
                            <th style="font-weight: bold; width: 25%">
                              TAN Of Collector
                            </th>
                            <th style="font-weight: bold; width: 35%">
                              Amount Of Which TCS Collected
                            </th>
                            <th style="font-weight: bold; width: 20%">
                              Total Tax Collected
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr
                            *ngFor="let tcs of finalCalculations?.taxPaid?.tcs"
                          >
                            <td>{{ tcs?.deductorName }}</td>
                            <td>{{ tcs?.deductorTAN }}</td>
                            <td>
                              Rs.
                              {{
                                utilsService.currencyFormatter(
                                  tcs?.totalAmountCredited
                                )
                              }}
                            </td>
                            <td>
                              Rs.
                              {{
                                utilsService.currencyFormatter(
                                  tcs?.totalTdsDeposited
                                )
                              }}
                            </td>
                          </tr>

                          <tr>
                            <th>Total Amount</th>
                            <th></th>
                            <th></th>
                            <th>
                              Rs.
                              {{ finalCalculations?.taxPaid?.totalTcs }}
                            </th>
                          </tr>
                        </tbody>
                      </table>
                    </div>

                    <!-- othertanTDSTCS -->
                    <div>
                      <div class="bxHed">
                        Advance / Self Assessment Tax Paid
                      </div>
                      <table
                        class="table table-bordered table-striped table-hover"
                      >
                        <thead>
                          <tr>
                            <th style="font-weight: bold; width: 20%">
                              BRS Code
                            </th>
                            <th style="font-weight: bold; width: 25%">Date</th>
                            <th style="font-weight: bold; width: 35%">
                              Challan No.
                            </th>
                            <th style="font-weight: bold; width: 20%">
                              Tax Deposited
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr
                            *ngFor="
                              let advance of finalCalculations?.taxPaid
                                ?.otherThanTDSTCS
                            "
                          >
                            <td>{{ advance.bsrCode }}</td>
                            <td>
                              {{ advance.date | date : "dd MMM yyyy" }}
                            </td>
                            <td>{{ advance.challanNo }}</td>
                            <td>
                              Rs.
                              {{
                                utilsService.currencyFormatter(advance.amount)
                              }}
                            </td>
                          </tr>
                          <tr>
                            <th>Total Amount</th>
                            <th></th>
                            <th></th>
                            <th>
                              Rs.
                              {{
                                finalCalculations?.taxPaid?.totalOtherThanTDSTCS
                              }}
                            </th>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </mat-expansion-panel>

                  <!-- *********************** Amount Payable / (Refund) (27-28)  ************************* -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="true"
                  >
                    <mat-expansion-panel-header>
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            <b>29. Amount Payable/(Refund) (27-28)</b>
                            <i
                              >(Round of to nearest
                              <i class="material-icons icRup">&#8377;</i> 10)</i
                            >
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <label class="rtNumb">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                finalCalculations?.amountPayable > 0
                                  ? finalCalculations?.amountPayable
                                  : "(" + finalCalculations?.amountRefund + ")"
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                  </mat-expansion-panel>

                  <!-- *********************** Exempt Income ************************ -->
                  <mat-expansion-panel
                    class="color-panel accordion-border"
                    [disabled]="[
                      ITR_JSON?.exemptIncomes?.length > 0 ? false : true
                    ]"
                    #exemptIncome
                  >
                    <mat-expansion-panel-header class="newclass">
                      <div
                        class="font80"
                        style="width: 100%"
                        cellpadding="0"
                        cellspacing="0"
                      >
                        <div class="nav nav-stacked">
                          <div class="col-lg-8 col-md-8 col-sm-8 whieTx">
                            <b> 30. Exempt Income</b>
                          </div>
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="AdjAr1">
                              <mat-icon *ngIf="!exemptIncome.expanded"
                                >keyboard_arrow_down
                              </mat-icon>
                              <mat-icon *ngIf="exemptIncome.expanded"
                                >keyboard_arrow_up
                              </mat-icon>
                            </div>
                            <label class="rtNumb1">
                              <i class="material-icons icRup">&#8377;</i
                              >&nbsp;{{
                                keys.ExemptIncAgriOthUs10Total
                                  ? keys.ExemptIncAgriOthUs10Total
                                  : getExemptIncomeTotal()
                              }}</label
                            >
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel-header>
                    <div
                      *ngIf="
                        ITR_JSON.itrSummaryJson && keys.ExemptIncomeDetails
                      "
                    >
                      <table
                        class="table table-bordered table-striped table-hover"
                      >
                        <tbody>
                          <tr>
                            <td><b>Particular</b></td>
                            <td><b>Amount</b></td>
                          </tr>
                          <tr *ngFor="let exempt of keys.ExemptIncomeDetails">
                            <td>{{ exempt.NatureDesc }}</td>
                            <td class="">
                              <i class="material-icons" style="font-size: 15px"
                                >₹</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(exempt.OthAmount)
                              }}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div *ngIf="!ITR_JSON.itrSummaryJson">
                      <table
                        class="table table-bordered table-striped table-hover"
                      >
                        <tbody>
                          <tr>
                            <td><b>Particular</b></td>
                            <td><b>Amount</b></td>
                          </tr>
                          <tr *ngFor="let exempt of ITR_JSON.exemptIncomes">
                            <td>{{ getExemptDescription(exempt) }}</td>
                            <td class="">
                              <i class="material-icons" style="font-size: 15px"
                                >₹</i
                              >&nbsp;{{
                                utilsService.currencyFormatter(exempt.amount)
                              }}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </mat-expansion-panel>
                </mat-accordion>
              </td>
            </tr>
          </tbody>
        </table>
        <!-- </div>
    </div> -->
        <!-- **************************** Accordion End -->

        <!-- --------------------- ITR 4 --------------------------------- -->

        <br />
        <!-- </div> -->
        <!-- <div class="container">
  <div class="row">
    <div class="col-lg-12">
      <b>Note:</b> * Negative value has been considered as zero for the purpose
      of calculation of total income however provision for setoff and carry
      forword will be taken care off as per ITR rules.
    </div>
  </div>
  <div class="row" *ngIf="taxable && taxable > 0">
    <div class="col-lg-3 col-md-3 col-sm-12">
      <div class="incBx1">
        <span class="inTex">Income Tax Payable:</span><br /><br />
        <span class="inNo"
          >{{ utilsService.currencyFormatter(taxable) }}.00</span
        >
      </div>
    </div>
    <div class="col-lg-9 col-md-9 col-sm-12 paIncTx1">
      You must pay the balance tax before proceeding to e-filing. To pay your
      tax
      <a
        href="https://onlineservices.tin.egov-nsdl.com/etaxnew/tdsnontds.jsp"
        target="_new"
        style="text-decoration: underline"
        class="LkTx"
        >Click here</a
      ><br />
      and select CHALLAN NO/ITNS 280 under NON-TDS/TCS Section
    </div>
  </div>

  <div *ngIf="refund > 0">
    <div class="col-lg-3 col-md-3 col-sm-12">
      <div class="incBx1">
        <span class="inTex">Income Tax Refund:</span><br /><br />
        <span class="inRef"
          >{{ utilsService.currencyFormatter(refund) }}.00</span
        >
      </div>
    </div>
    <div class="col-lg-9 col-md-9 col-sm-12 paIncTx1">
      Great news...!!! You are getting refund of
      {{ utilsService.currencyFormatter(refund) }}.00 of your tax return into
      your bank account number. <b>{{ bankArray?.accountNumber }}</b>
      <br />
      <span style="font-size: 12px; font-style: italic"
        ><b>Note:</b> Ensure that your bank account is correct & Pre-validated
        to Income tax portal.
        <span>
          <a
            href="https://blog.taxbuddy.com/index.php/pre-validate-bank-account/"
            target="_blank"
            style="color: #e98017 !important"
            >Click here</a
          ></span
        >
        to know How to Pre-validate Your Bank Account.</span
      >
    </div>
  </div>
  <!-- </div> -->
        <div class="sub_btn lwBtDn" *ngIf="show">
          <button
            type="button"
            *ngIf="isValidItr"
            (click)="confirmSubmitITR()"
            class="btn grBut pull-right"
            [style.cursor]="!isValidateJson ? 'not-allowed' : 'pointer'"
            style="background-color: red"
            [disabled]="!isValidateJson"
          >
            File ITR
          </button>
          <!-- <button type="button" (click)="downloadXML()" class="btn grBut" style="background-color: orange;">
            Download XML
        </button> -->
          <button *ngIf="isDownloadAllowed()" type="button" (click)="downloadPDF()" class="btn grBut">
            Download PDF
          </button>
        </div>
        <div *ngIf="!show" class="text-center-align">
          <label>{{ errorMessage }}</label>
        </div>
      </div>
    </div>
  </div>
</div>
