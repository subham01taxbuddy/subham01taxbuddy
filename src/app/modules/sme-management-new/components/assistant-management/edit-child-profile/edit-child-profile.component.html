<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px', fullScreenBackdrop: true }"></ngx-loading>

<div class="rowClr-1">
  <div class="row ">
    <div class="col-sm-12">
      <div class="sub-title-container">
        <span class="sub-title-text">Child Details</span>
      </div>
    </div>
  </div>
  <div class="new-assigned-container">
    <div class="new-sub-container">

      <div class="row">
        <div class="col-sm-12 TxHd-12">
          <span class="header-text-1">Personal Details</span>
        </div>
      </div>
      <div class="user-data-container">
        <div class="row">
          <div class="col-sm-4">
            <mat-label> Mobile No/Login No* *</mat-label>
            <mat-form-field appearance="outline">
              <input type="text" matInput placeholder="Mobile No" [formControl]="mobileNumber" class="input-field"
                maxlength="10" minlength="6" trim [numbersOnly]="true" required  />
            </mat-form-field>
          </div>
          <div class="col-sm-4">
            <mat-label>Assistant Name(First,Middle & Last Name)*</mat-label>
            <mat-form-field appearance="outline">
              <input type="text" matInput placeholder="First,Middle & Last Name" [formControl]="name" class="input-field"  required />
            </mat-form-field>
          </div>
          <div class="col-sm-4">
            <mat-label> Email ID * </mat-label>
            <mat-form-field appearance="outline">
              <input type="text" matInput placeholder="email id" [formControl]="smeOriginalEmail" class="input-field"
              required  />
            </mat-form-field>
          </div>
        </div>
        <div *ngIf="!fromEdit" class="row mt-2 verifyBank">
          <button class="col-2 verify-button "
                [disabled]="mobileNumber.invalid ||name.invalid || smeOriginalEmail.invalid || loading"
                (click)="registerUser()">Register
              </button>
        </div>

        <div class="row mt-3">
          <div class="col-sm-4">
            <mat-label> Pin Code * </mat-label>
            <mat-form-field appearance="outline">
              <input type="text" matInput placeholder="pin" [formControl]="pinCode" class="input-field" maxlength="10"
                minlength="6" trim digitsOnly required  />
            </mat-form-field>
          </div>
          <div class="col-sm-4">
            <mat-label> city *</mat-label>
            <mat-form-field appearance="outline">
              <input type="text" matInput placeholder="city" [formControl]="city" class="input-field" required  />
            </mat-form-field>
          </div>
          <div class="col-sm-4">
            <mat-label> state *</mat-label>
            <mat-form-field appearance="outline">
              <input type="text" matInput placeholder="state" [formControl]="state" class="input-field" required />
            </mat-form-field>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-sm-4">
            <mat-label> Qualification * </mat-label>
            <mat-form-field appearance="outline">
              <input type="text" matInput placeholder="Qualification" name="" [formControl]="qualification"
                class="input-field" readonly />
            </mat-form-field>
          </div>
          <div class="col-sm-4">
            <mat-label> Calling Number </mat-label>
            <mat-form-field appearance="outline">
              <input type="text" matInput placeholder="Calling Number" [numbersOnly]="true" trim
                [formControl]="callingNumber" class="input-field" />
              <mat-error class="mt-3"> <span *ngIf="smeFormGroup.controls['callingNumber'].hasError('required')">Please
                  enter mobile no.</span>
                <span *ngIf="smeFormGroup.controls['callingNumber'].hasError('pattern')">Please enter valid mobile
                  no.</span>
              </mat-error>
            </mat-form-field>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-sm-12 TxHd-12">
            <span class="header-text-1">Roles</span>
          </div>
        </div>
        <div class="user-data-container">
          <div class="row">
            <div class="col-sm-4" style="margin-top: 10px;">
              <div class="card" style="margin-top: 10px;">
                <b style="font-size: 18px">Roles: </b>
                <section class="example-section" >
                  <p><mat-checkbox  [formControl]="filerAssistant">Filer-Assistant</mat-checkbox></p>
                  <hr>
                </section>
              </div>
            </div>
            <div class="col-sm-2"></div>
            <div class="col-sm-4" style="margin-top: 10px;" >
              <div class="card" style="margin-top: 10px;">
                <b style="font-size: 18px">SME/Partner Type: </b>
              </div>
              <section class="example-section" >
                <p><mat-checkbox (change)="onCheckboxChange(3)" [formControl]="internal">Internal</mat-checkbox></p>
                <hr>
                <p><mat-checkbox (change)="onCheckboxChange(4)" [formControl]="external">External</mat-checkbox></p>
                <hr>
              </section>
            </div>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-sm-12 TxHd-12">
            <span class="header-text-1">Expertise & Availability</span>
          </div>
        </div>
        <div class="user-data-container">
          <div class="row">
            <div class="col-sm-2">
              <div class="card" style="margin-top: 10px;">
                <b style="font-size: 18px">Language: </b>
                <div class="row">
                  <section class="example-section">
                    <div *ngFor="let lang of langList" class="lang-checkbox">
                      <p>
                        <mat-checkbox [formControl]="getLanguageControl(lang)"
                          [disabled]="languageForm.controls[lang].status==='DISABLED'"
                          (change)="onLanguageCheckboxChange(lang)">
                          <span class="spacer">{{ lang }}</span></mat-checkbox>
                      </p>
                    </div>
                  </section>
                </div>
              </div>
            </div>
            <div class="col-sm-3">
              <div class="card" style="margin-top: 10px;">
                <b style="font-size: 18px">ITR's Type can Handle: </b>
                <div class="row">
                  <section class="example-section">
                    <div *ngFor="let itrType of irtTypeCapability" class="irt-type-checkbox">
                      <p>
                        <mat-checkbox [formControl]="getItrTypeControl(itrType)"
                          (change)="onItrTypeCheckboxChange(itrType)"><span class="spacer">{{ itrType
                            }}</span></mat-checkbox>
                      </p>
                    </div>
                  </section>
                </div>
              </div>
            </div>
            <div class="col-sm-3">
              <div class="card" style="margin-top: 10px;">
                <b style="font-size: 18px">Inactivity Time Duration:</b>
                <div class="row">
                  <section class="example-section">
                    <div *ngFor="let duration of inactivityTimeDuration" class="duration-checkbox">
                      <p>
                        <mat-checkbox [formControl]="getDurationControl(duration.key)"
                          (change)="onDurationCheckboxChange($event,duration.key)">
                          <span class="spacer">{{ duration.key }}</span>
                        </mat-checkbox>
                      </p>
                    </div>
                  </section>
                </div>
              </div>
            </div>
            <div class="col-sm-4">
              <div class="card" style="margin-top: 10px;">
                <b style="font-size: 18px">Cases Limit for ITR Filers (Work Load):</b>
                <div class="row">
                    <div class="col-sm-12">
                        <input type="number" min="1" class="form-control" [formControl]="activeCaseMaxCapacity" required>
                        <div *ngIf="activeCaseMaxCapacity.invalid && (activeCaseMaxCapacity.value === null || activeCaseMaxCapacity.value === '')" class="text-danger">This field is required.</div>
                        <div *ngIf="activeCaseMaxCapacity.value === 0" class="text-danger">Please enter a value greater than zero.</div>
                    </div>
                </div>
            </div>
            </div>

          </div>
        </div>
        <div class="row">
          <div class="col-sm-12 TxHd-12">
            <span class="header-text-1">Other Details</span>
          </div>
        </div>
        <div class="user-data-container">
          <div class="row">
            <div class="col-sm-3">
              <mat-label>Parent Name </mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="Name" [formControl]="parentName" class="input-field" readonly />
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-label> Official Email ID</mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="Official Email ID" [formControl]="smeOfficialEmail"
                  class="input-field" readonly />
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-label> Kommunicate ID </mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="Kommunicate ID" [formControl]="email" class="input-field"
                  readonly />
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-label>Principle Name </mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="Name" [formControl]="principalName" class="input-field"
                  readonly />
              </mat-form-field>
            </div>
          </div>

        </div>
        <div class="row mt-3">
          <div style="flex: 1 0 0; text-align: left;">
            <button class="new-cancel-button-1" (click)="cancelUpdate()">Cancel </button>
          </div>
          <div style=" flex: 1 0 0; text-align: right;">
            <button class="save-all" (click)="updateSmeDetails()">Save & Go Back to Table </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
