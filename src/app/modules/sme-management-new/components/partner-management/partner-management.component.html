<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px', fullScreenBackdrop: true }"></ngx-loading>
<div class="rowClr-1">
  <div class="row ">
    <div class="col-sm-12">
      <div class="sub-title-container">
        <span class="sub-title-text">SME Details</span>
      </div>
    </div>
  </div>
  <div class="new-assigned-container">
    <div class="new-sub-container">
      <form [formGroup]="partnerForm">
        <div class="row">
          <div class="col-sm-12 TxHd-12">
            <span class="header-text-1">Personal Details</span>
          </div>
        </div>
        <div class="user-data-container">
          <div class="row">
            <div class="col-sm-4">
              <mat-label> Mobile No *</mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="Mobile No" formControlName="mobileNumber" class="input-field"
                  maxlength="10" minlength="6" trim [numbersOnly]="true" required readonly />
              </mat-form-field>
            </div>
            <div class="col-sm-4">
              <mat-label> Individual/Principal/Firm Name * </mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="Name" formControlName="name" class="input-field"  required  readonly/>
              </mat-form-field>
            </div>
            <div class="col-sm-4">
              <mat-label> Email ID * </mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="email id" formControlName="smeOriginalEmail" class="input-field"
                required readonly />
              </mat-form-field>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-sm-4">
              <mat-label> Pin Code * </mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="pin" formControlName="pinCode" class="input-field" maxlength="10"
                  minlength="6" trim digitsOnly required  />
              </mat-form-field>
            </div>
            <div class="col-sm-4">
              <mat-label> city *</mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="city" formControlName="city" class="input-field" required  />
              </mat-form-field>
            </div>
            <div class="col-sm-4">
              <mat-label> state *</mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="state" formControlName="state" class="input-field" required />
              </mat-form-field>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-sm-4">
              <mat-label> Qualification * </mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="Qualification" name="" formControlName="qualification"
                  class="input-field" readonly />
              </mat-form-field>
            </div>
            <div class="col-sm-4">
              <mat-label> Referred by whom from taxbuddy? </mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="Referred person" formControlName="referredBy" class="input-field"
                  readonly />
              </mat-form-field>
            </div>
            <div class="col-sm-4">
              <mat-label> Calling Number </mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="Calling Number" [numbersOnly]="true" trim
                  formControlName="callingNumber" class="input-field" />
                <mat-error class="mt-3"> <span *ngIf="partnerForm.controls['callingNumber'].hasError('required')">Please
                    enter mobile no.</span>
                  <span *ngIf="partnerForm.controls['callingNumber'].hasError('pattern')">Please enter valid mobile
                    no.</span>
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-12 TxHd-12">
            <span class="header-text-1">Roles</span>
          </div>
        </div>
        <div class="user-data-container">
          <div class="row">
            <div class="col-sm-4" style="margin-top: 10px;">
              <div class="card" style="margin-top: 10px;">
                <b style="font-size: 18px">Roles: </b>
                <section class="example-section">
                  <p><mat-checkbox (change)="onCheckboxChange(1); onChange(1)" [disabled]="true" formControlName="filerIndividual">Filer-Individual</mat-checkbox></p>
                  <hr>
                  <p><mat-checkbox (change)="onCheckboxChange(2); onChange(2)" [disabled]="true" formControlName="filerPrinciple">Filer-Principal/Firm</mat-checkbox></p>
                  <hr>
                </section>
              </div>
            </div>
            <div class="col-sm-2"></div>
            <div class="col-sm-4" style="margin-top: 10px;" >
              <div class="card" style="margin-top: 10px;">
                <b style="font-size: 18px">SME/Partner Type: </b>
              </div>
              <section class="example-section">
                <p><mat-checkbox (change)="onCheckboxChange(3)" [disabled]="true" formControlName="internal">Internal</mat-checkbox></p>
                <hr>
                <p><mat-checkbox (change)="onCheckboxChange(4)" [disabled]="true" formControlName="external">External</mat-checkbox></p>
                <hr>
              </section>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-12 TxHd-12">
            <span class="header-text-1">PAN & Bank Details</span>
          </div>
        </div>
        <div class="user-data-container">
          <div class="row" [formGroup]="bankDetailsFormGroup">
            <b style="font-size: 18px">Bank Details</b>
            <div class="col-sm-4">
              <mat-label> Account Number* </mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="Account No" formControlName="accountNumber"
                  class="input-field" trim [numbersOnly]="true" required maxlength="20" minlength="3"
                  (blur)="trimValue(bankDetailsFormGroup.controls['accountNumber'])"
                  (change)="updateBankDetailsForm()" />
                <mat-error class="mt-3"
                  *ngIf="bankDetailsFormGroup.controls['accountNumber'].hasError('pattern') || bankDetailsFormGroup.controls['accountNumber'].hasError('minlength') || bankDetailsFormGroup.controls['accountNumber'].hasError('maxlength')">
                  Account number should be 3-20 digits.</mat-error>
                <mat-error class="mt-3" *ngIf="bankDetailsFormGroup.controls['accountNumber'].hasError('required')">
                  Enter Account number</mat-error>
              </mat-form-field>
            </div>
            <div class=" col-sm-4">
              <mat-label> IFSC Code* </mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="IFSC code"
                  (blur)="trimValue(bankDetailsFormGroup.controls['ifsCode'])"
                  (keyup)="changeToUpper(bankDetailsFormGroup.controls['ifsCode'])" formControlName="ifsCode"
                  class="input-field" maxLength="11" trim required (change)="updateBankDetailsForm()" />
                <mat-error class="mt-3" *ngIf="bankDetailsFormGroup.controls['ifsCode'].hasError('pattern')">Enter
                  valid
                  IFSC.</mat-error>
                <mat-error class="mt-3" *ngIf="bankDetailsFormGroup.controls['ifsCode'].hasError('required')">Enter
                  valid
                  IFSC.</mat-error>
              </mat-form-field>
            </div>

            <div class="col-sm-4">
              <mat-label> Type of Account* </mat-label>
              <mat-form-field appearance="outline">
                <mat-select placeholder="Account Type" name="accountType" formControlName="accountType" required
                  (selectionChange)="updateBankDetailsForm()">
                  <mat-option *ngFor="let account of accountTypeDropdown" [value]="account.value">
                    {{ account.label }}
                  </mat-option>
                </mat-select>
                <mat-error class="mt-3"
                  *ngIf="bankDetailsFormGroup.controls['accountType'].hasError('required')">Select
                  account type</mat-error>
              </mat-form-field>
            </div>
            <div class="row mt-3 verifyBank">
              <app-custom-button class="col-2 verify-button" [disabled]="bankDetailsFormGroup.invalid ||!isBankDetailsFormChange|| loading"
                    [actions]="[verifyBankDetails]">
                    verify
              </app-custom-button>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xm-12 mt-3">
              <mat-label> PAN Number * </mat-label>
              <mat-form-field class="input-field-width" appearance="outline">
                <input
                  matInput placeholder="PAN Number" class="input-field" name="pan" formControlName="pan"  required
                  maxLength="10"
                  matTooltip="Format should like this(e.g. XXXXXNNNNX) X indicate character and N indicates number."
                  matTooltipClass="tab-tooltip" matTooltipPosition="above" readonly>

              </mat-form-field>
            </div>

            <div class="col-lg-6 col-md-6 col-sm-6 col-xm-12 mt-3">
              <mat-label> GSTIN </mat-label>
              <mat-form-field class="input-field-width" appearance="outline">
                <input
                  (blur)="changeToUpper(bankDetailsFormGroup.controls['gstin']);trimValue(bankDetailsFormGroup.controls['gstin']);checkGstin()"
                  matInput placeholder="GSTIN" class="input-field" name="gstin" formControlName="gstin">
                  <mat-error *ngIf="bankDetailsFormGroup.controls['gstin'].invalid">
                    Enter valid GSTIN</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div class="row mt-4">
            <div class="col-sm-6">
              <div>
                <b style="font-size: 18px">Additional ID's Required?</b>
                <div class="row col-8">
                  <section class="example-section add-id">
                    <mat-radio-group [disabled]="true" [formControl]="additionalIdsRequired" readonly   (change)="onAdditionalIdsRequiredChange()" >
                      <mat-radio-button [disabled]="true" [value]="true">Yes</mat-radio-button>
                      <mat-radio-button [disabled]="true" [value]="false">No</mat-radio-button>
                    </mat-radio-group>
                  </section>
                </div>
              </div>

            </div>
            <div class="col-sm-6" *ngIf="additionalIdsRequired.value">
              <mat-label> No of additional Id's required </mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="Additional ID" readonly [disabled]="true" [formControl]="additionalIdsCount"
                  class="input-field" maxlength="2" minlength="0" trim [numbersOnly]="true" />
                  <mat-error *ngIf="additionalIdsCount.hasError('required')">
                    Enter No of additional Id's required </mat-error>
                    <mat-error *ngIf="additionalIdsCount.value === '0'">
                      Number cannot be zero
                    </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>
        <div class="row mt-3" >
          <div class="col-sm-12 TxHd-12">
            <span class="header-text-1">Expertise & Availability</span>
          </div>
        </div>
        <div class="user-data-container" [ngClass]="{ 'disabled': isDisabled }">
          <div class="row">
            <div class="col-sm-3">
              <div class="card" style="margin-top: 10px;">
                <b style="font-size: 18px">Language: </b>
                <div class="row">
                  <section class="example-section">
                    <div *ngFor="let lang of langList" class="lang-checkbox">
                      <p>
                        <mat-checkbox [disabled]="isDisabled" [formControl]="getLanguageControl(lang)"
                          (change)="onLanguageCheckboxChange(lang)">
                          <span class="spacer">{{ lang }}</span></mat-checkbox>
                      </p>
                    </div>
                  </section>
                </div>
              </div>
            </div>
            <div class="col-sm-5">
              <div class="card" style="margin-top: 10px;">
                  <b style="font-size: 18px">ITR's Type can Handle: </b>
                  <div class="row">
                      <section class="example-section">
                          <div *ngFor="let itrType of irtTypeCapability" class="irt-type-checkbox">
                              <p>
                                  <mat-checkbox [disabled]="isDisabled" [formControl]="getItrTypeControl(itrType)"
                                      (change)="onItrTypeCheckboxChange(itrType)">
                                      <span class="spacer">{{ getItrTypeName(itrType) }}</span>
                                  </mat-checkbox>
                              </p>
                          </div>
                      </section>
                  </div>
              </div>
            </div>

           </div>
        </div>
        <div class="row">
          <div class="col-sm-12 TxHd-12">
            <span class="header-text-1">Other Details</span>
          </div>
        </div>
        <div class="user-data-container">
          <div class="row">
            <div class="col-sm-4" >
              <mat-label>Parent Name </mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="Name" formControlName="parentName" class="input-field" readonly />
              </mat-form-field>
            </div>
            <div class="col-sm-4">
              <mat-label> Official Email ID</mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="Official Email ID" formControlName="smeOfficialEmail"
                  class="input-field" readonly />
              </mat-form-field>
            </div>
            <div class="col-sm-4" *ngIf="false">
              <mat-label> Kommunicate ID </mat-label>
              <mat-form-field appearance="outline">
                <input type="text" matInput placeholder="Kommunicate ID" formControlName="email" class="input-field"
                  readonly />
              </mat-form-field>
            </div>
          </div>
        </div>
        <div class="row mt-3">
          <div style="flex: 1 0 0; text-align: left;">
            <button class="new-cancel-button-1" (click)="cancelUpdate()">Cancel </button>
          </div>
          <div style=" flex: 1 0 0; text-align: right;">
            <app-custom-button class="save-all"  [actions]="[updateSmeDetails]">
              Save & Go Back to Table
            </app-custom-button>
          </div>
        </div>


      </form>
    </div>
  </div>
</div>
