<ngx-loading
  [show]="loading"
  [config]="{ backdropBorderRadius: '14px', fullScreenBackdrop: true }"
></ngx-loading>
<h1 mat-dialog-title>{{ data.title }}</h1>

<mat-dialog-content *ngIf="isDataById === null">
  <h3>Something went wrong to get review data, please try again.</h3>
</mat-dialog-content>

<mat-dialog-content *ngIf="!isDataById">
  <h2>Loading Data, please Wait...</h2>
</mat-dialog-content>

<mat-dialog-content *ngIf="isDataById">
  <div class="card__row">
    <div class="card__col-lg-4 card__col-md-6 card__col-sm-12">
      <mat-label class="title">User name:</mat-label>
      <mat-label class="value">{{ userDetails.sourceUserName }}</mat-label>
    </div>
    <div class="card__col-lg-4 card__col-sm-12">
      <mat-label class="title">Mobile:</mat-label>
      <mat-label class="value">{{ userDetails.sourceMobile }}</mat-label>
    </div>
    <div class="card__col-lg-4 card__col-sm-12">
      <mat-label class="title">Email:</mat-label>
      <mat-label class="value">{{ userDetails.sourceEmail }}</mat-label>
    </div>
  </div>
  <div class="card__row">
    <div class="card__col-lg-4 card__col-sm-12">
      <mat-label class="title">Source platform:</mat-label>
      <mat-label class="value">{{ userDetails.sourcePlatform }}</mat-label>
    </div>
    <div class="card__col-lg-4 card__col-sm-12">
      <mat-label class="title">Product:</mat-label>
      <mat-label class="value">{{ userDetails.productName }}</mat-label>
    </div>
    <div class="card__col-lg-4 card__col-sm-12">
      <mat-label class="title">Rating:</mat-label>
      <mat-label class="value">{{ userDetails.sourceRating }}</mat-label>
    </div>
  </div>
  <div class="card__row">
    <div class="card__col-lg-12 card__col-sm-12">
      <mat-label class="title">Comment:</mat-label>
      <mat-label class="value">{{ userDetails.sourceComment }}</mat-label>
    </div>
  </div>
  <div class="card__row">
    <div class="card__col-lg-4 card__col-sm-12">
      <mat-label class="title">Review date:</mat-label>
      <mat-label class="value">{{
        userDetails.sourceReviewDateTime | date : "dd/MM/yyyy"
      }}</mat-label>
    </div>
    <div class="card__col-lg-4 card__col-sm-12">
      <mat-label class="title">Is review negative:</mat-label>
      <mat-label class="value">{{ userDetails.isReviewNegative }}</mat-label>
    </div>
    <div class="card__col-lg-4 card__col-sm-12">
      <mat-label class="title">Sentiment:</mat-label>
      <mat-label class="value">{{ userDetails.reviewSentiment }}</mat-label>
    </div>
  </div>
  <div class="card__row">
    <div class="card__col-lg-12 card__col-sm-12">
      <mat-label class="title">SME Notes:</mat-label>
      <mat-label class="value">{{ userDetails.smeNotes }}</mat-label>
    </div>
  </div>
  <br />
  <!-- <div class="card-row">

    <h4><b>Search User with Mobile Number:</b></h4>
    <div class="filter__col card__col-md-4 card__col-xs-12">
      <mat-form-field appearance="outline">
        <mat-label>Mobile Number: </mat-label>
        <input
          matInput
          placeholder="Enter Mobile Number"
          [(ngModel)]="searchParam.mobileNumber"
          oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
          onkeypress=" event.charCode >= 48 && event.charCode <= 57"
          maxlength="10"
        />
      </mat-form-field>
    </div>
    <div class="card__col-md-4 card__col-sm-12">
      <button class="tbd-btn" (click)="this.search('mobile')">
        <i class="fa fa-search" aria-hidden="true"></i>&nbsp;Search
      </button>
    </div>
  </div> -->

  <div class="card__row">
    <div class="card__col-xs-6 card__col-sm-12">
      <label class="input__label" for="attr">Enter Mobile Number</label>
      <div class="filter__col card__col-sm-4 card__col-xs-10">
        <div class="input">
          <div class="input__select">
            <input
              type="text"
              class="select__box ogp_select"
              style="background-image: none"
              [(ngModel)]="mobileNo"
              name="mobileNo"
            />
          </div>
        </div>
      </div>
      <div class="card__col-md-3 card__col-xs-12 pull-right">
        <button mat-raised-button (click)="saveRecord()">Save</button>
      </div>
    </div>
  </div>
</mat-dialog-content>

<div
  class="card__row"
  style="margin-top: 10px"
  *ngIf="userDetails?.sourcePlatform === 'Kommunicate'"
>
  <button
    mat-raised-button
    class="btn-help"
    (click)="openKommunicateDashboard('kommunicate')"
  >
    Open With Kommunicate &nbsp;&nbsp;<i
      class="fa fa-comments-o"
      aria-hidden="true"
    ></i>
  </button>
</div>

<div class="card__row" style="margin-top: 10px;"
  *ngIf="userDetails?.sourcePlatform==='Play Store' || userDetails?.sourcePlatform==='Google My Business' ||  userDetails?.sourcePlatform==='GOOGLE_WORKSPACE'">
  <button mat-raised-button class="btn-help" (click)="openKommunicateDashboard('NotKommunicate')"
    [disabled]="waChatLink === null">Open With
    Kommunicate &nbsp;&nbsp;<i class="fa fa-comments-o" aria-hidden="true"></i></button>
</div>

<div
  class="card__row"
  style="margin-top: 10px"
  *ngIf="userDetails && userDetails?.sourcePlatform != 'Kommunicate'"
>
  <ag-grid-angular
    class="ag-theme-balham"
    [gridOptions]="reviewGridOptions"
    (rowClicked)="onUsersRowClicked($event)"
  >
  </ag-grid-angular>
</div>

<mat-dialog-actions align="center">
  <button mat-raised-button mat-dialog-close tabindex="-1">Close</button>
</mat-dialog-actions>
