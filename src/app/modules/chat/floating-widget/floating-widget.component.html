<div [@widgetVisibility]="showWidget" class="floating-widget" *ngIf="showWidget">


    <!-- <app-user-chat *ngIf="selectedUser" [user]="selectedUser" filetype="ITR"></app-user-chat> -->
  


  <div class="header">
      <!-- <span class="icon menu-icon">&#9776;</span> -->
      <span class="glyphicon glyphicon-new-window"></span>        
      <span class="widget-title">Chat</span>
      <span class="glyphicon glyphicon-remove" (click)="closeWidget()"></span>

  </div>

  <div class="options">
     <div class="option-box" *ngFor="let deptName of departmentNames" [ngClass]="{'font-size-class': true}">{{ deptName }}</div>
  </div>

  <!-- <div class="search-bar">
      <span class="glyphicon glyphicon-search"></span>
      <input type="text" placeholder="Search messages or users">
  </div> -->

  <div class="user-list">

      <div class="user-box" *ngIf="!isUserChatVisible">
          <div *ngFor="let conversation of conversationList" (click)="openUserChat(conversation)">
            <img [src]="conversation.image" alt="User Icon">
            <div class="user-info">
                <div class="card_row row col-lg-12">
                    <span class="col-lg-8 user-name">{{ conversation.name }}</span>
                    <span class="col-lg-4 user-time">{{ getCurrentTime(conversation.timestamp) }}</span>
                </div>
                <span class="chat-snippet">{{ conversation.text }}</span>

               <!-- <div class="notification-badge" *ngIf="user.notificationCount > 0">{{ user.notificationCount }}</div> -->

            </div>
          </div>

      </div>
      <app-user-chat  *ngIf="isUserChatVisible"
                      [image]="selectedUser.image"
                      [username]="selectedUser.name"
                      [requestId]="selectedUser.request_id"
      ></app-user-chat>
  </div>





</div>

